"use strict";(self.webpackChunkEshop=self.webpackChunkEshop||[]).push([[909],{9909:(D,g,a)=>{a.r(g),a.d(g,{ManageProductsModule:()=>M});var u=a(6895),f=a(7716),y=a(5529),t=a(4650),P=a(6493),h=a(2011),p=a(4350),l=a(2114);function A(e,r){if(1&e){var o=t.EpF();t.TgZ(0,"tr",4)(1,"td",4),t._uU(2),t.qZA(),t.TgZ(3,"td",4),t._uU(4),t.qZA(),t.TgZ(5,"td",4),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"button",5),t.NdJ("click",function(){var _=t.CHM(o).$implicit,m=t.oxw();return t.KtG(m.editProduct(_))}),t._uU(9,"Change"),t.qZA()(),t.TgZ(10,"td")(11,"button",5),t.NdJ("click",function(){var _=t.CHM(o).$implicit,m=t.oxw();return t.KtG(m.selectProduct(_))}),t._uU(12,"Preview"),t.qZA()()()}if(2&e){var i=r.$implicit,d=t.oxw();t.xp6(2),t.Oqu(i.id),t.xp6(2),t.Oqu(i.product_name),t.xp6(2),t.Oqu(d.servCommon.GetDisplayNameByKey(d.categoryList,"id",i.category_id,"Category"))}}var Z=function(){function e(r,o,i,d){this.servCommon=r,this.servCategory=o,this.servProduct=i,this.authServ=d,this.product_id_for_Addedit=new t.vpe,this.product_id_for_Detail=new t.vpe,this.product_id_Selected=new t.vpe,this.categoryList=[]}return e.prototype.ngOnInit=function(){var r=this;this.get_products(),this.getCategories(),this.eventsSubscription=this.events.subscribe(function(){return r.get_products()})},e.prototype.getCategories=function(){var r=this;this.servCategory.getCategorys().subscribe(function(o){r.categoryList=o})},e.prototype.ngOnDestroy=function(){this.eventsSubscription.unsubscribe()},e.prototype.addProduct=function(){this.product_id_for_Addedit.emit(0)},e.prototype.editProduct=function(r){this.product_id_for_Detail.emit(void 0),this.product_id_for_Addedit.emit(r.id)},e.prototype.selectProduct=function(r){this.product_id_for_Addedit.emit(void 0),this.product_id_for_Detail.emit(r.id)},e.prototype.get_products=function(){var r=this;this.servProduct.getProducts(this.authServ.currentUserValue.id).subscribe(function(o){r.products=o,console.log("aaaaaaa:"+JSON.stringify(r.authServ.currentUserValue.id))})},e.\u0275fac=function(o){return new(o||e)(t.Y36(P.v),t.Y36(h.H),t.Y36(p.M),t.Y36(l.$))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-display-product"]],inputs:{events:"events"},outputs:{product_id_for_Addedit:"product_id_for_Addedit",product_id_for_Detail:"product_id_for_Detail",product_id_Selected:"product_id_Selected"},decls:15,vars:2,consts:[[1,"btn","btn-sm","btn-outline","btn-sm",3,"click"],[1,"table","table-striped"],["scope","col"],["style","height: 5px;",4,"ngFor","ngForOf"],[2,"height","5px"],[1,"btn","btn-outline","btn-sm",3,"click"]],template:function(o,i){1&o&&(t._uU(0),t.TgZ(1,"button",0),t.NdJ("click",function(){return i.addProduct()}),t._uU(2,"New Product"),t.qZA(),t.TgZ(3,"table",1)(4,"thead")(5,"tr")(6,"th"),t._uU(7,"ID"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Product Name"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"category"),t.qZA(),t._UZ(12,"th",2),t.qZA()(),t.TgZ(13,"tbody"),t.YNc(14,A,13,3,"tr",3),t.qZA()()),2&o&&(t.hij("products count:",i.products.length,"\n"),t.xp6(14),t.Q6J("ngForOf",i.products))},dependencies:[u.sg]}),e}(),v=a(655),n=a(4719);function C(e,r){if(1&e&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&e){var o=r.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.Category)}}function S(e,r){1&e&&(t.TgZ(0,"span",21),t._uU(1," Category not provided. "),t.qZA())}function b(e,r){1&e&&(t.TgZ(0,"span",21),t._uU(1," IsOnlyForAdvertise not provided. "),t.qZA())}var T=function(){function e(r,o,i,d){this.formBuilder=r,this.servProduct=o,this.servCategory=i,this.authServ=d,this.formSaved=new t.vpe,this.addedit_OPmode="",this.defaultDate="1987-06-30",this.isSubmitted=!1,this.isSubmitted_uploadform=!1,this.categoryList=[]}return e.prototype.ngAfterViewInit=function(){this.getCategories()},e.prototype.getCategories=function(){var r=this;this.servCategory.getCategorys().subscribe(function(o){r.categoryList=o})},e.prototype.ngOnInit=function(){this.myForm=this.formBuilder.group({seller_id:[""],product_name:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(50)]],imageUrl:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(50)]],category:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(50)]],price:["",[n.kI.min(1),n.kI.max(1e6)]],discount_text:["",[n.kI.minLength(3),n.kI.maxLength(50)]],icon:[],description:["",[n.kI.minLength(3),n.kI.maxLength(50)]],IsOnlyForAdvertise:[]})},e.prototype.ngOnChanges=function(r){return(0,v.mG)(this,void 0,void 0,function(){return(0,v.Jh)(this,function(o){switch(o.label){case 0:return r.param_Product_id?(this.getCategories(),0==this.param_Product_id?(this.addedit_OPmode="Add",this.myForm.reset()):this.addedit_OPmode="Edit",this.param_Product_id?[4,this.get_Product()]:[3,2]):[3,2];case 1:o.sent(),this.myForm.patchValue({seller_id:this.product_Selected.seller_id,product_name:this.product_Selected.product_name,category:this.product_Selected.category_id,price:this.product_Selected.price,description:this.product_Selected.description,IsOnlyForAdvertise:this.product_Selected.IsOnlyForAdvertise,discount_text:this.product_Selected.discount_text,imageUrl:this.product_Selected.imageUrl}),o.label=2;case 2:return[2]}})})},e.prototype.get_Product=function(){var r=this;return new Promise(function(o,i){r.servProduct.getProduct(r.param_Product_id).subscribe(function(d){r.product_Selected=d[0],console.log("m in addedt getting a user:"+JSON.stringify(d)+" abc:"+r.param_Product_id),console.log("res[0]:"+JSON.stringify(d[0])),o(!0)})})},e.prototype.onImageSelected=function(r){this.imageFile=r.target.files[0],console.log("event.target.files[0];"+r.target.files[0])},Object.defineProperty(e.prototype,"errorControl",{get:function(){return this.myForm.controls},enumerable:!1,configurable:!0}),e.prototype.onSubmit=function(){var r=this;console.log(this.myForm.value);var o=new FormData,i="";null!=this.authServ.currentUserValue.id&&(i=this.authServ.currentUserValue.id),o.append("id",this.param_Product_id.toString()),o.append("seller_id",i),o.append("product_name",this.myForm.value.product_name),o.append("category_id",this.myForm.value.category),o.append("price",this.myForm.value.price),o.append("discount_text",this.myForm.value.discount_text),o.append("description",this.myForm.value.description),o.append("IsOnlyForAdvertise",this.myForm.value.IsOnlyForAdvertise),this.imageFile&&this.imageFile.name&&(o.append("imageUrl",this.imageFile.name),o.append("icon",this.imageFile)),console.log("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"),"Add"==this.addedit_OPmode?this.servProduct.addProduct(o).subscribe(function(d){r.formSaved.emit(!0),r.myForm.reset()}):"Edit"==this.addedit_OPmode&&(console.log("edit product on........."),this.servProduct.updateProduct(o).subscribe(function(d){console.log("trying to update product..."),r.formSaved.emit(!0),r.myForm.reset(),console.log("update product done...")}))},e.\u0275fac=function(o){return new(o||e)(t.Y36(n.qu),t.Y36(p.M),t.Y36(h.H),t.Y36(l.$))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-product-add-edit"]],inputs:{param_Product_id:"param_Product_id"},outputs:{formSaved:"formSaved"},features:[t.TTD],decls:37,vars:6,consts:[["autocomplete","off",3,"formGroup","ngSubmit"],[1,"form-group"],["for","product_name"],["type","text","maxlength","50","formControlName","product_name","id","product_name",1,"form-control"],["for","Price"],["type","number","formControlName","price","id","price",1,"form-control"],["for","description"],["type","text","maxlength","50","formControlName","description","id","description",1,"form-control"],["for","discount_text"],["type","text","maxlength","50","formControlName","discount_text","id","discount_text",1,"form-control"],["for","category"],["formControlName","category","required","",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],["for","IsOnlyForAdvertise"],["type","checkbox","id","IsOnlyForAdvertise",3,"formControlName"],["for","image"],["type","file","id","image",1,"form-control-file",3,"change"],["alt","Product image",1,"card-img-top",2,"height","250px","width","auto","object-fit","contain",3,"src"],["type","submit",1,"btn","btn-primary"],[3,"value"],[1,"error"]],template:function(o,i){1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(1,"div",1)(2,"label",2),t._uU(3,"Product Name"),t.qZA(),t._UZ(4,"input",3),t.qZA(),t.TgZ(5,"div",1)(6,"label",4),t._uU(7,"Price"),t.qZA(),t._UZ(8,"input",5),t.qZA(),t.TgZ(9,"div",1)(10,"label",6),t._uU(11,"description"),t.qZA(),t._UZ(12,"input",7),t.qZA(),t.TgZ(13,"div",1)(14,"label",8),t._uU(15,"discount_text"),t.qZA(),t._UZ(16,"input",9),t.qZA(),t.TgZ(17,"div",1)(18,"label",10),t._uU(19,"Category"),t.qZA(),t.TgZ(20,"select",11),t.YNc(21,C,2,2,"option",12),t.qZA(),t.YNc(22,S,2,0,"span",13),t.qZA(),t.TgZ(23,"div",1)(24,"label",14),t._uU(25,"Only For Advertise : "),t.qZA(),t._UZ(26,"input",15),t._uU(27," Yes/No "),t.YNc(28,b,2,0,"span",13),t.qZA(),t.TgZ(29,"div",1)(30,"label",16),t._uU(31,"Product Image"),t.qZA(),t.TgZ(32,"input",17),t.NdJ("change",function(c){return i.onImageSelected(c)}),t.qZA()(),t.TgZ(33,"div",1),t._UZ(34,"img",18),t.qZA(),t.TgZ(35,"button",19),t._uU(36,"Submit"),t.qZA()()),2&o&&(t.Q6J("formGroup",i.myForm),t.xp6(21),t.Q6J("ngForOf",i.categoryList),t.xp6(1),t.Q6J("ngIf",i.isSubmitted&&(null==i.errorControl.category.errors?null:i.errorControl.category.errors.required)),t.xp6(4),t.Q6J("formControlName","IsOnlyForAdvertise"),t.xp6(2),t.Q6J("ngIf",i.isSubmitted&&(null==i.errorControl.IsOnlyForAdvertise.errors?null:i.errorControl.IsOnlyForAdvertise.errors.required)),t.xp6(6),t.MGl("src","../../../assets/product_images/",i.errorControl.imageUrl.value,"",t.LSH))},dependencies:[u.sg,u.O5,n._Y,n.YN,n.Kr,n.Fj,n.wV,n.Wl,n.EJ,n.JJ,n.JL,n.Q7,n.nD,n.sg,n.u]}),e}(),F=function(){function e(r,o){this.servProduct=r,this.authServ=o}return e.prototype.ngOnChanges=function(r){r.param_Product_id&&this.param_Product_id&&this.get_Product()},e.prototype.get_Product=function(){var r=this;this.servProduct.getProduct(this.param_Product_id).subscribe(function(o){r.product_Selected=o[0],r.imagepath="E:/myApt/nodeMyShop/images/apple.jpg"})},e.\u0275fac=function(o){return new(o||e)(t.Y36(p.M),t.Y36(l.$))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-product-detail"]],inputs:{param_Product_id:"param_Product_id"},features:[t.TTD],decls:12,vars:7,consts:[[1,"card","mt-2","mb-3",2,"background-color","light-yellow","border","5px solid pink","padding","10px"],[1,"card-body"],[1,"card-text","firm_name"],["alt","Product image",1,"card-img-top",2,"height","250px","width","auto","object-fit","contain",3,"src"],[1,"card-title",2,"color","maroon"],[1,"card-text"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p",2),t._uU(3),t.qZA()(),t._UZ(4,"img",3),t.TgZ(5,"div",1)(6,"h5",4),t._uU(7),t.qZA(),t.TgZ(8,"p",5),t._uU(9),t.qZA(),t.TgZ(10,"p",5),t._uU(11),t.qZA()()()),2&o&&(t.xp6(3),t.AsE("",i.product_Selected.firm_name,"",i.product_Selected.firm_addr,""),t.xp6(1),t.MGl("src","../../../../../../assets/product_images/",i.product_Selected.imageUrl,"",t.LSH),t.xp6(3),t.Oqu(i.product_Selected.product_name),t.xp6(2),t.Oqu(i.product_Selected.description),t.xp6(2),t.AsE("Price:",i.product_Selected.price," \xa0\xa0 \xa0 ",i.product_Selected.discount_text,""))}}),e}();function U(e,r){if(1&e){var o=t.EpF();t.TgZ(0,"div",1)(1,"app-product-add-edit",4),t.NdJ("formSaved",function(c){t.CHM(o);var s=t.oxw();return t.KtG(s.productformSave_Detected(c))}),t.qZA()()}if(2&e){var i=t.oxw();t.xp6(1),t.Q6J("param_Product_id",i.curr_Prod_id_for_Addedit)}}function x(e,r){if(1&e&&(t.TgZ(0,"div",1),t._UZ(1,"app-product-detail",5),t.qZA()),2&e){var o=t.oxw();t.xp6(1),t.Q6J("param_Product_id",o.curr_Prod_id_for_detail)}}var I=[{path:"",component:function(){function e(){this.eventsSubject=new y.xQ}return e.prototype.emitEventToChild=function(){this.eventsSubject.next()},e.prototype.Prod_Select_Changed_for_Addedit=function(r){this.curr_Prod_id_for_Addedit=r},e.prototype.Prod_Select_Changed_for_Detail=function(r){this.curr_Prod_id_for_detail=r},e.prototype.productformSave_Detected=function(r){console.log("in child formSaved detected m in manage seller"),this.curr_Prod_id_for_Addedit=null,this.emitEventToChild()},e.prototype.onScroll=function(r){console.log("scrolling...")},e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-manage-products"]],hostBindings:function(o,i){1&o&&t.NdJ("scroll",function(c){return i.onScroll(c)},!1,t.Jf7)},decls:5,vars:3,consts:[[1,"row"],[1,"col-12"],[3,"events","product_id_for_Addedit","product_id_for_Detail"],["class","col-12",4,"ngIf"],[3,"param_Product_id","formSaved"],[3,"param_Product_id"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"app-display-product",2),t.NdJ("product_id_for_Addedit",function(c){return i.Prod_Select_Changed_for_Addedit(c)})("product_id_for_Detail",function(c){return i.Prod_Select_Changed_for_Detail(c)}),t.qZA()(),t.YNc(3,U,2,1,"div",3),t.YNc(4,x,2,1,"div",3),t.qZA()),2&o&&(t.xp6(2),t.Q6J("events",i.eventsSubject.asObservable()),t.xp6(1),t.Q6J("ngIf",null!=i.curr_Prod_id_for_Addedit),t.xp6(1),t.Q6J("ngIf",null!=i.curr_Prod_id_for_detail))},dependencies:[u.O5,Z,T,F]}),e}()}],O=function(){function e(){}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.Bz.forChild(I),f.Bz]}),e}(),M=function(){function e(){}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,n.u5,n.UX,O]}),e}()}}]);