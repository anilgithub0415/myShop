"use strict";(self.webpackChunkEshop=self.webpackChunkEshop||[]).push([[509],{4509:(w,h,a)=>{a.r(h),a.d(h,{ManageOrdersModule:()=>D});var g=a(6895),p=a(7716),e=a(4650),m=function(r){return{active:r}},v=function(){function r(){this.selectedOption="Paid-Orders"}return r.prototype.selectOption=function(n){this.selectedOption=n},r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-manage-orders"]],decls:21,vars:15,consts:[[1,"row"],[1,"col-12"],[1,"navbar","navbar-light","bg-light"],[1,"container-fluid"],[1,"nav","d-flex"],[1,"nav-item",3,"ngClass"],["routerLink","Paid-Orders","href","#",1,"nav-link",3,"click"],["routerLink","Verified-Orders","href","#",1,"nav-link",3,"click"],["routerLink","Dispatched-Orders","href","#",1,"nav-link",3,"click"],["routerLink","Delievered-Orders","href","#",1,"nav-link",3,"click"],["routerLink","Complete-Orders","href","#",1,"nav-link",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),e.NdJ("click",function(){return o.selectOption("Paid-Orders")}),e._uU(7," Paid "),e.qZA()(),e.TgZ(8,"li",5)(9,"a",7),e.NdJ("click",function(){return o.selectOption("Verified-Orders")}),e._uU(10," Verified "),e.qZA()(),e.TgZ(11,"li",5)(12,"a",8),e.NdJ("click",function(){return o.selectOption("Dispatched-Orders")}),e._uU(13," Dispatched "),e.qZA()(),e.TgZ(14,"li",5)(15,"a",9),e.NdJ("click",function(){return o.selectOption("Delievered-Orders")}),e._uU(16," Delievered "),e.qZA()(),e.TgZ(17,"li",5)(18,"a",10),e.NdJ("click",function(){return o.selectOption("Completed-Orders")}),e._uU(19," Completed "),e.qZA()()()()(),e._UZ(20,"router-outlet"),e.qZA()()),2&t&&(e.xp6(5),e.Q6J("ngClass",e.VKq(5,m,"Paid-Orders"===o.selectedOption)),e.xp6(3),e.Q6J("ngClass",e.VKq(7,m,"Verified-Orders"===o.selectedOption)),e.xp6(3),e.Q6J("ngClass",e.VKq(9,m,"Dispatched-Orders"===o.selectedOption)),e.xp6(3),e.Q6J("ngClass",e.VKq(11,m,"Delievered-Orders"===o.selectedOption)),e.xp6(3),e.Q6J("ngClass",e.VKq(13,m,"Completed-Orders"===o.selectedOption)))},dependencies:[g.mk,p.lC,p.rH],styles:[".nav[_ngcontent-%COMP%]{background-color:#c6a06e;border-radius:7px;height:35px}.nav-link[_ngcontent-%COMP%]{font-size:10px}.active[_ngcontent-%COMP%]{background-color:red;border:1px solid white;color:#fff;border-radius:7px;height:35px}"]}),r}(),_=function(){function r(){}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-new-orders"]],decls:167,vars:0,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"table-responsive"],[1,"table"],[1,"text-primary"],[1,"text-right"],[1,"card","card-plain"],[1,"card-category"]],template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"new-orders works!"),e.qZA(),e.TgZ(2,"div",0)(3,"div",1)(4,"div",2)(5,"div",3)(6,"h5",4),e._uU(7," Simple Table"),e.qZA()(),e.TgZ(8,"div",5)(9,"div",6)(10,"table",7)(11,"thead",8)(12,"th"),e._uU(13," Name "),e.qZA(),e.TgZ(14,"th"),e._uU(15," Country "),e.qZA(),e.TgZ(16,"th"),e._uU(17," City "),e.qZA(),e.TgZ(18,"th",9),e._uU(19," Salary "),e.qZA()(),e.TgZ(20,"tbody")(21,"tr")(22,"td"),e._uU(23," Dakota Rice "),e.qZA(),e.TgZ(24,"td"),e._uU(25," Niger "),e.qZA(),e.TgZ(26,"td"),e._uU(27," Oud-Turnhout "),e.qZA(),e.TgZ(28,"td",9),e._uU(29," $36,738 "),e.qZA()(),e.TgZ(30,"tr")(31,"td"),e._uU(32," Minerva Hooper "),e.qZA(),e.TgZ(33,"td"),e._uU(34," Cura\xe7ao "),e.qZA(),e.TgZ(35,"td"),e._uU(36," Sinaai-Waas "),e.qZA(),e.TgZ(37,"td",9),e._uU(38," $23,789 "),e.qZA()(),e.TgZ(39,"tr")(40,"td"),e._uU(41," Sage Rodriguez "),e.qZA(),e.TgZ(42,"td"),e._uU(43," Netherlands "),e.qZA(),e.TgZ(44,"td"),e._uU(45," Baileux "),e.qZA(),e.TgZ(46,"td",9),e._uU(47," $56,142 "),e.qZA()(),e.TgZ(48,"tr")(49,"td"),e._uU(50," Philip Chaney "),e.qZA(),e.TgZ(51,"td"),e._uU(52," Korea, South "),e.qZA(),e.TgZ(53,"td"),e._uU(54," Overland Park "),e.qZA(),e.TgZ(55,"td",9),e._uU(56," $38,735 "),e.qZA()(),e.TgZ(57,"tr")(58,"td"),e._uU(59," Doris Greene "),e.qZA(),e.TgZ(60,"td"),e._uU(61," Malawi "),e.qZA(),e.TgZ(62,"td"),e._uU(63," Feldkirchen in K\xe4rnten "),e.qZA(),e.TgZ(64,"td",9),e._uU(65," $63,542 "),e.qZA()(),e.TgZ(66,"tr")(67,"td"),e._uU(68," Mason Porter "),e.qZA(),e.TgZ(69,"td"),e._uU(70," Chile "),e.qZA(),e.TgZ(71,"td"),e._uU(72," Gloucester "),e.qZA(),e.TgZ(73,"td",9),e._uU(74," $78,615 "),e.qZA()(),e.TgZ(75,"tr")(76,"td"),e._uU(77," Jon Porter "),e.qZA(),e.TgZ(78,"td"),e._uU(79," Portugal "),e.qZA(),e.TgZ(80,"td"),e._uU(81," Gloucester "),e.qZA(),e.TgZ(82,"td",9),e._uU(83," $98,615 "),e.qZA()()()()()()()(),e.TgZ(84,"div",1)(85,"div",10)(86,"div",3)(87,"h4",4),e._uU(88," Table on Plain Background"),e.qZA(),e.TgZ(89,"p",11),e._uU(90," Here is a subtitle for this table"),e.qZA()(),e.TgZ(91,"div",5)(92,"div",6)(93,"table",7)(94,"thead",8)(95,"th"),e._uU(96," Name "),e.qZA(),e.TgZ(97,"th"),e._uU(98," Country "),e.qZA(),e.TgZ(99,"th"),e._uU(100," City "),e.qZA(),e.TgZ(101,"th",9),e._uU(102," Salary "),e.qZA()(),e.TgZ(103,"tbody")(104,"tr")(105,"td"),e._uU(106," Dakota Rice "),e.qZA(),e.TgZ(107,"td"),e._uU(108," Niger "),e.qZA(),e.TgZ(109,"td"),e._uU(110," Oud-Turnhout "),e.qZA(),e.TgZ(111,"td",9),e._uU(112," $36,738 "),e.qZA()(),e.TgZ(113,"tr")(114,"td"),e._uU(115," Minerva Hooper "),e.qZA(),e.TgZ(116,"td"),e._uU(117," Cura\xe7ao "),e.qZA(),e.TgZ(118,"td"),e._uU(119," Sinaai-Waas "),e.qZA(),e.TgZ(120,"td",9),e._uU(121," $23,789 "),e.qZA()(),e.TgZ(122,"tr")(123,"td"),e._uU(124," Sage Rodriguez "),e.qZA(),e.TgZ(125,"td"),e._uU(126," Netherlands "),e.qZA(),e.TgZ(127,"td"),e._uU(128," Baileux "),e.qZA(),e.TgZ(129,"td",9),e._uU(130," $56,142 "),e.qZA()(),e.TgZ(131,"tr")(132,"td"),e._uU(133," Philip Chaney "),e.qZA(),e.TgZ(134,"td"),e._uU(135," Korea, South "),e.qZA(),e.TgZ(136,"td"),e._uU(137," Overland Park "),e.qZA(),e.TgZ(138,"td",9),e._uU(139," $38,735 "),e.qZA()(),e.TgZ(140,"tr")(141,"td"),e._uU(142," Doris Greene "),e.qZA(),e.TgZ(143,"td"),e._uU(144," Malawi "),e.qZA(),e.TgZ(145,"td"),e._uU(146," Feldkirchen in K\xe4rnten "),e.qZA(),e.TgZ(147,"td",9),e._uU(148," $63,542 "),e.qZA()(),e.TgZ(149,"tr")(150,"td"),e._uU(151," Mason Porter "),e.qZA(),e.TgZ(152,"td"),e._uU(153," Chile "),e.qZA(),e.TgZ(154,"td"),e._uU(155," Gloucester "),e.qZA(),e.TgZ(156,"td",9),e._uU(157," $78,615 "),e.qZA()(),e.TgZ(158,"tr")(159,"td"),e._uU(160," Jon Porter "),e.qZA(),e.TgZ(161,"td"),e._uU(162," Portugal "),e.qZA(),e.TgZ(163,"td"),e._uU(164," Gloucester "),e.qZA(),e.TgZ(165,"td",9),e._uU(166," $98,615 "),e.qZA()()()()()()()()())}}),r}(),u=a(655),f=a(2040),O=a(4350),T=a(2114),A=a(7807),U=a(680);function b(r,n){if(1&r){var t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);var i=e.oxw().$implicit,d=e.oxw();return e.KtG(d.changeOrderStatus(i.key,"Verified"))}),e._uU(1,"Mark as Verified"),e.qZA()}}function q(r,n){if(1&r){var t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);var i=e.oxw().$implicit,d=e.oxw();return e.KtG(d.changeOrderStatus(i.key,"Dispatched"))}),e._uU(1,"Mark as Dispatched"),e.qZA()}}function C(r,n){if(1&r){var t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);var i=e.oxw().$implicit,d=e.oxw();return e.KtG(d.changeOrderStatus(i.key,"Delivered"))}),e._uU(1,"Mark as Delivered"),e.qZA()}}function y(r,n){if(1&r){var t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(t);var i=e.oxw().$implicit,d=e.oxw();return e.KtG(d.changeOrderStatus(i.key,"Completed"))}),e._uU(1,"Mark as Completed"),e.qZA()}}function S(r,n){if(1&r&&(e.TgZ(0,"tr",13)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&r){var t=n.$implicit,o=e.oxw(2);e.xp6(2),e.Oqu(o.getProductName(t.productId)),e.xp6(2),e.Oqu(t.price),e.xp6(2),e.Oqu(t.quantity)}}function k(r,n){if(1&r&&(e.TgZ(0,"div",3)(1,"div",4),e._UZ(2,"div"),e.TgZ(3,"h6",5),e._uU(4),e.qZA(),e.TgZ(5,"h6",5),e._uU(6),e.qZA(),e.TgZ(7,"h6"),e._uU(8),e.qZA(),e.YNc(9,b,2,0,"button",6),e.YNc(10,q,2,0,"button",6),e.YNc(11,C,2,0,"button",6),e.YNc(12,y,2,0,"button",6),e.qZA(),e.TgZ(13,"div",7)(14,"div",8)(15,"table",9)(16,"thead",10)(17,"th"),e._uU(18,"Product"),e.qZA(),e.TgZ(19,"th"),e._uU(20,"Price"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Quantity"),e.qZA()(),e.TgZ(23,"tbody"),e.YNc(24,S,7,3,"tr",11),e.qZA()()()()()),2&r){var t=n.$implicit,o=e.oxw();e.xp6(4),e.lnq("",o.getOrderStatus(t.key)," Order ID: ",t.key," Order Date: ",o.getOrderDate(t.key)," "),e.xp6(2),e.hij(" Customer : ",o.getCustomerName(t.key)," "),e.xp6(2),e.hij("order.order_status:",o.getOrderStatus(t.key),""),e.xp6(1),e.Q6J("ngIf","PAID"==o.getOrderStatus(t.key)),e.xp6(1),e.Q6J("ngIf","Verified"==o.getOrderStatus(t.key)),e.xp6(1),e.Q6J("ngIf","Dispatched"==o.getOrderStatus(t.key)),e.xp6(1),e.Q6J("ngIf","Delivered"==o.getOrderStatus(t.key)),e.xp6(12),e.Q6J("ngForOf",t.items)}}var Z=function(){function r(n,t,o,i,d,l){var c=this;this.datePipe=n,this.route=t,this.servOrder=o,this.servProduct=i,this.servAuth=d,this.servUser=l,this.products=[],this.customers=[],this.orders=[],this.page=1,this.loading=!1,this.servAuth.currentUser.subscribe(function(s){return c.currentUser=s}),this.selectedOrderStatus=this.route.snapshot.data.selectedOrderStatus}return r.prototype.ngOnInit=function(){return(0,u.mG)(this,void 0,void 0,function(){return(0,u.Jh)(this,function(n){switch(n.label){case 0:return[4,this.loadOrdersByStatus()];case 1:return n.sent(),this.addScrollListener(),[2]}})})},r.prototype.addScrollListener=function(){window.addEventListener("scroll",this.handleScroll.bind(this))},r.prototype.handleScroll=function(){var n=window.innerHeight,t=document.documentElement.offsetHeight,o=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;o+n>=t?(this.page++,this.loadPage(this.page)):0===o&&this.page>1&&(this.page--,this.loadPage(this.page),this.loading=!0)},r.prototype.loadPage=function(n){return(0,u.mG)(this,void 0,void 0,function(){var t;return(0,u.Jh)(this,function(o){switch(o.label){case 0:return this.loading=!0,[4,this.loadOrdersByStatus_Pagewise(n)];case 1:return t=o.sent(),this.orders=(0,u.ev)((0,u.ev)([],(0,u.CR)(this.orders),!1),(0,u.CR)(t),!1),[2]}})})},r.prototype.getCustomerName=function(n){var o=this.orders.find(function(d){return d.orderId===n})?.userId;return this.customers.find(function(d){return d.id===o})?.display_name||""},r.prototype.getOrderDate=function(n){var t=this.orders.find(function(i){return i.orderId===n});return this.datePipe.transform(new Date(t?.orderdate),"dd-MMM-yyyy")||""},r.prototype.getOrderStatus=function(n){return this.orders.find(function(o){return o.orderId===n})?.order_status||""},r.prototype.changeOrderStatus=function(n,t){this.servOrder.serOrderStatus(n,t)},r.prototype.getProductName=function(n){return this.products.find(function(o){return o.id===n})?.product_name||""},r.prototype.loadOrdersByStatus=function(){var n=this;return new Promise(function(t,o){n.servOrder.getOrdersByStatus(n.currentUser.id,n.selectedOrderStatus).subscribe(function(i){console.log(" orders:"+JSON.stringify(i)),n.orders=i,n.ExtractProductIdsCustomerIdsForProductCustomerList(),t(!0)})})},r.prototype.loadOrdersByStatus_Pagewise=function(n){var t=this;return new Promise(function(o,i){t.servOrder.getOrdersByStatus_Pagewise(2,t.selectedOrderStatus,n,2).subscribe(function(d){console.log(" orders:"+JSON.stringify(d)),t.loading=!1,t.ExtractProductIdsCustomerIdsForProductCustomerList(),o(d)})})},r.prototype.ExtractProductIdsCustomerIdsForProductCustomerList=function(){var t,o,n=this,i="",d="";this.orders.forEach(function(s){i+=s.productId+",",d+=s.userId+","}),console.log("productIdList_CommaDelimited:"+i),localStorage.setItem("productIdList_CommaDelimited",i),localStorage.setItem("customerIdList_CommaDelimited",d);var l=null===(t=localStorage.getItem("productIdList_CommaDelimited"))||void 0===t?void 0:t.toString();this.servProduct.getProductByIds(l).subscribe(function(s){n.products=s,console.log("products by ids:"+l)});var c=null===(o=localStorage.getItem("customerIdList_CommaDelimited"))||void 0===o?void 0:o.toString();console.log("userIds:"+c),this.servUser.getUsers(c).subscribe(function(s){n.customers=s,console.log("Customers by ids:"+JSON.stringify(c))})},r.prototype.loadOrdersByStatus_notinuse=function(){var t,o,n=this;this.servOrder.getOrdersByStatus(2,this.selectedOrderStatus).subscribe(function(s){console.log(" orders:"+JSON.stringify(s)),n.orders=s},function(s){console.error("Error fetching orders:",s)}),console.log("bbbbbbbbbbbbbbbbbbbbb");var i="",d="";this.orders.forEach(function(s){i+=s.productId+",",d+=s.userId+","}),console.log("productIdList_CommaDelimited:"+i),localStorage.setItem("productIdList_CommaDelimited",i),localStorage.setItem("customerIdList_CommaDelimited",d);var l=null===(t=localStorage.getItem("productIdList_CommaDelimited"))||void 0===t?void 0:t.toString();this.servProduct.getProductByIds(l).subscribe(function(s){n.products=s,console.log("products by ids:"+JSON.stringify(n.products))});var c=null===(o=localStorage.getItem("customerIdList_CommaDelimited"))||void 0===o?void 0:o.toString();console.log("userIds:"+c),this.servUser.getUsers(c).subscribe(function(s){n.customers=s,console.log("Customers by ids:"+JSON.stringify(n.customers))})},r.\u0275fac=function(t){return new(t||r)(e.Y36(g.uU),e.Y36(p.gz),e.Y36(f.p),e.Y36(O.M),e.Y36(T.$),e.Y36(A.K))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-orders-generic"]],inputs:{selectedOrderStatus:"selectedOrderStatus"},decls:4,vars:4,consts:[[1,"row"],[1,"col-12"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-header"],[1,"card-title"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped"],[1,"text-primary"],["style","height: 5px;",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-danger",3,"click"],[2,"height","5px"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,k,25,10,"div",2),e.ALo(3,"groupBy"),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngForOf",e.xi3(3,1,o.orders,"orderId")))},dependencies:[g.sg,g.O5,U.l]}),r}(),I=[{path:"",component:v,children:[{path:"",redirectTo:"Paid-Orders",pathMatch:"full"},{path:"New-Orders",component:_},{path:"Paid-Orders",component:Z,data:{selectedOrderStatus:"PAID"}},{path:"Verified-Orders",component:Z,data:{selectedOrderStatus:"Verified"}},{path:"Dispatched-Orders",component:Z,data:{selectedOrderStatus:"Dispatched"}},{path:"Delievered-Orders",component:Z,data:{selectedOrderStatus:"Delivered"}},{path:"Complete-Orders",component:Z,data:{selectedOrderStatus:"Completed"}}]}],P=function(){function r(){}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[p.Bz.forChild(I),p.Bz]}),r}(),M=a(1633),D=function(){function r(){}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[g.ez,P,M.m]}),r}()}}]);