"use strict";(self.webpackChunkEshop=self.webpackChunkEshop||[]).push([[509],{4509:(F,h,s)=>{s.r(h),s.d(h,{ManageOrdersModule:()=>J});var l=s(6895),g=s(7716),t=s(4650),v=function(r){return{active:r}},_=function(){function r(){this.selectedOption="Paid-Orders"}return r.prototype.selectOption=function(o){this.selectedOption=o},r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-manage-orders"]],decls:18,vars:12,consts:[[1,"row"],[1,"col-12"],[1,"navbar","navbar-light","bg-light"],[1,"container-fluid"],[1,"nav","d-flex"],[1,"nav-item",3,"ngClass"],["routerLink","Paid-Orders","href","#",1,"nav-link",3,"click"],["routerLink","Verified-Orders","href","#",1,"nav-link",3,"click"],["routerLink","Delievered-Orders","href","#",1,"nav-link",3,"click"],["routerLink","Complete-Orders","href","#",1,"nav-link",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),t.NdJ("click",function(){return n.selectOption("Paid-Orders")}),t._uU(7," Paid "),t.qZA()(),t.TgZ(8,"li",5)(9,"a",7),t.NdJ("click",function(){return n.selectOption("Verified-Orders")}),t._uU(10," Verified "),t.qZA()(),t.TgZ(11,"li",5)(12,"a",8),t.NdJ("click",function(){return n.selectOption("Delievered-Orders")}),t._uU(13," Delievered "),t.qZA()(),t.TgZ(14,"li",5)(15,"a",9),t.NdJ("click",function(){return n.selectOption("Completed-Orders")}),t._uU(16," Completed "),t.qZA()()()()(),t._UZ(17,"router-outlet"),t.qZA()()),2&e&&(t.xp6(5),t.Q6J("ngClass",t.VKq(4,v,"Paid-Orders"===n.selectedOption)),t.xp6(3),t.Q6J("ngClass",t.VKq(6,v,"Verified-Orders"===n.selectedOption)),t.xp6(3),t.Q6J("ngClass",t.VKq(8,v,"Delievered-Orders"===n.selectedOption)),t.xp6(3),t.Q6J("ngClass",t.VKq(10,v,"Completed-Orders"===n.selectedOption)))},dependencies:[l.mk,g.lC,g.rH],styles:[".nav[_ngcontent-%COMP%]{background-color:#c6a06e;border-radius:7px;height:35px}.nav-link[_ngcontent-%COMP%]{font-size:10px}.active[_ngcontent-%COMP%]{background-color:#000;border:1px solid white;color:#fff;border-radius:7px;height:35px}"]}),r}(),O=function(){function r(){}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-new-orders"]],decls:167,vars:0,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"card-body"],[1,"table-responsive"],[1,"table"],[1,"text-primary"],[1,"text-right"],[1,"card","card-plain"],[1,"card-category"]],template:function(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"new-orders works!"),t.qZA(),t.TgZ(2,"div",0)(3,"div",1)(4,"div",2)(5,"div",3)(6,"h5",4),t._uU(7," Simple Table"),t.qZA()(),t.TgZ(8,"div",5)(9,"div",6)(10,"table",7)(11,"thead",8)(12,"th"),t._uU(13," Name "),t.qZA(),t.TgZ(14,"th"),t._uU(15," Country "),t.qZA(),t.TgZ(16,"th"),t._uU(17," City "),t.qZA(),t.TgZ(18,"th",9),t._uU(19," Salary "),t.qZA()(),t.TgZ(20,"tbody")(21,"tr")(22,"td"),t._uU(23," Dakota Rice "),t.qZA(),t.TgZ(24,"td"),t._uU(25," Niger "),t.qZA(),t.TgZ(26,"td"),t._uU(27," Oud-Turnhout "),t.qZA(),t.TgZ(28,"td",9),t._uU(29," $36,738 "),t.qZA()(),t.TgZ(30,"tr")(31,"td"),t._uU(32," Minerva Hooper "),t.qZA(),t.TgZ(33,"td"),t._uU(34," Cura\xe7ao "),t.qZA(),t.TgZ(35,"td"),t._uU(36," Sinaai-Waas "),t.qZA(),t.TgZ(37,"td",9),t._uU(38," $23,789 "),t.qZA()(),t.TgZ(39,"tr")(40,"td"),t._uU(41," Sage Rodriguez "),t.qZA(),t.TgZ(42,"td"),t._uU(43," Netherlands "),t.qZA(),t.TgZ(44,"td"),t._uU(45," Baileux "),t.qZA(),t.TgZ(46,"td",9),t._uU(47," $56,142 "),t.qZA()(),t.TgZ(48,"tr")(49,"td"),t._uU(50," Philip Chaney "),t.qZA(),t.TgZ(51,"td"),t._uU(52," Korea, South "),t.qZA(),t.TgZ(53,"td"),t._uU(54," Overland Park "),t.qZA(),t.TgZ(55,"td",9),t._uU(56," $38,735 "),t.qZA()(),t.TgZ(57,"tr")(58,"td"),t._uU(59," Doris Greene "),t.qZA(),t.TgZ(60,"td"),t._uU(61," Malawi "),t.qZA(),t.TgZ(62,"td"),t._uU(63," Feldkirchen in K\xe4rnten "),t.qZA(),t.TgZ(64,"td",9),t._uU(65," $63,542 "),t.qZA()(),t.TgZ(66,"tr")(67,"td"),t._uU(68," Mason Porter "),t.qZA(),t.TgZ(69,"td"),t._uU(70," Chile "),t.qZA(),t.TgZ(71,"td"),t._uU(72," Gloucester "),t.qZA(),t.TgZ(73,"td",9),t._uU(74," $78,615 "),t.qZA()(),t.TgZ(75,"tr")(76,"td"),t._uU(77," Jon Porter "),t.qZA(),t.TgZ(78,"td"),t._uU(79," Portugal "),t.qZA(),t.TgZ(80,"td"),t._uU(81," Gloucester "),t.qZA(),t.TgZ(82,"td",9),t._uU(83," $98,615 "),t.qZA()()()()()()()(),t.TgZ(84,"div",1)(85,"div",10)(86,"div",3)(87,"h4",4),t._uU(88," Table on Plain Background"),t.qZA(),t.TgZ(89,"p",11),t._uU(90," Here is a subtitle for this table"),t.qZA()(),t.TgZ(91,"div",5)(92,"div",6)(93,"table",7)(94,"thead",8)(95,"th"),t._uU(96," Name "),t.qZA(),t.TgZ(97,"th"),t._uU(98," Country "),t.qZA(),t.TgZ(99,"th"),t._uU(100," City "),t.qZA(),t.TgZ(101,"th",9),t._uU(102," Salary "),t.qZA()(),t.TgZ(103,"tbody")(104,"tr")(105,"td"),t._uU(106," Dakota Rice "),t.qZA(),t.TgZ(107,"td"),t._uU(108," Niger "),t.qZA(),t.TgZ(109,"td"),t._uU(110," Oud-Turnhout "),t.qZA(),t.TgZ(111,"td",9),t._uU(112," $36,738 "),t.qZA()(),t.TgZ(113,"tr")(114,"td"),t._uU(115," Minerva Hooper "),t.qZA(),t.TgZ(116,"td"),t._uU(117," Cura\xe7ao "),t.qZA(),t.TgZ(118,"td"),t._uU(119," Sinaai-Waas "),t.qZA(),t.TgZ(120,"td",9),t._uU(121," $23,789 "),t.qZA()(),t.TgZ(122,"tr")(123,"td"),t._uU(124," Sage Rodriguez "),t.qZA(),t.TgZ(125,"td"),t._uU(126," Netherlands "),t.qZA(),t.TgZ(127,"td"),t._uU(128," Baileux "),t.qZA(),t.TgZ(129,"td",9),t._uU(130," $56,142 "),t.qZA()(),t.TgZ(131,"tr")(132,"td"),t._uU(133," Philip Chaney "),t.qZA(),t.TgZ(134,"td"),t._uU(135," Korea, South "),t.qZA(),t.TgZ(136,"td"),t._uU(137," Overland Park "),t.qZA(),t.TgZ(138,"td",9),t._uU(139," $38,735 "),t.qZA()(),t.TgZ(140,"tr")(141,"td"),t._uU(142," Doris Greene "),t.qZA(),t.TgZ(143,"td"),t._uU(144," Malawi "),t.qZA(),t.TgZ(145,"td"),t._uU(146," Feldkirchen in K\xe4rnten "),t.qZA(),t.TgZ(147,"td",9),t._uU(148," $63,542 "),t.qZA()(),t.TgZ(149,"tr")(150,"td"),t._uU(151," Mason Porter "),t.qZA(),t.TgZ(152,"td"),t._uU(153," Chile "),t.qZA(),t.TgZ(154,"td"),t._uU(155," Gloucester "),t.qZA(),t.TgZ(156,"td",9),t._uU(157," $78,615 "),t.qZA()(),t.TgZ(158,"tr")(159,"td"),t._uU(160," Jon Porter "),t.qZA(),t.TgZ(161,"td"),t._uU(162," Portugal "),t.qZA(),t.TgZ(163,"td"),t._uU(164," Gloucester "),t.qZA(),t.TgZ(165,"td",9),t._uU(166," $98,615 "),t.qZA()()()()()()()()())}}),r}(),a=s(655),T=s(2040),U=s(4350),A=s(2114),q=s(7807),C=s(6121),y=s(6493),b=s(4704),S=s(680);function P(r,o){if(1&r){var e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);var i=t.oxw().$implicit,d=t.oxw();return t.KtG(d.changeOrderStatus(i.key,"Verified"))}),t._uU(1,"Mark as Verified"),t.qZA()}}function M(r,o){if(1&r){var e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);var i=t.oxw().$implicit,d=t.oxw();return t.KtG(d.changeOrderStatus(i.key,"Delievered"))}),t._uU(1,"Mark as Delievered"),t.qZA()}}function k(r,o){if(1&r){var e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);var i=t.oxw().$implicit,d=t.oxw();return t.KtG(d.changeOrderStatus(i.key,"Completed"))}),t._uU(1,"Mark as Completed"),t.qZA()}}function I(r,o){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&r){var e=t.oxw().$implicit,n=t.oxw(2);t.xp6(1),t.hij(" /",n.servCommon.GetDisplayNameByKey(n.unit_master,"id",n.getProduct_Unit(e.productId),"unit_name"),"")}}function x(r,o){if(1&r&&(t.TgZ(0,"tr",15)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.YNc(5,I,2,1,"span",16),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA()()),2&r){var e=o.$implicit,n=t.oxw(2);t.xp6(2),t.Oqu(n.getProductName(e.productId)),t.xp6(2),t.Oqu(e.price),t.xp6(1),t.Q6J("ngIf","1"!==n.getProduct_Unit(e.productId)),t.xp6(2),t.Oqu(e.quantity)}}function w(r,o){if(1&r&&(t.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"span",6),t._uU(4,"Order #:"),t.TgZ(5,"span",7),t._uU(6),t.qZA()(),t._uU(7),t.qZA(),t.YNc(8,P,2,0,"button",8),t.YNc(9,M,2,0,"button",8),t.YNc(10,k,2,0,"button",8),t.qZA(),t.TgZ(11,"div",9)(12,"div",10)(13,"table",11)(14,"thead",12)(15,"th"),t._uU(16,"Product"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Price"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Quantity"),t.qZA()(),t.TgZ(21,"tbody"),t.YNc(22,x,8,4,"tr",13),t.qZA()()()()()),2&r){var e=o.$implicit,n=t.oxw();t.xp6(6),t.hij(" ",e.key,""),t.xp6(1),t.AsE(" Order Date: ",n.getOrderDate(e.key)," Consumer : ",n.getCustomerName(e.key)," "),t.xp6(1),t.Q6J("ngIf","PAID"==n.getOrderStatus(e.key)),t.xp6(1),t.Q6J("ngIf","Verified"==n.getOrderStatus(e.key)),t.xp6(1),t.Q6J("ngIf","Delievered"==n.getOrderStatus(e.key)),t.xp6(12),t.Q6J("ngForOf",e.items)}}var p=function(){function r(o,e,n,i,d,c,Z,u,$){var f=this;this.datePipe=o,this.route=e,this.servOrder=n,this.servProduct=i,this.servAuth=d,this.servUser=c,this.servUnitmgt=Z,this.servCommon=u,this.notify=$,this.products=[],this.customers=[],this.orders=[],this.page=1,this.loading=!1,this.servAuth.currentUser.subscribe(function(m){return f.currentUser=m}),this.selectedOrderStatus=this.route.snapshot.data.selectedOrderStatus,this.servUnitmgt.getUnitMaster().subscribe(function(m){f.unit_master=m})}return r.prototype.ngOnInit=function(){return(0,a.mG)(this,void 0,void 0,function(){return(0,a.Jh)(this,function(o){switch(o.label){case 0:return[4,this.loadOrdersByStatus()];case 1:return o.sent(),this.addScrollListener(),[2]}})})},r.prototype.addScrollListener=function(){window.addEventListener("scroll",this.handleScroll.bind(this))},r.prototype.handleScroll=function(){var o=window.innerHeight,e=document.documentElement.offsetHeight,n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;n+o>=e?(this.page++,this.loadPage(this.page)):0===n&&this.page>1&&(this.page--,this.loadPage(this.page),this.loading=!0)},r.prototype.loadPage=function(o){return(0,a.mG)(this,void 0,void 0,function(){var e;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return this.loading=!0,[4,this.loadOrdersByStatus_Pagewise(o)];case 1:return e=n.sent(),this.orders=(0,a.ev)((0,a.ev)([],(0,a.CR)(this.orders),!1),(0,a.CR)(e),!1),[2]}})})},r.prototype.getCustomerName=function(o){var n=this.orders.find(function(d){return d.orderId===o})?.userId;return this.customers.find(function(d){return d.id===n})?.display_name||""},r.prototype.getOrderDate=function(o){var e=this.orders.find(function(i){return i.orderId===o});return this.datePipe.transform(new Date(e?.orderdate),"dd-MMM-yyyy")||""},r.prototype.getOrderStatus=function(o){return this.orders.find(function(n){return n.orderId===o})?.order_status||""},r.prototype.changeOrderStatus=function(o,e){return(0,a.mG)(this,void 0,void 0,function(){return(0,a.Jh)(this,function(n){return this.servOrder.serOrderStatus(o,e),this.notify.showInfo("Order status changed to "+e,"Order Status"),[2]})})},r.prototype.getProductName=function(o){return this.products.find(function(n){return n.id===o})?.product_name||""},r.prototype.getProduct_Unit=function(o){return this.products.find(function(n){return n.id===o})?.unit_id||""},r.prototype.loadOrdersByStatus=function(){var o=this;return new Promise(function(e,n){o.servOrder.getOrdersByStatus(o.currentUser.id,o.selectedOrderStatus).subscribe(function(i){console.log(" orders:"+JSON.stringify(i)),o.orders=i,o.ExtractProductIdsCustomerIdsForProductCustomerList(),e(!0)})})},r.prototype.loadOrdersByStatus_Pagewise=function(o){var e=this;return new Promise(function(n,i){e.servOrder.getOrdersByStatus_Pagewise(2,e.selectedOrderStatus,o,2).subscribe(function(d){console.log(" orders:"+JSON.stringify(d)),e.loading=!1,e.ExtractProductIdsCustomerIdsForProductCustomerList(),n(d)})})},r.prototype.ExtractProductIdsCustomerIdsForProductCustomerList=function(){var e,n,o=this,i="",d="";this.orders.forEach(function(u){i+=u.productId+",",d+=u.userId+","}),console.log("productIdList_CommaDelimited:"+i),localStorage.setItem("productIdList_CommaDelimited",i),localStorage.setItem("customerIdList_CommaDelimited",d);var c=null===(e=localStorage.getItem("productIdList_CommaDelimited"))||void 0===e?void 0:e.toString();c?.length&&this.servProduct.getProductByIds(c).subscribe(function(u){o.products=u,console.log("products by ids:"+c)});var Z=null===(n=localStorage.getItem("customerIdList_CommaDelimited"))||void 0===n?void 0:n.toString();console.log("userIds:"+Z),this.servUser.getUsers(Z).subscribe(function(u){o.customers=u,console.log("Customers by ids:"+JSON.stringify(Z))})},r.\u0275fac=function(e){return new(e||r)(t.Y36(l.uU),t.Y36(g.gz),t.Y36(T.p),t.Y36(U.M),t.Y36(A.$),t.Y36(q.K),t.Y36(C.G),t.Y36(y.v),t.Y36(b.g))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-orders-generic"]],inputs:{selectedOrderStatus:"selectedOrderStatus"},decls:4,vars:4,consts:[[1,"row"],[1,"col-12"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-header"],[2,"font-size",".9em"],[2,"font-weight","bold"],[2,"color","red"],["class","btn btn-sm btn-danger",3,"click",4,"ngIf"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped"],[1,"text-primary"],["style","height: 5px;",4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-danger",3,"click"],[2,"height","5px"],[4,"ngIf"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,w,23,7,"div",2),t.ALo(3,"groupBy"),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngForOf",t.xi3(3,1,n.orders,"orderId")))},dependencies:[l.sg,l.O5,S.l]}),r}(),N=[{path:"",component:_,children:[{path:"",redirectTo:"Paid-Orders",pathMatch:"full"},{path:"New-Orders",component:O},{path:"Paid-Orders",component:p,data:{selectedOrderStatus:"PAID"}},{path:"Verified-Orders",component:p,data:{selectedOrderStatus:"Verified"}},{path:"Dispatched-Orders",component:p,data:{selectedOrderStatus:"Dispatched"}},{path:"Delievered-Orders",component:p,data:{selectedOrderStatus:"Delievered"}},{path:"Complete-Orders",component:p,data:{selectedOrderStatus:"Completed"}}]}],D=function(){function r(){}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[g.Bz.forChild(N),g.Bz]}),r}(),G=s(1633),J=function(){function r(){}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[l.ez,D,G.m]}),r}()}}]);