"use strict";(self.webpackChunkEshop=self.webpackChunkEshop||[]).push([[865],{865:(dt,Z,c)=>{c.r(Z),c.d(Z,{ManagePromotionsModule:()=>nt});var m=c(6895),_=c(7716),t=c(4650),D=function(e){return{active:e}},O=function(){function e(){this.selectedOption="Product-Promotions"}return e.prototype.selectOption=function(o){this.selectedOption=o},e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-manage-promotions"]],decls:10,vars:6,consts:[[1,"navbar","navbar-light","bg-light"],[1,"container-fluid"],[1,"nav","d-flex"],[1,"nav-item",3,"ngClass"],["routerLink","Product-Promotions","href","#",1,"nav-link",3,"click"],["routerLink","Order-Promotions","href","#",1,"nav-link",3,"click"]],template:function(r,i){1&r&&(t.TgZ(0,"nav",0)(1,"div",1)(2,"ul",2)(3,"li",3)(4,"a",4),t.NdJ("click",function(){return i.selectOption("Product-Promotions")}),t._uU(5," Product Promotions"),t.qZA()(),t.TgZ(6,"li",3)(7,"a",5),t.NdJ("click",function(){return i.selectOption("Order-Promotions")}),t._uU(8," Order Promotions"),t.qZA()()()()(),t._UZ(9,"router-outlet")),2&r&&(t.xp6(3),t.Q6J("ngClass",t.VKq(2,D,"Product-Promotions"===i.selectedOption)),t.xp6(3),t.Q6J("ngClass",t.VKq(4,D,"Order-Promotions"===i.selectedOption)))},dependencies:[m.mk,_.lC,_.rH],styles:[".nav[_ngcontent-%COMP%]{background-color:#c6a06e;border-radius:7px;height:35px}.active[_ngcontent-%COMP%]{background-color:#000;border:1px solid white;color:#fff;border-radius:7px;height:35px}"]}),e}(),k=c(8929),q=c(6493),f=c(2011),h=c(4350),g=c(6532),v=c(2114),N=c(7807);function M(e,o){if(1&e){var r=t.EpF();t.TgZ(0,"tr",8)(1,"td",9)(2,"button",0),t.NdJ("click",function(){var a=t.CHM(r).$implicit,u=t.oxw();return t.KtG(u.editProduct(a))}),t._UZ(3,"img",10),t.qZA()(),t.TgZ(4,"td",11),t._uU(5),t.qZA()()}if(2&e){var i=o.$implicit;t.xp6(5),t.Oqu(i.promotionName)}}var J=function(){function e(o,r,i,d,s,a){this.servCommon=o,this.servCategory=r,this.servProduct=i,this.servPromoProduct=d,this.authServ=s,this.servUser=a,this.promoproduct_id_for_Addedit=new t.vpe,this.product_id_for_Detail=new t.vpe,this.product_id_Selected=new t.vpe,this.categoryList=[],this.sellerList=[]}return e.prototype.ngOnInit=function(){var o=this;this.getProductList(),this.get_order_promotions(),this.getSellerList(),this.getCategories(),this.eventsSubscription=this.events.subscribe(function(){return o.get_order_promotions()})},e.prototype.getCategories=function(){var o=this;this.servCategory.getCategorys().subscribe(function(r){o.categoryList=r})},e.prototype.getSellerList=function(){var o=this;this.servUser.getUsers_Of_role("Seller").subscribe(function(r){o.sellerList=r})},e.prototype.ngOnDestroy=function(){this.eventsSubscription.unsubscribe()},e.prototype.addProduct=function(){this.promoproduct_id_for_Addedit.emit(0)},e.prototype.editProduct=function(o){this.product_id_for_Detail.emit(void 0),this.promoproduct_id_for_Addedit.emit(o.id)},e.prototype.selectProduct=function(o){this.promoproduct_id_for_Addedit.emit(void 0),this.product_id_for_Detail.emit(o.id)},e.prototype.getProductList=function(){var o=this;this.servProduct.getProducts_All().subscribe(function(r){o.products=r})},e.prototype.get_order_promotions=function(){var o=this;this.servPromoProduct.get_Promotion_Order_Seller(this.authServ.currentUserValue.id).subscribe(function(r){o.promotions_product=r})},e.\u0275fac=function(r){return new(r||e)(t.Y36(q.v),t.Y36(f.H),t.Y36(h.M),t.Y36(g.q),t.Y36(v.$),t.Y36(N.K))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-display-order-promotion"]],inputs:{events:"events"},outputs:{promoproduct_id_for_Addedit:"promoproduct_id_for_Addedit",product_id_for_Detail:"product_id_for_Detail",product_id_Selected:"product_id_Selected"},decls:11,vars:1,consts:[[1,"btn","btn-danger","btn-sm",2,"padding","0",3,"click"],["src","/assets/icon/add.png","alt","Edit",1,"btn-icon",2,"height","40px"],[1,"card"],[1,"card-body"],[1,"table","table-striped"],[1,"text-primary"],["scope","col"],["style","height: 5px;",4,"ngFor","ngForOf"],[2,"height","5px"],[2,"width","60px"],["width","30px","src","/assets/icon/Edit.png","alt","Edit",1,"btn-icon",2,"height","30px"],[2,"width","auto","height","5px"]],template:function(r,i){1&r&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return i.addProduct()}),t._UZ(1,"img",1),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead",5),t._UZ(6,"th",6),t.TgZ(7,"th"),t._uU(8,"Promotion"),t.qZA()(),t.TgZ(9,"tbody"),t.YNc(10,M,6,1,"tr",7),t.qZA()()()()),2&r&&(t.xp6(10),t.Q6J("ngForOf",i.promotions_product))},dependencies:[m.sg]}),e}(),P=c(655),n=c(4006),U=c(6776),F=c(4704),l=c(460);function Y(e,o){if(1&e&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&e){var r=o.$implicit;t.Q6J("value",r.promotionType),t.xp6(1),t.Oqu(r.promotionType)}}function x(e,o){1&e&&(t.TgZ(0,"span",21),t._uU(1," promoType not provided. "),t.qZA())}function E(e,o){1&e&&(t.TgZ(0,"div",3)(1,"div",17)(2,"div",5)(3,"label",22),t._uU(4,"discountPercentage"),t.qZA(),t._UZ(5,"input",23),t.qZA()(),t.TgZ(6,"div",17)(7,"div",5)(8,"label",24),t._uU(9,"discountAmount"),t.qZA(),t._UZ(10,"input",25),t.qZA()(),t.TgZ(11,"div",17)(12,"div",5)(13,"label",26),t._uU(14,"minOrderAmount"),t.qZA(),t._UZ(15,"input",27),t.qZA()()())}var w=function(){function e(o,r,i,d,s,a,u,p){this.formBuilder=o,this.servProduct=r,this.servCategory=i,this.servPromotion=d,this.authServ=s,this.injector=a,this.datePipe=u,this.notify=p,this.timepickerConfig=function I(){return Object.assign(new U.Sm,{timeFormat:"hh:mm A",showMeridian:!0,containerClass:"theme-default",hourStep:1,minuteStep:15,readonlyInput:!1,mousewheel:!0,arrowkeys:!0})}(),this.formSaved=new t.vpe,this.addedit_OPmode="",this.defaultDate="1987-06-30",this.isSubmitted=!1,this.isSubmitted_uploadform=!1,this.PromotionTypeList=[],this.ProductList=[],this.submitClicked="",this.bsConfig={dateInputFormat:"DD/MM/YYYY HH:mm:ss",containerClass:"theme-default"}}return e.prototype.ngAfterViewInit=function(){this.getPromotionMaster(),this.getProductList()},e.prototype.getPromotionMaster=function(){var o=this;this.servPromotion.getPromotionMast().subscribe(function(r){o.PromotionTypeList=r})},e.prototype.getProductList=function(){var o=this,r="";null!=this.authServ.currentUserValue.id&&(r=this.authServ.currentUserValue.id),this.servProduct.getProducts_Ofseller(r).subscribe(function(i){o.ProductList=i})},e.prototype.ngOnInit=function(){this.myForm=this.formBuilder.group({id:[],seller_id:["",n.kI.required],promoType:["",n.kI.required],promotionName:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(50)]],discountAmount:["",[n.kI.min(10),n.kI.max(9999)]],discountPercentage:["",[n.kI.min(1),n.kI.max(90)]],minOrderAmount:["",[n.kI.required,n.kI.min(100)]],startDate:["",n.kI.required],endDate:["",n.kI.required]})},e.prototype.formatDate=function(o){var r=o.getDate(),i=o.getMonth()+1,d=o.getFullYear(),s=o.getHours(),a=o.getMinutes(),u=o.getSeconds(),p=r<10?"0".concat(r):"".concat(r),y=i<10?"0".concat(i):"".concat(i),b="".concat(d),C=s<10?"0".concat(s):"".concat(s),S=a<10?"0".concat(a):"".concat(a),A=u<10?"0".concat(u):"".concat(u);return"".concat(p,"/").concat(y,"/").concat(b," ").concat(C,":").concat(S,":").concat(A)},e.prototype.formatDate1=function(o){var r=o.getDate(),i=o.getMonth()+1,d=r<10?"0".concat(r):"".concat(r),s=i<10?"0".concat(i):"".concat(i);return"".concat(d,"-").concat(s,"-").concat(o.getFullYear())},e.prototype.format2Date=function(o){var r=o.getDate()+1,i=o.getMonth()+1,d=r<10?"0".concat(r):"".concat(r),s=i<10?"0".concat(i):"".concat(i);return"".concat(o.getFullYear(),"/").concat(s,"/").concat(d)},e.prototype.ngOnChanges=function(o){return(0,P.mG)(this,void 0,void 0,function(){var r,i,d;return(0,P.Jh)(this,function(s){switch(s.label){case 0:return o.param_PromoProd_id?(this.getPromotionMaster(),0==this.param_PromoProd_id?(this.addedit_OPmode="Add",this.myForm.reset()):this.addedit_OPmode="Edit",console.log("detecting change param_PromoProd_id:"+this.param_PromoProd_id),this.param_PromoProd_id?[4,this.get_Product()]:[3,2]):[3,2];case 1:s.sent(),r="",null!=this.authServ.currentUserValue.id&&(r=this.authServ.currentUserValue.id),console.log("product_Selected.startDate order:--\x3e"+this.product_Selected.startDate+"<--"),console.log("transformmatted startDate:"+this.datePipe.transform(this.product_Selected.startDate,"dd/MM/yyyy")),console.log("product_Selected.minOrderAmount order:--\x3e"+this.product_Selected.minOrderAmount+"<--"),i=this.datePipe.transform(this.product_Selected.startDate,"dd/MM/yyyy HH:mm:ss"),d=this.datePipe.transform(this.product_Selected.endDate,"dd/MM/yyyy HH:mm:ss"),console.log("patching id value:"+this.product_Selected.id),console.log("patching order sdate:"+i),this.myForm.patchValue({id:this.product_Selected.id,seller_id:r,promoType:this.product_Selected.promotionType,promotionName:this.product_Selected.promotionName,discountAmount:this.product_Selected.discountAmount,discountPercentage:this.product_Selected.discountPercentage,startDate:i,endDate:d,minOrderAmount:this.product_Selected.minOrderAmount}),s.label=2;case 2:return[2]}})})},e.prototype.get_Product=function(){var o=this;return new Promise(function(r,i){o.servPromotion.get_Promotion_OrderById(o.param_PromoProd_id).subscribe(function(d){o.product_Selected=d[0],console.log("mm in getpromotion of order res[0] is:"+JSON.stringify(d[0])),r(!0)})})},e.prototype.onImageSelected=function(o){this.imageFile=o.target.files[0]},Object.defineProperty(e.prototype,"errorControl",{get:function(){return this.myForm.controls},enumerable:!1,configurable:!0}),e.prototype.onSubmitClick=function(){this.submitClicked="Submit"},e.prototype.onDeleteClick=function(){this.submitClicked="Delete"},e.prototype.onCancelClick=function(){this.submitClicked="Cancel"},e.prototype.onSubmit=function(){var o=this;if("Delete"==this.submitClicked)return console.log(" hey i want to delete"),console.log("this.myForm.value:"+JSON.stringify(this.myForm.value)),void this.servPromotion.deletePromotion_Order(this.myForm.value).subscribe(function(i){o.formSaved.emit(!0),o.myForm.reset(),o.addedit_OPmode=""});if("Cancel"==this.submitClicked)return this.formSaved.emit(!0),this.myForm.reset(),void(this.addedit_OPmode="");var r="";null!=this.authServ.currentUserValue.id&&(r=this.authServ.currentUserValue.id),this.myForm.patchValue({seller_id:r}),console.log(this.myForm.value),console.log("this.authServ.currentUserValue!.id:"+r),"Add"==this.addedit_OPmode?(this.isSubmitted=!0,console.log("this.myForm.value:"+JSON.stringify(this.myForm.value)),console.log("PromotionTypeList:"+JSON.stringify(this.PromotionTypeList)),this.servPromotion.addPromotion_Order(this.myForm.value).subscribe(function(i){o.formSaved.emit(!0),o.myForm.reset(),o.addedit_OPmode="",o.notify.showInfo("Promotion Added Successfully","Promotion")})):"Edit"==this.addedit_OPmode&&(console.log("aaaaaabbbaaaaaaaa"),this.isSubmitted=!0,setTimeout(function(){console.log("startdate before submit is:"+o.errorControl.startDate.value),console.log("endDate before submit is:"+o.errorControl.endDate.value),o.servPromotion.editPromotion_Order(o.myForm.value).subscribe(function(i){o.formSaved.emit(!0),o.myForm.reset(),o.addedit_OPmode="",o.notify.showInfo("Changes Done Successfully","Promotion")})},3e3))},e.prototype.isValidDate=function(o){return!isNaN(Date.parse(o))},e.\u0275fac=function(r){return new(r||e)(t.Y36(n.qu),t.Y36(h.M),t.Y36(f.H),t.Y36(g.q),t.Y36(v.$),t.Y36(t.zs3),t.Y36(m.uU),t.Y36(F.g))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-order-promotion-add-edit"]],inputs:{param_PromoProd_id:"param_PromoProd_id"},outputs:{formSaved:"formSaved"},features:[t.TTD],decls:38,vars:7,consts:[[1,"card"],[1,"card-body"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-6"],[1,"form-group"],["for","promotionName"],["type","text","maxlength","50","formControlName","promotionName","id","promotionName",1,"form-control"],["for","promoType"],["formControlName","promoType","value","apromo.promotionType","required","",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],["class","row",4,"ngIf"],["for","startDate"],["id","startDate","placeholder","Enter Start Date","bsDatepicker","","formControlName","startDate",1,"form-control",3,"bsConfig"],["for","endDate"],["id","endDate","placeholder","Enter End Date","bsDatepicker","","formControlName","endDate",1,"form-control",3,"bsConfig"],[1,"col-4"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["type","submit",1,"btn","btn-primary",3,"click"],[3,"value"],[1,"error"],["for","discountPercentage"],["type","number","formControlName","discountPercentage","id","discountPercentage",1,"form-control"],["for","discountAmount"],["type","number","formControlName","discountAmount","id","discountAmount",1,"form-control"],["for","minOrderAmount"],["type","number","formControlName","minOrderAmount","id","minOrderAmount",1,"form-control"]],template:function(r,i){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"label",6),t._uU(7,"promotionName"),t.qZA(),t._UZ(8,"input",7),t.qZA()(),t.TgZ(9,"div",4)(10,"div",5)(11,"label",8),t._uU(12,"Promotion Type"),t.qZA(),t.TgZ(13,"select",9),t.YNc(14,Y,2,2,"option",10),t.qZA(),t.YNc(15,x,2,0,"span",11),t.qZA()()(),t.YNc(16,E,16,0,"div",12),t.TgZ(17,"div",3)(18,"div",4)(19,"div",5)(20,"label",13),t._uU(21,"Start Date:"),t.qZA(),t._UZ(22,"input",14),t.qZA()(),t.TgZ(23,"div",4)(24,"div",5)(25,"label",15),t._uU(26,"End Datea:"),t.qZA(),t._UZ(27,"input",16),t.qZA()()(),t.TgZ(28,"div",3)(29,"div",17)(30,"button",18),t.NdJ("click",function(){return i.onSubmitClick()}),t._uU(31,"Submit"),t.qZA()(),t.TgZ(32,"div",17)(33,"button",19),t.NdJ("click",function(){return i.onDeleteClick()}),t._uU(34,"Delete"),t.qZA()(),t.TgZ(35,"div",17)(36,"button",19),t.NdJ("click",function(){return i.onCancelClick()}),t._uU(37,"Cancel"),t.qZA()()()()()()),2&r&&(t.xp6(2),t.Q6J("formGroup",i.myForm),t.xp6(12),t.Q6J("ngForOf",i.PromotionTypeList),t.xp6(1),t.Q6J("ngIf",i.isSubmitted&&(null==i.errorControl.promoType.errors?null:i.errorControl.promoType.errors.required)),t.xp6(1),t.Q6J("ngIf",-1==i.errorControl.promoType.value.indexOf("Buy")),t.xp6(6),t.Q6J("bsConfig",i.bsConfig),t.xp6(5),t.Q6J("bsConfig",i.bsConfig),t.xp6(3),t.Q6J("disabled",1==i.isSubmitted))},dependencies:[m.sg,m.O5,n._Y,n.YN,n.Kr,n.Fj,n.wV,n.EJ,n.JJ,n.JL,n.Q7,n.nD,n.sg,n.u,l.Np,l.Y5]}),e}();function L(e,o){if(1&e){var r=t.EpF();t.TgZ(0,"app-display-order-promotion",4),t.NdJ("promoproduct_id_for_Addedit",function(s){t.CHM(r);var a=t.oxw();return t.KtG(a.promoProd_Select_Changed_for_Addedit(s))})("product_id_for_Detail",function(s){t.CHM(r);var a=t.oxw();return t.KtG(a.Prod_Select_Changed_for_Detail(s))}),t.qZA()}if(2&e){var i=t.oxw();t.Q6J("events",i.eventsSubject.asObservable())}}function Q(e,o){if(1&e){var r=t.EpF();t.TgZ(0,"app-order-promotion-add-edit",5),t.NdJ("formSaved",function(s){t.CHM(r);var a=t.oxw();return t.KtG(a.productformSave_Detected(s))}),t.qZA()}if(2&e){var i=t.oxw();t.Q6J("param_PromoProd_id",i.curr_PromoProd_id_for_Addedit)}}var H=function(){function e(){this.eventsSubject=new k.xQ}return e.prototype.emitEventToChild=function(){this.eventsSubject.next()},e.prototype.promoProd_Select_Changed_for_Addedit=function(o){this.curr_PromoProd_id_for_Addedit=o},e.prototype.Prod_Select_Changed_for_Detail=function(o){this.curr_Prod_id_for_detail=o},e.prototype.productformSave_Detected=function(o){console.log("in child formSaved detected m in manage seller"),this.curr_PromoProd_id_for_Addedit=null,this.emitEventToChild()},e.prototype.onScroll=function(o){console.log("scrolling...")},e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-order-promotions"]],hostBindings:function(r,i){1&r&&t.NdJ("scroll",function(s){return i.onScroll(s)},!1,t.Jf7)},decls:5,vars:2,consts:[[1,"row"],[1,"col-12"],[3,"events","promoproduct_id_for_Addedit","product_id_for_Detail",4,"ngIf"],[3,"param_PromoProd_id","formSaved",4,"ngIf"],[3,"events","promoproduct_id_for_Addedit","product_id_for_Detail"],[3,"param_PromoProd_id","formSaved"]],template:function(r,i){1&r&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,L,1,1,"app-display-order-promotion",2),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,Q,1,1,"app-order-promotion-add-edit",3),t.qZA()()),2&r&&(t.xp6(2),t.Q6J("ngIf",i.curr_PromoProd_id_for_Addedit<0||null==i.curr_PromoProd_id_for_Addedit),t.xp6(2),t.Q6J("ngIf",i.curr_PromoProd_id_for_Addedit||0==i.curr_PromoProd_id_for_Addedit))},dependencies:[m.O5,J,w]}),e}();function V(e,o){if(1&e){var r=t.EpF();t.TgZ(0,"tr",8)(1,"td",9)(2,"button",0),t.NdJ("click",function(){var u=t.CHM(r).$implicit,p=t.oxw();return t.KtG(p.editProduct(u))}),t._UZ(3,"img",10),t.qZA()(),t.TgZ(4,"td",11),t._uU(5),t.qZA(),t.TgZ(6,"td",12),t._uU(7),t.qZA()()}if(2&e){var i=o.$implicit,d=t.oxw();t.xp6(5),t.Oqu(d.servCommon.GetDisplayNameByKey(d.products,"id",i.productId,"product_name")),t.xp6(2),t.Oqu(i.promotionName)}}var j=function(){function e(o,r,i,d,s,a){this.servCommon=o,this.servCategory=r,this.servProduct=i,this.servPromoProduct=d,this.authServ=s,this.servUser=a,this.promoproduct_id_for_Addedit=new t.vpe,this.product_id_for_Detail=new t.vpe,this.product_id_Selected=new t.vpe,this.categoryList=[],this.sellerList=[]}return e.prototype.ngOnInit=function(){var o=this;this.getProductList(),this.get_product_promotions(),this.getSellerList(),this.getCategories(),this.eventsSubscription=this.events.subscribe(function(){return o.get_product_promotions()})},e.prototype.getCategories=function(){var o=this;this.servCategory.getCategorys().subscribe(function(r){o.categoryList=r})},e.prototype.getSellerList=function(){var o=this;this.servUser.getUsers_Of_role("Seller").subscribe(function(r){o.sellerList=r})},e.prototype.ngOnDestroy=function(){this.eventsSubscription.unsubscribe()},e.prototype.addProduct=function(){this.promoproduct_id_for_Addedit.emit(0)},e.prototype.editProduct=function(o){this.product_id_for_Detail.emit(void 0),this.promoproduct_id_for_Addedit.emit(o.id)},e.prototype.selectProduct=function(o){this.promoproduct_id_for_Addedit.emit(void 0),this.product_id_for_Detail.emit(o.id)},e.prototype.getProductList=function(){var o=this;this.servProduct.getProducts_All().subscribe(function(r){o.products=r})},e.prototype.get_product_promotions=function(){var o=this;this.servPromoProduct.get_Promotion_Product_Seller(this.authServ.currentUserValue.id).subscribe(function(r){o.promotions_product=r})},e.\u0275fac=function(r){return new(r||e)(t.Y36(q.v),t.Y36(f.H),t.Y36(h.M),t.Y36(g.q),t.Y36(v.$),t.Y36(N.K))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-display-product-promotion"]],inputs:{events:"events"},outputs:{promoproduct_id_for_Addedit:"promoproduct_id_for_Addedit",product_id_for_Detail:"product_id_for_Detail",product_id_Selected:"product_id_Selected"},decls:13,vars:1,consts:[[1,"btn","btn-danger","btn-sm",2,"padding","0",3,"click"],["src","/assets/icon/add.png","alt","Edit",1,"btn-icon",2,"height","40px"],[1,"card"],[1,"card-body"],[1,"table","table-striped"],[1,"text-primary"],["scope","col"],["style","height: 5px;",4,"ngFor","ngForOf"],[2,"height","5px"],[2,"width","10%"],["width","30px","src","/assets/icon/Edit.png","alt","Edit",1,"btn-icon",2,"height","30px"],[2,"width","20%"],[2,"width","auto"]],template:function(r,i){1&r&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return i.addProduct()}),t._UZ(1,"img",1),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead",5),t._UZ(6,"th",6),t.TgZ(7,"th"),t._uU(8,"Product"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Promotion"),t.qZA()(),t.TgZ(11,"tbody"),t.YNc(12,V,8,2,"tr",7),t.qZA()()()()),2&r&&(t.xp6(12),t.Q6J("ngForOf",i.promotions_product))},dependencies:[m.sg]}),e}();function G(e,o){if(1&e&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&e){var r=o.$implicit;t.Q6J("value",r.promotionType),t.xp6(1),t.Oqu(r.promotionType)}}function K(e,o){1&e&&(t.TgZ(0,"span",24),t._uU(1," promoType not provided. "),t.qZA())}function X(e,o){if(1&e&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&e){var r=o.$implicit;t.Q6J("value",r.id),t.xp6(1),t.Oqu(r.product_name)}}function $(e,o){1&e&&(t.TgZ(0,"span",24),t._uU(1," Product not provided. "),t.qZA())}function z(e,o){1&e&&(t.TgZ(0,"div",3)(1,"div",10)(2,"div",5)(3,"label",25),t._uU(4,"buyX"),t.qZA(),t._UZ(5,"input",26),t.qZA()(),t.TgZ(6,"div",10)(7,"div",5)(8,"label",27),t._uU(9,"getY"),t.qZA(),t._UZ(10,"input",28),t.qZA()()())}function R(e,o){1&e&&(t.TgZ(0,"div",3)(1,"div",10)(2,"div",5)(3,"label",29),t._uU(4,"discountPercentage"),t.qZA(),t._UZ(5,"input",30),t.qZA()(),t.TgZ(6,"div",10)(7,"div",5)(8,"label",31),t._uU(9,"discountAmount"),t.qZA(),t._UZ(10,"input",32),t.qZA()()())}var W=function(){function e(o,r,i,d,s,a,u,p){this.formBuilder=o,this.servProduct=r,this.servCategory=i,this.servPromotion=d,this.authServ=s,this.injector=a,this.datePipe=u,this.notify=p,this.timepickerConfig=function B(){return Object.assign(new U.Sm,{timeFormat:"hh:mm A",showMeridian:!0,containerClass:"theme-default",hourStep:1,minuteStep:15,readonlyInput:!1,mousewheel:!0,arrowkeys:!0})}(),this.formSaved=new t.vpe,this.addedit_OPmode="",this.defaultDate="1987-06-30",this.isSubmitted=!1,this.isSubmitted_uploadform=!1,this.PromotionTypeList=[],this.ProductList=[],this.submitClicked="",this.bsConfig={dateInputFormat:"DD/MM/YYYY HH:mm:ss",containerClass:"theme-default"}}return e.prototype.ngAfterViewInit=function(){this.getPromotionMaster(),this.getProductList()},e.prototype.getPromotionMaster=function(){var o=this;this.servPromotion.getPromotionMast().subscribe(function(r){o.PromotionTypeList=r})},e.prototype.getProductList=function(){var o=this,r="";null!=this.authServ.currentUserValue.id&&(r=this.authServ.currentUserValue.id),this.servProduct.getProducts_Ofseller(r).subscribe(function(i){o.ProductList=i})},e.prototype.ngOnInit=function(){this.myForm=this.formBuilder.group({id:[],seller_id:[""],productId:[""],promoType:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(50)]],promotionName:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(50)]],buyX:["0",[n.kI.min(1),n.kI.max(10)]],getY:["0",[n.kI.min(1),n.kI.max(10)]],discountAmount:["0",[n.kI.min(10),n.kI.max(9999)]],discountPercentage:["0",[n.kI.min(1),n.kI.max(90)]],startDate:["",n.kI.required],endDate:[""]})},e.prototype.formatDate=function(o){var r=o.getDate(),i=o.getMonth()+1,d=o.getFullYear(),s=o.getHours(),a=o.getMinutes(),u=o.getSeconds(),p=r<10?"0".concat(r):"".concat(r),y=i<10?"0".concat(i):"".concat(i),b="".concat(d),C=s<10?"0".concat(s):"".concat(s),S=a<10?"0".concat(a):"".concat(a),A=u<10?"0".concat(u):"".concat(u);return"".concat(p,"/").concat(y,"/").concat(b," ").concat(C,":").concat(S,":").concat(A)},e.prototype.formatDate1=function(o){var r=o.getDate(),i=o.getMonth()+1,d=r<10?"0".concat(r):"".concat(r),s=i<10?"0".concat(i):"".concat(i);return"".concat(d,"-").concat(s,"-").concat(o.getFullYear())},e.prototype.format2Date=function(o){var r=o.getDate(),i=o.getMonth()+1,d=r<10?"0".concat(r):"".concat(r),s=i<10?"0".concat(i):"".concat(i);return"".concat(o.getFullYear(),"-").concat(s,"-").concat(d)},e.prototype.ngOnChanges=function(o){return(0,P.mG)(this,void 0,void 0,function(){var r,i,d;return(0,P.Jh)(this,function(s){switch(s.label){case 0:return o.param_PromoProd_id?(this.getPromotionMaster(),0==this.param_PromoProd_id?(this.addedit_OPmode="Add",this.myForm.reset()):this.addedit_OPmode="Edit",console.log("detecting change param_PromoProd_id:"+this.param_PromoProd_id),this.param_PromoProd_id?[4,this.get_Product()]:[3,2]):[3,2];case 1:s.sent(),r="",null!=this.authServ.currentUserValue.id&&(r=this.authServ.currentUserValue.id),console.log("product_Selected.startDate product:--\x3e"+this.product_Selected.startDate+"<--"),i=this.datePipe.transform(this.product_Selected.startDate,"dd/MM/yyyy HH:mm:ss"),d=this.datePipe.transform(this.product_Selected.endDate,"dd/MM/yyyy HH:mm:ss"),console.log("patching id value:"+this.product_Selected.id),console.log("patching product sdate:"+i),this.myForm.patchValue({id:this.product_Selected.id,seller_id:r,productId:this.product_Selected.productId,promoType:this.product_Selected.promotionType,promotionName:this.product_Selected.promotionName,buyX:this.product_Selected.buyX,getY:this.product_Selected.getY,discountAmount:this.product_Selected.discountAmount,discountPercentage:this.product_Selected.discountPercentage,startDate:i,endDate:d}),s.label=2;case 2:return[2]}})})},e.prototype.get_Product=function(){var o=this;return new Promise(function(r,i){o.servPromotion.get_Promotion_ProductById(o.param_PromoProd_id).subscribe(function(d){o.product_Selected=d[0],console.log("mm in getpromotion of product res[0] is:"+JSON.stringify(d[0])),r(!0)})})},e.prototype.onImageSelected=function(o){this.imageFile=o.target.files[0]},Object.defineProperty(e.prototype,"errorControl",{get:function(){return this.myForm.controls},enumerable:!1,configurable:!0}),e.prototype.onSubmitClick=function(){this.submitClicked="Submit"},e.prototype.onDeleteClick=function(){this.submitClicked="Delete"},e.prototype.onCancelClick=function(){this.submitClicked="Cancel"},e.prototype.onSubmit=function(){var o=this;if("Delete"==this.submitClicked)return console.log(" hey i want to delete"),console.log("this.myForm.value in product:"+JSON.stringify(this.myForm.value)),void this.servPromotion.deletePromotion_Product(this.myForm.value).subscribe(function(i){o.formSaved.emit(!0),o.myForm.reset(),o.addedit_OPmode=""});if("Cancel"==this.submitClicked)return this.formSaved.emit(!0),this.myForm.reset(),void(this.addedit_OPmode="");console.log(this.myForm.value);var r="";null!=this.authServ.currentUserValue.id&&(r=this.authServ.currentUserValue.id),this.myForm.patchValue({seller_id:r}),console.log("this.authServ.currentUserValue!.id:"+r),"Add"==this.addedit_OPmode?(this.isSubmitted=!0,console.log("this.myForm.value:"+JSON.stringify(this.myForm.value)),console.log("PromotionTypeList:"+JSON.stringify(this.PromotionTypeList)),this.servPromotion.addPromotion_Product(this.myForm.value).subscribe(function(i){o.formSaved.emit(!0),o.myForm.reset(),o.notify.showInfo("Promotion Added Successfully","Promotion")})):"Edit"==this.addedit_OPmode&&(this.isSubmitted=!0,this.servPromotion.editPromotion_Product(this.myForm.value).subscribe(function(i){o.formSaved.emit(!0),o.myForm.reset(),o.notify.showInfo("Changes Done Successfully","Promotion")}))},e.\u0275fac=function(r){return new(r||e)(t.Y36(n.qu),t.Y36(h.M),t.Y36(f.H),t.Y36(g.q),t.Y36(v.$),t.Y36(t.zs3),t.Y36(m.uU),t.Y36(F.g))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-product-promotion-add-edit"]],inputs:{param_PromoProd_id:"param_PromoProd_id"},outputs:{formSaved:"formSaved"},features:[t.TTD],decls:47,vars:10,consts:[[1,"card"],[1,"card-body"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12"],[1,"form-group"],["for","promoType"],["formControlName","promoType","value","apromo.promotionType","required","",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],[1,"col-6"],["for","product"],["formControlName","productId","required","",1,"form-control"],["for","promotionName"],["type","text","maxlength","50","formControlName","promotionName","id","promotionName",1,"form-control"],["for","startDate"],["id","startDate","placeholder","Enter Start Date","bsDatepicker","","formControlName","startDate",1,"form-control",3,"bsConfig"],["for","endDate"],["id","startDate","placeholder","Enter End Date","bsDatepicker","","formControlName","endDate",1,"form-control",3,"bsConfig"],["class","row",4,"ngIf"],[1,"col-4"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["type","submit",1,"btn","btn-primary",3,"click"],[3,"value"],[1,"error"],["for","buyX"],["type","number","formControlName","buyX","id","buyX",1,"form-control"],["for","getY"],["type","number","formControlName","getY","id","getY",1,"form-control"],["for","discountPercentage"],["type","number","formControlName","discountPercentage","id","discountPercentage",1,"form-control"],["for","discountAmount"],["type","number","formControlName","discountAmount","id","discountAmount",1,"form-control"]],template:function(r,i){1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"label",6),t._uU(7,"Promotion Type"),t.qZA(),t.TgZ(8,"select",7),t.YNc(9,G,2,2,"option",8),t.qZA(),t.YNc(10,K,2,0,"span",9),t.qZA()()(),t.TgZ(11,"div",3)(12,"div",10)(13,"div",5)(14,"label",11),t._uU(15,"Product"),t.qZA(),t.TgZ(16,"select",12),t.YNc(17,X,2,2,"option",8),t.qZA(),t.YNc(18,$,2,0,"span",9),t.qZA()(),t.TgZ(19,"div",10)(20,"div",5)(21,"label",13),t._uU(22,"promotionName"),t.qZA(),t._UZ(23,"input",14),t.qZA()()(),t.TgZ(24,"div",3)(25,"div",10)(26,"div",5)(27,"label",15),t._uU(28,"Start Date:"),t.qZA(),t._UZ(29,"input",16),t.qZA()(),t.TgZ(30,"div",10)(31,"div",5)(32,"label",17),t._uU(33,"End Date:"),t.qZA(),t._UZ(34,"input",18),t.qZA()()(),t.YNc(35,z,11,0,"div",19),t.YNc(36,R,11,0,"div",19),t.TgZ(37,"div",3)(38,"div",20)(39,"button",21),t.NdJ("click",function(){return i.onSubmitClick()}),t._uU(40,"Submit"),t.qZA()(),t.TgZ(41,"div",20)(42,"button",22),t.NdJ("click",function(){return i.onDeleteClick()}),t._uU(43,"Delete"),t.qZA()(),t.TgZ(44,"div",20)(45,"button",22),t.NdJ("click",function(){return i.onCancelClick()}),t._uU(46,"Cancel"),t.qZA()()()()()()),2&r&&(t.xp6(2),t.Q6J("formGroup",i.myForm),t.xp6(7),t.Q6J("ngForOf",i.PromotionTypeList),t.xp6(1),t.Q6J("ngIf",i.isSubmitted&&(null==i.errorControl.promoType.errors?null:i.errorControl.promoType.errors.required)),t.xp6(7),t.Q6J("ngForOf",i.ProductList),t.xp6(1),t.Q6J("ngIf",i.isSubmitted&&(null==i.errorControl.productId.errors?null:i.errorControl.productId.errors.required)),t.xp6(11),t.Q6J("bsConfig",i.bsConfig),t.xp6(5),t.Q6J("bsConfig",i.bsConfig),t.xp6(1),t.Q6J("ngIf",-1!=i.errorControl.promoType.value.indexOf("Buy")),t.xp6(1),t.Q6J("ngIf",-1==i.errorControl.promoType.value.indexOf("Buy")),t.xp6(3),t.Q6J("disabled",1==i.isSubmitted))},dependencies:[m.sg,m.O5,n._Y,n.YN,n.Kr,n.Fj,n.wV,n.EJ,n.JJ,n.JL,n.Q7,n.nD,n.sg,n.u,l.Np,l.Y5]}),e}();function tt(e,o){if(1&e){var r=t.EpF();t.TgZ(0,"app-display-product-promotion",4),t.NdJ("promoproduct_id_for_Addedit",function(s){t.CHM(r);var a=t.oxw();return t.KtG(a.promoProd_Select_Changed_for_Addedit(s))})("product_id_for_Detail",function(s){t.CHM(r);var a=t.oxw();return t.KtG(a.Prod_Select_Changed_for_Detail(s))}),t.qZA()}if(2&e){var i=t.oxw();t.Q6J("events",i.eventsSubject.asObservable())}}function ot(e,o){if(1&e){var r=t.EpF();t.TgZ(0,"app-product-promotion-add-edit",5),t.NdJ("formSaved",function(s){t.CHM(r);var a=t.oxw();return t.KtG(a.productformSave_Detected(s))}),t.qZA()}if(2&e){var i=t.oxw();t.Q6J("param_PromoProd_id",i.curr_PromoProd_id_for_Addedit)}}var rt=[{path:"",component:O,children:[{path:"",redirectTo:"Product-Promotions",pathMatch:"full"},{path:"Product-Promotions",component:function(){function e(){this.eventsSubject=new k.xQ}return e.prototype.emitEventToChild=function(){this.eventsSubject.next()},e.prototype.promoProd_Select_Changed_for_Addedit=function(o){this.curr_PromoProd_id_for_Addedit=o},e.prototype.Prod_Select_Changed_for_Detail=function(o){this.curr_Prod_id_for_detail=o},e.prototype.productformSave_Detected=function(o){console.log("in child formSaved detected m in manage seller"),this.curr_PromoProd_id_for_Addedit=null,this.emitEventToChild()},e.prototype.onScroll=function(o){console.log("scrolling...")},e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-product-promotions"]],hostBindings:function(r,i){1&r&&t.NdJ("scroll",function(s){return i.onScroll(s)},!1,t.Jf7)},decls:5,vars:2,consts:[[1,"row"],[1,"col-12"],[3,"events","promoproduct_id_for_Addedit","product_id_for_Detail",4,"ngIf"],[3,"param_PromoProd_id","formSaved",4,"ngIf"],[3,"events","promoproduct_id_for_Addedit","product_id_for_Detail"],[3,"param_PromoProd_id","formSaved"]],template:function(r,i){1&r&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,tt,1,1,"app-display-product-promotion",2),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,ot,1,1,"app-product-promotion-add-edit",3),t.qZA()()),2&r&&(t.xp6(2),t.Q6J("ngIf",i.curr_PromoProd_id_for_Addedit<0||null==i.curr_PromoProd_id_for_Addedit),t.xp6(2),t.Q6J("ngIf",i.curr_PromoProd_id_for_Addedit||0==i.curr_PromoProd_id_for_Addedit))},dependencies:[m.O5,j,W]}),e}()},{path:"Order-Promotions",component:H}]}],it=function(){function e(){}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[_.Bz.forChild(rt),_.Bz]}),e}(),nt=function(){function e(){}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[m.uU],imports:[m.ez,n.u5,n.UX,l.kn.forRoot(),it]}),e}()}}]);