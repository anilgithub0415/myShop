"use strict";(self.webpackChunkEshop=self.webpackChunkEshop||[]).push([[317],{317:(st,v,s)=>{s.r(v),s.d(v,{ManageProductsModule:()=>dt});var c=s(6895),y=s(7716),t=s(4650),A=s(8929),l=s(2114),C=s(7807),n=s(4006),_=s(655),m=s(4350),g=s(6121),P=s(2011),Z=s(4704),f=s(6493),b=s(6366);function U(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&e){var o=i.$implicit,r=t.oxw();t.xp6(2),t.Oqu(o.Quantity_Option),t.xp6(2),t.Oqu(r.servCommon.GetDisplayNameByKey(r.unit_master,"id",o.Quantity_Option_Unit,"unit_name"))}}var T=function(){function e(i,o,r){var a=this;this.servProdQuantity=i,this.servUnitmgt=o,this.servCommon=r,this.unit_master=[],this.ListOfQuantityForThisProduct=[],this.loading=!0,this.servUnitmgt.getUnitMaster().subscribe(function(d){a.unit_master=d})}return e.prototype.ngOnInit=function(){var i=this;this.servProdQuantity.get_prod_quality_OfProductId(this.ProductId).subscribe(function(o){i.ListOfQuantityForThisProduct=o,console.log("ListOfQuantityForThisProduct:"+JSON.stringify(i.ListOfQuantityForThisProduct)),i.loading=!1})},e.\u0275fac=function(o){return new(o||e)(t.Y36(b.b),t.Y36(g.G),t.Y36(f.v))},e.\u0275cmp=t.Xpm({type:e,selectors:[["product-quantity"]],inputs:{ProductId:"ProductId"},decls:10,vars:1,consts:[[1,"table-container"],[1,"fluro-table",2,"width","200px"],[4,"ngFor","ngForOf"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th"),t._uU(5,"Quantity Option"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Unit"),t.qZA()()(),t.TgZ(8,"tbody"),t.YNc(9,U,5,2,"tr",2),t.qZA()()()),2&o&&(t.xp6(9),t.Q6J("ngForOf",r.ListOfQuantityForThisProduct))},dependencies:[c.sg],styles:[".table-container[_ngcontent-%COMP%]{height:150px;overflow-y:auto}.fluro-table[_ngcontent-%COMP%]{font-size:8px;border-collapse:collapse;width:100%}.fluro-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .fluro-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #d35400;padding:4px 8px;text-align:center}.fluro-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#000;color:#fff}.fluro-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(even){background-color:#000;color:#fff}.fluro-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:green;color:#fff}"]}),e}();function O(e,i){if(1&e&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA()()),2&e){var o=i.$implicit,r=t.oxw(3);t.xp6(2),t.Oqu(o.product_name),t.xp6(2),t.AsE("",o.price,"/",r.servCommon.GetDisplayNameByKey(r.unit_master,"id",o.unit_id,"unit_name"),"")}}function S(e,i){if(1&e&&(t.TgZ(0,"table",36)(1,"thead",37)(2,"th",38),t._uU(3,"Product"),t.qZA(),t.TgZ(4,"th"),t._uU(5,"Price"),t.qZA()(),t.TgZ(6,"tbody"),t.YNc(7,O,5,3,"tr",39),t.qZA()()),2&e){var o=t.oxw(2);t.xp6(7),t.Q6J("ngForOf",o.products_matching)}}function x(e,i){if(1&e){var o=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div"),t._uU(3,"Before adding new product just check if it is already existing by searching here..."),t.qZA(),t.TgZ(4,"input",34),t.NdJ("ngModelChange",function(d){t.CHM(o);var u=t.oxw();return t.KtG(u.searchNM=d)})("keyup",function(){t.CHM(o);var d=t.oxw();return t.KtG(d.searchByName())}),t.qZA(),t.YNc(5,S,8,1,"table",35),t.qZA()()}if(2&e){var r=t.oxw();t.xp6(4),t.Q6J("ngModel",r.searchNM),t.xp6(1),t.Q6J("ngIf",r.products_matching.length)}}function q(e,i){1&e&&t._UZ(0,"img",40)}function I(e,i){1&e&&(t.TgZ(0,"span",41),t._uU(1," product_name not provided. "),t.qZA())}function M(e,i){if(1&e&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&e){var o=i.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.Category)}}function N(e,i){1&e&&(t.TgZ(0,"span",41),t._uU(1," Category not provided. "),t.qZA())}function Q(e,i){if(1&e&&(t.TgZ(0,"option",42),t._uU(1),t.qZA()),2&e){var o=i.$implicit;t.Q6J("value",o.id),t.xp6(1),t.Oqu(o.unit_name)}}function w(e,i){1&e&&(t.TgZ(0,"span",41),t._uU(1," unit_id not provided. "),t.qZA())}function F(e,i){1&e&&(t.TgZ(0,"span",41),t._uU(1," price not provided. "),t.qZA())}function J(e,i){1&e&&(t.TgZ(0,"span",41),t._uU(1," Allowed_customQuantity not provided. "),t.qZA())}function Y(e,i){if(1&e){var o=t.EpF();t.TgZ(0,"div")(1,"input",43),t.NdJ("change",function(){t.CHM(o);var d=t.oxw();return t.KtG(d.show_customQuantity_Details=!d.show_customQuantity_Details)}),t.qZA(),t._uU(2),t.qZA()}if(2&e){var r=t.oxw();t.xp6(1),t.Q6J("checked",r.show_customQuantity_Details),t.xp6(1),t.hij("Show Details:",r.show_customQuantity_Details,"\n")}}function D(e,i){if(1&e&&(t.TgZ(0,"div",44),t._UZ(1,"div",45),t.TgZ(2,"div",46),t._UZ(3,"product-quantity",47),t.qZA()()),2&e){var o=t.oxw();t.xp6(3),t.Q6J("ProductId",o.param_Product_id)}}function E(e,i){1&e&&(t.TgZ(0,"span",41),t._uU(1," Out of stock not provided. "),t.qZA())}function k(e,i){1&e&&(t.TgZ(0,"span",41),t._uU(1," IsOnlyForAdvertise not provided. "),t.qZA())}function B(e,i){1&e&&(t.TgZ(0,"span",41),t._uU(1," imageUrl not provided. "),t.qZA())}function L(e,i){if(1&e){var o=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){t.CHM(o);var d=t.oxw();return t.KtG(d.onSubmitClick())}),t._uU(1,"Submit"),t.qZA()}if(2&e){var r=t.oxw();t.Q6J("disabled",0==r.myForm.valid)}}var G=function(){function e(i,o,r,a,d,u,p,h,at){this.formBuilder=i,this.servProduct=o,this.servUnitmgt=r,this.servCategory=a,this.servUser=d,this.authServ=u,this.notify=p,this.servCommon=h,this.location=at,this.param_currUserId=0,this.formSaved=new t.vpe,this.addedit_OPmode="",this.defaultDate="1987-06-30",this.isSubmitted=!1,this.isSubmitted_uploadform=!1,this.categoryList=[],this.unit_master=[],this.isLoading=!0,this.show_customQuantity_Details=!1,this.searchNM="",this.products_matching=[],this.submitClicked="",this.shop_type_OfThis_seller=""}return e.prototype.ngAfterViewInit=function(){var i=this;this.getCategories(),this.getUnit_Master(),this.servUser.getUser(this.authServ.currentUserValue.id).subscribe(function(r){console.log("find shoptype in response:"+JSON.stringify(r)),i.shop_type_OfThis_seller=r[0].shop_type})},e.prototype.getCategories=function(){var i=this;this.servCategory.getCategorys().subscribe(function(o){i.categoryList=o})},e.prototype.getUnit_Master=function(){var i=this;this.servUnitmgt.getUnitMaster().subscribe(function(o){i.unit_master=o,i.unit_master=i.unit_master.filter(function(r){return 1==r.chooseasaunit})})},e.prototype.ngOnInit=function(){this.myForm=this.formBuilder.group({seller_id:[""],product_name:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(50)]],imageUrl:[""],category:["",[n.kI.required]],unit_id:[],price:["",[n.kI.required,n.kI.min(1),n.kI.max(1e6)]],discount_text:[""],icon:[],description:[""],IsOnlyForAdvertise:[!1],OutOfStock:[!1],Allowed_customQuantity:[]})},e.prototype.ngOnChanges=function(i){return(0,_.mG)(this,void 0,void 0,function(){return(0,_.Jh)(this,function(o){switch(o.label){case 0:return i.param_Product_id?(this.getCategories(),0==this.param_Product_id?(this.addedit_OPmode="Add",this.isLoading=!1,this.myForm.reset()):this.addedit_OPmode="Edit",this.param_Product_id?(this.isLoading=!0,[4,this.get_Product()]):[3,2]):[3,3];case 1:return o.sent(),this.isLoading=!1,this.myForm.patchValue({seller_id:this.product_Selected.seller_id,product_name:this.product_Selected.product_name,category:this.product_Selected.category_id,unit_id:this.product_Selected.unit_id,price:this.product_Selected.price,description:this.product_Selected.description,IsOnlyForAdvertise:this.product_Selected.IsOnlyForAdvertise,OutOfStock:this.product_Selected.OutOfStock,discount_text:this.product_Selected.discount_text,imageUrl:this.product_Selected.imageUrl,Allowed_customQuantity:this.product_Selected.Allowed_customQuantity}),[3,3];case 2:this.isLoading=!1,o.label=3;case 3:return[2]}})})},e.prototype.get_Product=function(){var i=this;return new Promise(function(o,r){i.servProduct.getProduct(i.param_Product_id).subscribe(function(a){i.product_Selected=a[0],o(!0)})})},e.prototype.onImageSelected=function(i){this.imageFile=i.target.files[0],console.log("event.target.files[0];"+i.target.files[0])},Object.defineProperty(e.prototype,"errorControl",{get:function(){return this.myForm.controls},enumerable:!1,configurable:!0}),e.prototype.onSubmitClick=function(){this.submitClicked="Submit"},e.prototype.onDeleteClick=function(){this.submitClicked="Delete"},e.prototype.onCancelClick=function(){this.submitClicked="Cancel"},e.prototype.onSubmit=function(){var i=this;if(this.isSubmitted=!0,"Cancel"!=this.submitClicked){if(this.myForm.valid){var o=new FormData,r="";console.log("while submitting param_currUserId is:"+this.param_currUserId.id),null!=this.authServ.currentUserValue.id&&(r=this.param_currUserId.id),o.append("id",this.param_Product_id.toString()),o.append("seller_id",r),o.append("product_name",this.myForm.value.product_name),o.append("category_id",this.myForm.value.category),o.append("price",this.myForm.value.price),o.append("discount_text",this.myForm.value.discount_text),o.append("description",this.myForm.value.description),o.append("IsOnlyForAdvertise",this.myForm.value.IsOnlyForAdvertise),o.append("OutOfStock",this.myForm.value.OutOfStock),o.append("unit_id",this.myForm.value.unit_id),o.append("Allowed_customQuantity",this.myForm.value.Allowed_customQuantity),o.append("CREATEDBY_username",this.param_currUserId.display_name),this.imageFile&&this.imageFile.name&&(o.append("imageUrl",this.imageFile.name),o.append("icon",this.imageFile)),console.log("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"),"Add"==this.addedit_OPmode?(this.addedit_OPmode="",this.servProduct.addProduct(o).subscribe(function(a){i.formSaved.emit(!0),i.myForm.reset(),i.notify.showSuccess("Product Added successfully","New Product")})):"Edit"==this.addedit_OPmode&&(this.addedit_OPmode="",this.servProduct.updateProduct(o).subscribe(function(a){console.log("trying to update product..."),console.log("here is response:"+JSON.stringify(a)),i.formSaved.emit(!0),i.myForm.reset(),console.log("update product done..."),i.notify.showInfo("Changes Done Successfully","Product")}))}}else this.formSaved.emit(!0)},e.prototype.searchByName=function(){var i=this;0==this.searchNM.toString().length?this.products_matching.length=0:this.searchNM.toString().length>=3&&this.servProduct.getProductByPartialName(this.authServ.currentUserValue.id,this.searchNM).subscribe(function(o){i.products_matching=o})},e.\u0275fac=function(o){return new(o||e)(t.Y36(n.qu),t.Y36(m.M),t.Y36(g.G),t.Y36(P.H),t.Y36(C.K),t.Y36(l.$),t.Y36(Z.g),t.Y36(f.v),t.Y36(c.Ye))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-product-add-edit"]],inputs:{param_currUserId:"param_currUserId",param_Product_id:"param_Product_id"},outputs:{formSaved:"formSaved"},features:[t.TTD],decls:74,vars:20,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card-body"],["style","height:300px;width:400px","src","../../../../../assets/icon/loading.gif",4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-3","col-md-4","col-6"],[1,"form-group"],["for","product_name"],["type","text","maxlength","50","formControlName","product_name","id","product_name",1,"form-control"],["class","error",4,"ngIf"],["for","category"],["formControlName","category","required","",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-3","col-md-4","col-3"],["for","unit_id"],["formControlName","unit_id","required","",1,"form-control"],["for","Price"],["type","number","formControlName","price","id","price",1,"form-control"],["formControlName","Allowed_customQuantity","required","",1,"form-control"],["value","true"],["value","false"],[4,"ngIf"],["class","row","style","align-self: center;",4,"ngIf"],[1,"col-lg-4","col-md-4","col-6"],["for","OutOfStock"],["type","checkbox","id","OutOfStock",3,"formControlName"],["for","IsOnlyForAdvertise"],["type","checkbox","id","IsOnlyForAdvertise",3,"formControlName"],["for","image"],["type","file","id","image",1,"form-control-file",3,"change"],["formControlName","imageUrl","alt","Product image",1,"card-img-top",2,"height","250px","width","auto","object-fit","contain",3,"src"],["type","submit","class","btn btn-primary",3,"disabled","click",4,"ngIf"],["type","submit",1,"btn","btn-primary",3,"click"],["type","text",3,"ngModel","ngModelChange","keyup"],["class","table",4,"ngIf"],[1,"table"],[1,"text-primary"],[2,"width","30%"],[4,"ngFor","ngForOf"],["src","../../../../../assets/icon/loading.gif",2,"height","300px","width","400px"],[1,"error"],[3,"value"],["type","checkbox",3,"checked","change"],[1,"row",2,"align-self","center"],[1,"col-lg-3","col-md-3","col-3"],[1,"col-lg-7","col-md-8","col-10"],[3,"ProductId"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(o,r){1&o&&(t._uU(0),t.YNc(1,x,6,2,"div",0),t.TgZ(2,"div",1)(3,"div",2),t.YNc(4,q,1,0,"img",3),t.TgZ(5,"form",4),t.NdJ("ngSubmit",function(){return r.onSubmit()}),t.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"label",8),t._uU(10,"Product"),t.qZA(),t._UZ(11,"input",9),t.YNc(12,I,2,0,"span",10),t.qZA()(),t.TgZ(13,"div",6)(14,"div",7)(15,"label",11),t._uU(16,"Category"),t.qZA(),t.TgZ(17,"select",12),t.YNc(18,M,2,2,"option",13),t.qZA(),t.YNc(19,N,2,0,"span",10),t.qZA()()(),t.TgZ(20,"div",5)(21,"div",14)(22,"div",7)(23,"label",15),t._uU(24,"Unit"),t.qZA(),t.TgZ(25,"select",16),t.YNc(26,Q,2,2,"option",13),t.qZA(),t.YNc(27,w,2,0,"span",10),t.qZA()(),t.TgZ(28,"div",14)(29,"div",7)(30,"label",17),t._uU(31,"Price"),t.qZA(),t._UZ(32,"input",18),t.YNc(33,F,2,0,"span",10),t.qZA()(),t.TgZ(34,"div",14)(35,"div",7)(36,"label",11),t._uU(37,"CustomQuantity"),t.qZA(),t.TgZ(38,"select",19)(39,"option",20),t._uU(40,"True"),t.qZA(),t.TgZ(41,"option",21),t._uU(42,"False"),t.qZA()(),t.YNc(43,J,2,0,"span",10),t.qZA(),t.YNc(44,Y,3,2,"div",22),t.qZA(),t._UZ(45,"div",14),t.qZA(),t.YNc(46,D,4,1,"div",23),t.TgZ(47,"div",5)(48,"div",24)(49,"div",7)(50,"label",25),t._uU(51,"Out Of Stock : "),t.qZA(),t._UZ(52,"input",26),t._uU(53," Yes/No "),t.YNc(54,E,2,0,"span",10),t.qZA()(),t.TgZ(55,"div",24)(56,"div",7)(57,"label",27),t._uU(58,"Only For Advertise : "),t.qZA(),t._UZ(59,"input",28),t._uU(60," Yes/No "),t.YNc(61,k,2,0,"span",10),t.qZA()()(),t.TgZ(62,"div",5)(63,"div",24)(64,"div",7)(65,"label",29),t._uU(66,"Product Image"),t.qZA(),t.TgZ(67,"input",30),t.NdJ("change",function(d){return r.onImageSelected(d)}),t.qZA()()()(),t.TgZ(68,"div",7),t._UZ(69,"img",31),t.YNc(70,B,2,0,"span",10),t.qZA(),t.YNc(71,L,2,1,"button",32),t.TgZ(72,"button",33),t.NdJ("click",function(){return r.onCancelClick()}),t._uU(73,"Cancel"),t.qZA()()()()),2&o&&(t.hij(" shop_type_OfThis_seller:",r.shop_type_OfThis_seller,"\n"),t.xp6(1),t.Q6J("ngIf","Add"==r.addedit_OPmode),t.xp6(3),t.Q6J("ngIf",r.isLoading),t.xp6(1),t.Q6J("formGroup",r.myForm),t.xp6(7),t.Q6J("ngIf",r.isSubmitted&&(null==r.errorControl.product_name.errors?null:r.errorControl.product_name.errors.required)),t.xp6(6),t.Q6J("ngForOf",r.categoryList),t.xp6(1),t.Q6J("ngIf",r.isSubmitted&&(null==r.errorControl.category.errors?null:r.errorControl.category.errors.required)),t.xp6(7),t.Q6J("ngForOf",r.unit_master),t.xp6(1),t.Q6J("ngIf",r.isSubmitted&&(null==r.errorControl.unit_id.errors?null:r.errorControl.unit_id.errors.required)),t.xp6(6),t.Q6J("ngIf",r.isSubmitted&&(null==r.errorControl.price.errors?null:r.errorControl.price.errors.required)),t.xp6(10),t.Q6J("ngIf",r.isSubmitted&&(null==r.errorControl.Allowed_customQuantity.errors?null:r.errorControl.Allowed_customQuantity.errors.required)),t.xp6(1),t.Q6J("ngIf",1==r.errorControl.Allowed_customQuantity.value),t.xp6(2),t.Q6J("ngIf",r.show_customQuantity_Details),t.xp6(6),t.Q6J("formControlName","OutOfStock"),t.xp6(2),t.Q6J("ngIf",r.isSubmitted&&(null==r.errorControl.OutOfStock.errors?null:r.errorControl.OutOfStock.errors.required)),t.xp6(5),t.Q6J("formControlName","IsOnlyForAdvertise"),t.xp6(2),t.Q6J("ngIf",r.isSubmitted&&(null==r.errorControl.IsOnlyForAdvertise.errors?null:r.errorControl.IsOnlyForAdvertise.errors.required)),t.xp6(8),t.MGl("src","../../../../../assets/product_images/",r.errorControl.imageUrl.value,"",t.LSH),t.xp6(1),t.Q6J("ngIf",r.isSubmitted&&(null==r.errorControl.imageUrl.errors?null:r.errorControl.imageUrl.errors.required)),t.xp6(1),t.Q6J("ngIf",""!=r.addedit_OPmode))},dependencies:[c.sg,c.O5,n._Y,n.YN,n.Kr,n.Fj,n.wV,n.Wl,n.EJ,n.JJ,n.JL,n.Q7,n.nD,n.On,n.sg,n.u,T]}),e}(),H=function(){function e(i,o){this.servProduct=i,this.authServ=o}return e.prototype.ngOnChanges=function(i){i.param_Product_id&&this.param_Product_id&&this.get_Product()},e.prototype.get_Product=function(){var i=this;this.servProduct.getProduct(this.param_Product_id).subscribe(function(o){i.product_Selected=o[0],i.imagepath="E:/myApt/nodeMyShop/images/apple.jpg"})},e.\u0275fac=function(o){return new(o||e)(t.Y36(m.M),t.Y36(l.$))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-product-detail"]],inputs:{param_Product_id:"param_Product_id"},features:[t.TTD],decls:12,vars:7,consts:[[1,"card","mt-2","mb-3",2,"background-color","light-yellow","border","5px solid pink","padding","10px"],[1,"card-body"],[1,"card-text","firm_name"],["alt","Product image",1,"card-img-top",2,"height","250px","width","auto","object-fit","contain",3,"src"],[1,"card-title",2,"color","maroon"],[1,"card-text"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p",2),t._uU(3),t.qZA()(),t._UZ(4,"img",3),t.TgZ(5,"div",1)(6,"h5",4),t._uU(7),t.qZA(),t.TgZ(8,"p",5),t._uU(9),t.qZA(),t.TgZ(10,"p",5),t._uU(11),t.qZA()()()),2&o&&(t.xp6(3),t.AsE("",r.product_Selected.firm_name,"",r.product_Selected.firm_addr,""),t.xp6(1),t.MGl("src","../../../../../../assets/product_images/",r.product_Selected.imageUrl,"",t.LSH),t.xp6(3),t.Oqu(r.product_Selected.product_name),t.xp6(2),t.Oqu(r.product_Selected.description),t.xp6(2),t.AsE("Price:",r.product_Selected.price," \xa0\xa0 \xa0 ",r.product_Selected.discount_text,""))}}),e}();function j(e,i){1&e&&t._UZ(0,"img",13)}function K(e,i){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&e){var o=t.oxw().$implicit,r=t.oxw(2);t.xp6(1),t.hij("\xa0/",r.servCommon.GetDisplayNameByKey(r.unit_master,"id",o.unit_id,"unit_name"),"")}}var V=function(e){return{cls_OutOfStock:e}};function $(e,i){if(1&e){var o=t.EpF();t.TgZ(0,"tr",18)(1,"td",19)(2,"button",2),t.NdJ("click",function(){var p=t.CHM(o).$implicit,h=t.oxw(2);return t.KtG(h.editProduct(p))}),t._UZ(3,"img",20),t.qZA()(),t.TgZ(4,"td",21),t._uU(5),t.qZA(),t.TgZ(6,"td",21),t._uU(7),t.YNc(8,K,2,1,"span",22),t.qZA(),t.TgZ(9,"td",23),t._uU(10),t.qZA()()}if(2&e){var r=i.$implicit,a=t.oxw(2);t.Q6J("ngClass",t.VKq(5,V,!0===r.OutOfStock)),t.xp6(5),t.Oqu(r.product_name),t.xp6(2),t.hij("Rs.\xa0",r.price,""),t.xp6(1),t.Q6J("ngIf",1!=r.unit_id),t.xp6(2),t.Oqu(a.servCommon.GetDisplayNameByKey(a.categoryList,"id",r.category_id,"Category"))}}function R(e,i){if(1&e&&(t.TgZ(0,"table",14)(1,"thead",15),t._UZ(2,"th",16),t.TgZ(3,"th"),t._uU(4,"Product"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"Price"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Category"),t.qZA()(),t.TgZ(9,"tbody"),t.YNc(10,$,11,7,"tr",17),t.qZA()()),2&e){var o=t.oxw();t.xp6(10),t.Q6J("ngForOf",o.products)}}var X=function(){function e(i,o,r,a,d){var u=this;this.servUnitmgt=i,this.servCommon=o,this.servCategory=r,this.servProduct=a,this.authServ=d,this.page=1,this.limit=10,this.loading=!1,this.endOfResults=!1,this.param_currUserId=0,this.product_id_for_Addedit=new t.vpe,this.product_id_for_Detail=new t.vpe,this.product_id_Selected=new t.vpe,this.products=[],this.categoryList=[],this.searchNM="",this.servUnitmgt.getUnitMaster().subscribe(function(p){u.unit_master=p})}return e.prototype.onScroll=function(i){(document.documentElement.scrollTop||document.body.scrollTop)+document.documentElement.offsetHeight>=document.documentElement.scrollHeight-100&&!this.loading&&!this.endOfResults&&this.loadProducts()},e.prototype.loadProducts=function(){var i=this;this.loading=!0,this.servProduct.getProducts_chunk(this.page,this.limit,this.param_currUserId.id,"0","noproductIds").subscribe(function(o){var r;console.log("data pulled paging:"+o),0===o.length?i.endOfResults=!0:((r=i.products).push.apply(r,(0,_.ev)([],(0,_.CR)(o),!1)),i.page++),i.loading=!1})},e.prototype.ngOnChanges=function(i){},e.prototype.ngViewInit=function(){this.loadProducts()},e.prototype.ngOnInit=function(){var i=this;this.getCategories(),this.eventsSubscription=this.events.subscribe(function(){return i.get_products()}),this.loadProducts()},e.prototype.getCategories=function(){var i=this;this.servCategory.getCategorys().subscribe(function(o){i.categoryList=o})},e.prototype.ngOnDestroy=function(){this.eventsSubscription.unsubscribe()},e.prototype.addProduct=function(){this.product_id_for_Addedit.emit(0)},e.prototype.editProduct=function(i){this.product_id_for_Detail.emit(void 0),this.product_id_for_Addedit.emit(i.id)},e.prototype.selectProduct=function(i){this.product_id_for_Addedit.emit(void 0),this.product_id_for_Detail.emit(i.id)},e.prototype.get_products=function(){var i=this;null!=this.param_currUserId.id&&this.servProduct.getProducts(this.param_currUserId.id).subscribe(function(r){i.products=r})},e.prototype.searchByName=function(){var i=this;0==this.searchNM.toString().length?(this.page=1,this.limit=5,this.loading=!1,this.endOfResults=!1,this.products.length=0,this.loadProducts()):this.searchNM.toString().length>=3&&this.servProduct.getProductByPartialName(0,this.searchNM,!1,this.param_currUserId.id).subscribe(function(o){i.products=o})},e.\u0275fac=function(o){return new(o||e)(t.Y36(g.G),t.Y36(f.v),t.Y36(P.H),t.Y36(m.M),t.Y36(l.$))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-displayproductpaging"]],hostBindings:function(o,r){1&o&&t.NdJ("scroll",function(d){return r.onScroll(d)},!1,t.Jf7)},inputs:{param_currUserId:"param_currUserId",events:"events"},outputs:{product_id_for_Addedit:"product_id_for_Addedit",product_id_for_Detail:"product_id_for_Detail",product_id_Selected:"product_id_Selected"},features:[t.TTD],decls:14,vars:3,consts:[[1,"row"],[1,"col-1","col-md-1",2,"padding","0px 0px 0"],[1,"btn","btn-danger","btn-sm",2,"padding","0",3,"click"],["src","/assets/icon/add.png","alt","New Product",1,"btn-icon",2,"height","40px"],[1,"col-4","col-md-5",2,"padding","0px 0px 0","vertical-align","bottom"],[2,"float","left"],["src","../../../../assets/icon/search.jpg",2,"height","20px","width","auto"],[2,"padding","1px 0px"],[2,"width","185px",3,"ngModel","ngModelChange","keyup"],[1,"card"],[1,"card-body"],["style","height:300px;width:400px","src","./../../../../../assets/icon/loading.gif",4,"ngIf"],["class","table table-striped",4,"ngIf"],["src","./../../../../../assets/icon/loading.gif",2,"height","300px","width","400px"],[1,"table","table-striped"],[1,"text-primary"],["scope","col"],["style","height: 5px;",3,"ngClass",4,"ngFor","ngForOf"],[2,"height","5px",3,"ngClass"],["width","120px"],["src","/assets/icon/Edit.png","alt","Edit",1,"btn-icon"],["width","200px",2,"height","5px"],[4,"ngIf"],[2,"height","5px"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return r.addProduct()}),t._UZ(3,"img",3),t.qZA()(),t.TgZ(4,"div",4)(5,"div",5),t._UZ(6,"img",6),t._uU(7,"By Name:\xa0\xa0"),t.qZA(),t.TgZ(8,"div",7)(9,"input",8),t.NdJ("ngModelChange",function(d){return r.searchNM=d})("keyup",function(){return r.searchByName()}),t.qZA()()()(),t.TgZ(10,"div",9)(11,"div",10),t.YNc(12,j,1,0,"img",11),t.YNc(13,R,11,1,"table",12),t.qZA()()),2&o&&(t.xp6(9),t.Q6J("ngModel",r.searchNM),t.xp6(3),t.Q6J("ngIf",r.loading),t.xp6(1),t.Q6J("ngIf",!r.loading))},dependencies:[c.mk,c.sg,c.O5,n.Fj,n.JJ,n.On],styles:[".btn-icon[_ngcontent-%COMP%]{width:22px;height:22px}.cls_OutOfStock[_ngcontent-%COMP%]{background-color:red}"]}),e}();function z(e,i){if(1&e&&(t.TgZ(0,"option",8),t._uU(1),t.qZA()),2&e){var o=i.$implicit;t.Q6J("ngValue",o),t.xp6(1),t.Oqu(o.display_name)}}function W(e,i){if(1&e){var o=t.EpF();t.TgZ(0,"div"),t._uU(1," ( Behalf )Select Seller "),t.TgZ(2,"select",5),t.NdJ("ngModelChange",function(d){t.CHM(o);var u=t.oxw();return t.KtG(u.currUser=d)}),t.TgZ(3,"option",6),t._uU(4,"Choose a seller"),t.qZA(),t.YNc(5,z,2,2,"option",7),t.qZA()()}if(2&e){var r=t.oxw();t.xp6(2),t.Q6J("ngModel",r.currUser),t.xp6(3),t.Q6J("ngForOf",r.sellers)}}function tt(e,i){if(1&e){var o=t.EpF();t.TgZ(0,"app-displayproductpaging",9),t.NdJ("product_id_for_Addedit",function(d){t.CHM(o);var u=t.oxw();return t.KtG(u.Prod_Select_Changed_for_Addedit(d))})("product_id_for_Detail",function(d){t.CHM(o);var u=t.oxw();return t.KtG(u.Prod_Select_Changed_for_Detail(d))}),t.qZA()}if(2&e){var r=t.oxw();t.Q6J("events",r.eventsSubject.asObservable())("param_currUserId",r.currUser)}}function et(e,i){if(1&e){var o=t.EpF();t.TgZ(0,"div",2)(1,"app-product-add-edit",10),t.NdJ("formSaved",function(d){t.CHM(o);var u=t.oxw();return t.KtG(u.productformSave_Detected(d))}),t.qZA()()}if(2&e){var r=t.oxw();t.xp6(1),t.Q6J("param_currUserId",r.currUser)("param_Product_id",r.curr_Prod_id_for_Addedit)}}function ot(e,i){if(1&e&&(t.TgZ(0,"div",2),t._UZ(1,"app-product-detail",11),t.qZA()),2&e){var o=t.oxw();t.xp6(1),t.Q6J("param_Product_id",o.curr_Prod_id_for_detail)}}var rt=[{path:"",component:function(){function e(i,o){this.authServ=i,this.servUser=o,this.currUserid=new t.vpe,this.eventsSubject=new A.xQ,this.sellers=[],this.authServ.currentUserValue&&(this.currUser=this.authServ.currentUserValue,this.currUserid.emit(this.authServ.currentUserValue.id),"Seller"==this.authServ.currentUserValue.userrole?this.currUserid.emit(this.authServ.currentUserValue.id):"Admin"==this.authServ.currentUserValue.userrole&&(this.currUserid.emit(0),this.get_Users_seller_Only()))}return e.prototype.get_Users_seller_Only=function(){var i=this;this.servUser.getUsers_Of_role("Seller").subscribe(function(o){i.sellers=o})},e.prototype.emitEventToChild=function(){this.eventsSubject.next()},e.prototype.Prod_Select_Changed_for_Addedit=function(i){this.curr_Prod_id_for_Addedit=i},e.prototype.Prod_Select_Changed_for_Detail=function(i){this.curr_Prod_id_for_detail=i},e.prototype.productformSave_Detected=function(i){this.curr_Prod_id_for_Addedit=null,this.emitEventToChild()},e.prototype.onScroll=function(i){},e.\u0275fac=function(o){return new(o||e)(t.Y36(l.$),t.Y36(C.K))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-manage-products"]],hostBindings:function(o,r){1&o&&t.NdJ("scroll",function(d){return r.onScroll(d)},!1,t.Jf7)},outputs:{currUserid:"currUserid"},decls:6,vars:4,consts:[[4,"ngIf"],[1,"row"],[1,"col-12"],[3,"events","param_currUserId","product_id_for_Addedit","product_id_for_Detail",4,"ngIf"],["class","col-12",4,"ngIf"],["id","pCategory","name","pCategory",1,"form-control",3,"ngModel","ngModelChange"],["value","","disabled",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[3,"events","param_currUserId","product_id_for_Addedit","product_id_for_Detail"],[3,"param_currUserId","param_Product_id","formSaved"],[3,"param_Product_id"]],template:function(o,r){1&o&&(t.YNc(0,W,6,2,"div",0),t.TgZ(1,"div",1)(2,"div",2),t.YNc(3,tt,1,2,"app-displayproductpaging",3),t.qZA(),t.YNc(4,et,2,2,"div",4),t.YNc(5,ot,2,1,"div",4),t.qZA()),2&o&&(t.Q6J("ngIf","Admin"==r.authServ.currentUserValue.userrole),t.xp6(3),t.Q6J("ngIf",null==r.curr_Prod_id_for_Addedit),t.xp6(1),t.Q6J("ngIf",null!=r.curr_Prod_id_for_Addedit),t.xp6(1),t.Q6J("ngIf",null!=r.curr_Prod_id_for_detail))},dependencies:[c.sg,c.O5,n.YN,n.Kr,n.EJ,n.JJ,n.On,G,H,X]}),e}()}],nt=function(){function e(){}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[y.Bz.forChild(rt),y.Bz]}),e}(),dt=function(){function e(){}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,n.u5,n.UX,nt]}),e}()}}]);