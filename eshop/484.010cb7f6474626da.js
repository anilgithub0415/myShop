"use strict";(self.webpackChunkEshop=self.webpackChunkEshop||[]).push([[484],{5484:(Q,p,i)=>{i.r(p),i.d(p,{SellerModule:()=>B});var m=i(6895),l=i(7716),v=i(5567),t=i(4650),y=i(5474),P=i(2114),R=i(7807),u=i(6493);function g(n,e){if(1&n){var o=t.EpF();t.TgZ(0,"tr",7)(1,"td",7),t._uU(2),t.qZA(),t.TgZ(3,"td",7),t._uU(4),t.qZA(),t.TgZ(5,"td",7),t._uU(6),t.qZA(),t.TgZ(7,"td")(8,"button",8),t.NdJ("click",function(){var d=t.CHM(o).$implicit,K=t.oxw();return t.KtG(K.PayCommission_for_Order(d))}),t._UZ(9,"img",9),t.qZA()()()}if(2&n){var r=e.$implicit,a=t.oxw();t.xp6(2),t.Oqu(a.servCommon.GetDisplayNameByKey(a.users,"id",r.userId,"display_name")),t.xp6(2),t.hij(" ",r.EffectiveAmount," "),t.xp6(2),t.hij(" ",r.commission_applicable," ")}}var O=function(){function n(e,o,r,a){var c=this;this.servOrder=e,this.servAuth=o,this.servUser=r,this.servCommon=a,this.servAuth.currentUser.subscribe(function(s){return c.currentUser=s})}return n.prototype.ngOnInit=function(){var e=this;this.get_Users(),this.Get_Completed_Orders_Of_Sellers_For_PayCommission(),this.servOrder.getSellerpaycommission().subscribe(function(o){return e.Sellerpaycommission=o}),setTimeout(function(){console.log("Sellerpaycommission:"+JSON.stringify(e.Sellerpaycommission))},3e3)},n.prototype.Get_Completed_Orders_Of_Sellers_For_PayCommission=function(){var e=this;this.servOrder.Get_Completed_Orders_Of_Sellers_For_PayCommission(this.currentUser.id,"Complete").subscribe(function(o){e.Unpaid_Commission_Orders_Of_Sellers=o,console.log("Unpaid_Commission_Orders_Of_Sellers:"+JSON.stringify(e.Unpaid_Commission_Orders_Of_Sellers))})},n.prototype.PayCommission_for_Order=function(e){var o=this;this.Selected_Order_id_for_PayCommission=e.orderId,this.servOrder.PayCommission_for_Order(e).subscribe(function(r){o.Get_Completed_Orders_Of_Sellers_For_PayCommission(),o.servOrder.loadOrders()})},n.prototype.get_Users=function(){var e=this;this.servUser.getUsers("").subscribe(function(o){e.users=o})},n.\u0275fac=function(o){return new(o||n)(t.Y36(y.E),t.Y36(P.$),t.Y36(R.K),t.Y36(u.v))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-paycommission"]],inputs:{events:"events"},decls:16,vars:1,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"table","table-striped"],[1,"text-primary"],["style","height: 5px;",4,"ngFor","ngForOf"],[2,"height","5px"],[1,"btn","btn-danger","btn-sm",2,"padding","0","width","40px",3,"click"],["src","/assets/icon/paybyatmcard2.png","alt","Edit",1,"btn-icon"]],template:function(o,r){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead",5)(6,"th"),t._uU(7,"Customer"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Amount"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Commission"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Pay"),t.qZA()(),t.TgZ(14,"tbody"),t.YNc(15,g,10,3,"tr",6),t.qZA()()()()()()),2&o&&(t.xp6(15),t.Q6J("ngForOf",r.Unpaid_Commission_Orders_Of_Sellers))},dependencies:[m.sg]}),n}(),C=i(7557),T=i(4766),h=function(){function n(){}return Object.defineProperty(n.prototype,"nativeWindow",{get:function(){return function S(){return window}()},enumerable:!1,configurable:!0}),n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac=function(o){return new(o||n)},providedIn:"root"}),n}(),_=i(529),z=i(567),N=i(8929),Z=i(341),A=i(2654),b=i(7770),I=i(5279),x=i(5283);class U extends N.xQ{constructor(e=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=o<1?1:o,o===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){const o=this._events;o.push(e),o.length>this._bufferSize&&o.shift(),super.next(e)}nextTimeWindow(e){this._events.push(new w(this._getNow(),e)),this._trimBufferThenGetEvents(),super.next(e)}_subscribe(e){const o=this._infiniteTimeWindow,r=o?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,c=r.length;let s;if(this.closed)throw new I.N;if(this.isStopped||this.hasError?s=A.w.EMPTY:(this.observers.push(e),s=new x.W(this,e)),a&&e.add(e=new b.ht(e,a)),o)for(let d=0;d<c&&!e.closed;d++)e.next(r[d]);else for(let d=0;d<c&&!e.closed;d++)e.next(r[d].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||Z.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),o=this._bufferSize,r=this._windowTime,a=this._events,c=a.length;let s=0;for(;s<c&&!(e-a[s].time<r);)s++;return c>o&&(s=Math.max(s,c-o)),s>0&&a.splice(0,s),a}}class w{constructor(e,o){this.time=e,this.value=o}}var E=function(){function n(e){this.document=e,this._loadedLibraries={}}return n.prototype.lazyLoadLibrary=function(e){return(0,z.D)([this.loadScript(e)])},n.prototype.loadScript=function(e){var o=this;if(this._loadedLibraries[e])return this._loadedLibraries[e].asObservable();this._loadedLibraries[e]=new U;var r=this.document.createElement("script");return r.type="text/javascript",r.async=!0,r.src=e,r.onload=function(){o._loadedLibraries[e].next(),o._loadedLibraries[e].complete()},this.document.body.appendChild(r),this._loadedLibraries[e].asObservable()},n.\u0275fac=function(o){return new(o||n)(t.LFG(m.K0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),Y=function(){function n(e,o,r,a){var c=this;this.razorpayService=e,this.cd=o,this.servCommon=r,this.winRef=a,this.param_RP_currency="INR",this.param_RP_Notes="Commission Paid",this.showModal=!1,this.RAZORPAY_OPTIONS={key:"rzp_test_vmjtxiBj8VbrZj",amount:this.param_RP_Amount,name:"Pay",order_id:this.param_RP_Orderid,handler:function(s){console.log(s.razorpay_payment_id),console.log(s.razorpay_order_id),console.log(s.razorpay_signature)},description:"Load Wallet",image:"https://livestatic.novopay.in/resources/img/nodeapp/img/Logo_NP.jpg",prefill:{name:"",email:"test@test.com",contact:"989084`532",method:""},modal:{},theme:{color:"#0096C5"}},this.cancelCallback=function(s){c.servCommon.presentToast("middle","cancelCallback working..."+s.description+"errorcode:"+s.code)},this.razorPaySuccessHandler=function(s){c.servCommon.presentToast("middle"," Generated orderid:"+c.param_RP_Orderid),c.razorpayResponse="Razorpay Response",c.showModal=!0,c.cd.detectChanges()}}return n.prototype.ngOnInit=function(){this.razorpayService.lazyLoadLibrary("https://checkout.razorpay.com/v1/checkout.js").subscribe()},n.prototype.proceed=function(){this.RAZORPAY_OPTIONS.amount=this.param_RP_Amount+"00",this.RAZORPAY_OPTIONS.handler=this.razorPaySuccessHandler.bind(this);var e=new this.winRef.nativeWindow.Razorpay(this.RAZORPAY_OPTIONS);e.on("payment.cancel",this.cancelCallback);var o=this;e.on("payment.failed",function(r){o.responseerrorcode=r.error.code,o.responseerrordescription=r.error.description,o.servCommon.presentToast("middle",r.error.code+"-"+r.error.description)}),e.open()},n.\u0275fac=function(o){return new(o||n)(t.Y36(E),t.Y36(t.sBO),t.Y36(u.v),t.Y36(h))},n.\u0275cmp=t.Xpm({type:n,selectors:[["razorpay"]],inputs:{param_RP_Orderid:"param_RP_Orderid",param_RP_Amount:"param_RP_Amount",param_RP_currency:"param_RP_currency",param_RP_receipt:"param_RP_receipt",param_RP_Notes:"param_RP_Notes"},decls:4,vars:1,consts:[["color","primary",3,"click"]],template:function(o,r){1&o&&(t.TgZ(0,"p"),t._uU(1,"razorpay works!"),t.qZA(),t.TgZ(2,"button",0),t.NdJ("click",function(){return r.proceed()}),t._uU(3),t.qZA()),2&o&&(t.xp6(3),t.hij("Pay Rs. ",r.param_RP_Amount,""))}}),n}();function M(n,e){if(1&n){var o=t.EpF();t.TgZ(0,"div")(1,"button",3),t.NdJ("click",function(){t.CHM(o);var a=t.oxw();return t.KtG(a.createOrder())}),t._uU(2,"Create Order Id"),t.qZA()()}}function F(n,e){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"razorpay",4),t.qZA()),2&n){var o=t.oxw();t.xp6(1),t.Q6J("param_RP_Orderid",o.RPOrderid)("param_RP_Amount",o.RPamount)("param_RP_currency",o.RPcurrency)("param_RP_receipt",o.RPreceipt)("param_RP_Notes",o.RPnotes)}}var L=function(){function n(e,o){this.winRef=e,this.http=o,this.apiUrl=T.N.apiUrl}return n.prototype.ngOnInit=function(){},n.prototype.createOrder=function(){var e=this,o=this.apiUrl+"Razor",r={amount:5e3,currency:"INR",receipt:"RPreceipt",notes:"RPnotes"};console.log("creating order with options:"+JSON.stringify(r)),this.http.post(o,r).subscribe(function(a){console.log("rrrrrrrrrrrrresponse:"+JSON.stringify(a.id)),e.RPOrderid=a.id,e.RPamount=5e3,e.RPcurrency="INR",e.RPreceipt="RPreceipt",e.RPnotes="RPnotes"})},n.\u0275fac=function(o){return new(o||n)(t.Y36(h),t.Y36(_.eN))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-test-razor-pay"]],decls:6,vars:2,consts:[[1,"row"],[1,"col-6>"],[4,"ngIf"],[1,"btn","btn-danger","btn-sm",3,"click"],[3,"param_RP_Orderid","param_RP_Amount","param_RP_currency","param_RP_receipt","param_RP_Notes"]],template:function(o,r){1&o&&(t.TgZ(0,"p"),t._uU(1,"test-razor-pay works!"),t.qZA(),t.TgZ(2,"div",0)(3,"div",1),t.YNc(4,M,3,0,"div",2),t.YNc(5,F,2,5,"div",2),t.qZA()()),2&o&&(t.xp6(4),t.Q6J("ngIf",!r.RPOrderid),t.xp6(1),t.Q6J("ngIf",r.RPOrderid))},dependencies:[m.O5,Y]}),n}(),j=[{path:"aa",component:C.N},{path:"",loadChildren:function(){return i.e(909).then(i.bind(i,9909)).then(function(n){return n.ManageProductsModule})}},{path:"manage_product",loadChildren:function(){return i.e(909).then(i.bind(i,9909)).then(function(n){return n.ManageProductsModule})}},{path:"manage_orders",loadChildren:function(){return i.e(625).then(i.bind(i,3637)).then(function(n){return n.ManageOrdersModule})}},{path:"manage_promotions",loadChildren:function(){return i.e(865).then(i.bind(i,865)).then(function(n){return n.ManagePromotionsModule})}},{path:"paycommission",component:O},{path:"testRP",component:L},{path:"dboy",component:v.l}],W=function(){function n(){}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.Bz.forChild(j),l.Bz]}),n}(),f=i(4006),J=i(3738),G=i(460),B=function(){function n(){}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.ez,f.u5,f.UX,J.W,G.kn.forRoot(),W]}),n}()}}]);