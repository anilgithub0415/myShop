"use strict";(self.webpackChunkEshop=self.webpackChunkEshop||[]).push([[268],{5268:(R,f,m)=>{m.r(f),m.d(f,{ManageCommissionModule:()=>L});var l=m(6895),a=m(7716),A=m(8929),e=m(4650),g=m(6493),h=m(2011),v=m(4350),C=m(6173),u=m(7807),p=m(2114);function Z(t,i){if(1&t){var o=e.EpF();e.TgZ(0,"tr",8)(1,"td")(2,"button",0),e.NdJ("click",function(){var _=e.CHM(o).$implicit,Q=e.oxw();return e.KtG(Q.editProduct(_))}),e._UZ(3,"img",9),e.qZA()(),e.TgZ(4,"td",8),e._uU(5),e.qZA(),e.TgZ(6,"td",8),e._uU(7),e.qZA(),e.TgZ(8,"td",8),e._uU(9),e.qZA(),e.TgZ(10,"td",8),e._uU(11),e.qZA()()}if(2&t){var n=i.$implicit,s=e.oxw();e.xp6(5),e.Oqu(s.servCommon.GetDisplayNameByKey(s.users,"id",n.seller_id,"display_name")),e.xp6(2),e.Oqu(n.commission_percent),e.xp6(2),e.Oqu(n.credit_limit),e.xp6(2),e.Oqu(n.consumed_credit)}}var P=function(){function t(i,o,n,s,c,d){this.servCommon=i,this.servCategory=o,this.servProduct=n,this.servSellerCommission=s,this.servUser=c,this.authServ=d,this.product_id_for_Addedit=new e.vpe,this.product_id_for_Detail=new e.vpe,this.product_id_Selected=new e.vpe,this.categoryList=[]}return t.prototype.ngOnInit=function(){var i=this;this.get_Users(),setTimeout(function(){i.get_seller_commission_percents(),i.getCategories(),i.eventsSubscription=i.events.subscribe(function(){return i.get_seller_commission_percents()})},2e3)},t.prototype.getCategories=function(){var i=this;this.servCategory.getCategorys().subscribe(function(o){i.categoryList=o})},t.prototype.ngOnDestroy=function(){this.eventsSubscription.unsubscribe()},t.prototype.get_Users=function(){var i=this;this.servUser.getUsers("").subscribe(function(o){i.users=o})},t.prototype.addProduct=function(){this.product_id_for_Addedit.emit(0)},t.prototype.editProduct=function(i){this.product_id_for_Detail.emit(void 0),this.product_id_for_Addedit.emit(i.seller_id)},t.prototype.selectProduct=function(i){this.product_id_for_Addedit.emit(void 0),this.product_id_for_Detail.emit(i.id)},t.prototype.get_products_notinuse=function(){var i=this;this.servProduct.getProducts(this.authServ.currentUserValue.id).subscribe(function(o){i.Seller_Commission_Setting=o,console.log("aaaaaaa:"+JSON.stringify(i.authServ.currentUserValue.id))})},t.prototype.get_seller_commission_percents=function(){var i=this;this.servSellerCommission.get_Seller_Commission_Setting(this.authServ.currentUserValue.id,!1).subscribe(function(o){i.Seller_Commission_Setting=o,console.log("aaaaaaa:"+JSON.stringify(i.authServ.currentUserValue.id))})},t.\u0275fac=function(o){return new(o||t)(e.Y36(g.v),e.Y36(h.H),e.Y36(v.M),e.Y36(C.b),e.Y36(u.K),e.Y36(p.$))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-display-commision-percents"]],inputs:{events:"events"},outputs:{product_id_for_Addedit:"product_id_for_Addedit",product_id_for_Detail:"product_id_for_Detail",product_id_Selected:"product_id_Selected"},decls:17,vars:1,consts:[[1,"btn","btn-danger","btn-sm",2,"padding","0",3,"click"],["src","/assets/icon/add.png","alt","New Product",1,"btn-icon",2,"height","40px"],[1,"card"],[1,"card-body"],[1,"table","table-striped"],[1,"text-primary"],["scope","col"],["style","height: 5px;",4,"ngFor","ngForOf"],[2,"height","5px"],["src","/assets/icon/Edit.png","alt","Edit",1,"btn-icon",2,"height","20px"]],template:function(o,n){1&o&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return n.addProduct()}),e._UZ(1,"img",1),e.qZA(),e.TgZ(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead",5),e._UZ(6,"th",6),e.TgZ(7,"th"),e._uU(8,"Seller"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Percent"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Credit_limit"),e.qZA(),e.TgZ(13,"th"),e._uU(14,"Consumed"),e.qZA()(),e.TgZ(15,"tbody"),e.YNc(16,Z,12,4,"tr",7),e.qZA()()()()),2&o&&(e.xp6(16),e.Q6J("ngForOf",n.Seller_Commission_Setting))},dependencies:[l.sg]}),t}(),y=m(655),r=m(4006),T=m(4704),S=m(7158);function U(t,i){1&t&&(e.TgZ(0,"span",17),e._uU(1," commission_percent not provided. "),e.qZA())}function k(t,i){1&t&&(e.TgZ(0,"span",17),e._uU(1," credit_limit not provided. "),e.qZA())}function O(t,i){1&t&&(e.TgZ(0,"span",17),e._uU(1," RP_key not provided. "),e.qZA())}var q=function(t){return{"disabled-select":t}},x=function(){function t(i,o,n,s,c,d,_){this.formBuilder=i,this.servProduct=o,this.servUser=n,this.servSellercommission=s,this.servCategory=c,this.authServ=d,this.notify=_,this.selectedSeller_id=null,this.formSaved=new e.vpe,this.addedit_OPmode="",this.defaultDate="1987-06-30",this.isSubmitted=!1,this.isSubmitted_uploadform=!1,this.categoryList=[],this.sellerList=[],this.submitClicked=""}return t.prototype.ngOnInit=function(){this.myForm=this.formBuilder.group({seller_id:[""],seller_name:["",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(50)]],commission_percent:["",[r.kI.min(0),r.kI.max(50)]],credit_limit:["",[r.kI.min(1e3),r.kI.max(1e4)]],RP_key:["",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(100)]]}),this.getSellerList()},t.prototype.ngOnChanges=function(i){return(0,y.mG)(this,void 0,void 0,function(){return(0,y.Jh)(this,function(o){switch(o.label){case 0:return i.param_Product_id?(0==this.param_Product_id?(this.addedit_OPmode="Add",this.myForm.reset()):this.addedit_OPmode="Edit",this.param_Product_id?[4,this.get_Seller_Commission_Setting()]:[3,2]):[3,2];case 1:o.sent(),this.myForm.patchValue({seller_id:this.product_Selected.seller_id,seller_name:this.product_Selected.seller_name,commission_percent:this.product_Selected.commission_percent,credit_limit:this.product_Selected.credit_limit,RP_key:this.product_Selected.RP_key}),o.label=2;case 2:return[2]}})})},t.prototype.getSellerList=function(){var i=this;this.servUser.getUsers_Of_role("Seller").subscribe(function(o){i.sellerList=o})},t.prototype.get_Seller_Commission_Setting=function(){var i=this;return new Promise(function(o,n){i.servSellercommission.get_Seller_Commission_Setting(i.param_Product_id,!0).subscribe(function(s){i.product_Selected=s[0],console.log("aaaaaaaaaaaaaaaa here is get data of comm seting:"+JSON.stringify(s[0])),o(!0)})})},Object.defineProperty(t.prototype,"errorControl",{get:function(){return this.myForm.controls},enumerable:!1,configurable:!0}),t.prototype.onSubmitClick=function(){this.submitClicked="Submit"},t.prototype.onDeleteClick=function(){this.submitClicked="Delete"},t.prototype.onCancelClick=function(){this.submitClicked="Cancel"},t.prototype.onSubmit=function(){var i=this;if("Cancel"==this.submitClicked)return this.formSaved.emit(!0),this.myForm.reset(),void(this.addedit_OPmode="");"Add"==this.addedit_OPmode?(this.myForm.patchValue({seller_id:this.selectedSeller_id}),this.servSellercommission.update_Seller_Commission_Setting(this.myForm.value).subscribe(function(o){console.log("trying to Add commission setting..."),i.formSaved.emit(!0),i.myForm.reset(),console.log("update product done..."),i.notify.showInfo("Commission Setting Saved...","Commission")})):"Edit"==this.addedit_OPmode&&this.servSellercommission.update_Seller_Commission_Setting(this.myForm.value).subscribe(function(o){console.log("trying to update product..."),i.formSaved.emit(!0),i.myForm.reset(),i.notify.showInfo("Update Commission Setting done...","Commission")})},t.prototype.onSelectProduct=function(i){console.log("in onSelectProduct"),this.selectedSeller_id=i.id},t.\u0275fac=function(o){return new(o||t)(e.Y36(r.qu),e.Y36(v.M),e.Y36(u.K),e.Y36(C.b),e.Y36(h.H),e.Y36(p.$),e.Y36(T.g))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-commision-percents-add-edit"]],inputs:{param_Product_id:"param_Product_id"},outputs:{formSaved:"formSaved"},features:[e.TTD],decls:32,vars:8,consts:[[1,"card"],[1,"card-body"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row"],[1,"'col-12"],[1,"form-group"],["for","product_name"],["formControlName","seller_name","id","seller_name","bindLabel","display_name",1,"form-control",3,"items","ngClass","change"],[1,"col-4"],["for","commission_percent"],["type","number","formControlName","commission_percent","id","commission_percent",1,"form-control"],["class","error",4,"ngIf"],["for","credit_limit"],["type","number","formControlName","credit_limit","id","credit_limit",1,"form-control"],["for","RP_key"],["type","text","formControlName","RP_key","id","RP_key",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"error"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"form",2),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"label",6),e._uU(7,"Seller Name"),e.qZA(),e.TgZ(8,"ng-select",7),e.NdJ("change",function(c){return n.onSelectProduct(c)}),e.qZA()()()(),e.TgZ(9,"div",3)(10,"div",8)(11,"div",5)(12,"label",9),e._uU(13,"commission_percent"),e.qZA(),e._UZ(14,"input",10),e.YNc(15,U,2,0,"span",11),e.qZA()(),e.TgZ(16,"div",8)(17,"div",5)(18,"label",12),e._uU(19,"credit_limit"),e.qZA(),e._UZ(20,"input",13),e.YNc(21,k,2,0,"span",11),e.qZA()(),e.TgZ(22,"div",8)(23,"div",5)(24,"label",14),e._uU(25,"RP_key"),e.qZA(),e._UZ(26,"input",15),e.YNc(27,O,2,0,"span",11),e.qZA()()(),e.TgZ(28,"button",16),e.NdJ("click",function(){return n.onSubmitClick()}),e._uU(29,"Submit"),e.qZA(),e.TgZ(30,"button",16),e.NdJ("click",function(){return n.onCancelClick()}),e._uU(31,"Cancel"),e.qZA()()()()),2&o&&(e.xp6(2),e.Q6J("formGroup",n.myForm),e.xp6(6),e.Q6J("items",n.sellerList)("ngClass",e.VKq(6,q,"Edit"===n.addedit_OPmode)),e.xp6(7),e.Q6J("ngIf",n.isSubmitted&&(null==n.errorControl.commission_percent.errors?null:n.errorControl.commission_percent.errors.required)),e.xp6(6),e.Q6J("ngIf",n.isSubmitted&&(null==n.errorControl.credit_limit.errors?null:n.errorControl.credit_limit.errors.required)),e.xp6(6),e.Q6J("ngIf",n.isSubmitted&&(null==n.errorControl.RP_key.errors?null:n.errorControl.RP_key.errors.required)))},dependencies:[l.mk,l.O5,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,S.w9],styles:[".disabled-select[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}"]}),t}();function J(t,i){if(1&t){var o=e.EpF();e.TgZ(0,"app-display-commision-percents",4),e.NdJ("product_id_for_Addedit",function(c){e.CHM(o);var d=e.oxw();return e.KtG(d.Prod_Select_Changed_for_Addedit(c))})("product_id_for_Detail",function(c){e.CHM(o);var d=e.oxw();return e.KtG(d.Prod_Select_Changed_for_Detail(c))}),e.qZA()}if(2&t){var n=e.oxw();e.Q6J("events",n.eventsSubject.asObservable())}}function N(t,i){if(1&t){var o=e.EpF();e.TgZ(0,"div",1)(1,"app-commision-percents-add-edit",5),e.NdJ("formSaved",function(c){e.CHM(o);var d=e.oxw();return e.KtG(d.productformSave_Detected(c))}),e.qZA()()}if(2&t){var n=e.oxw();e.xp6(1),e.Q6J("param_Product_id",n.curr_Prod_id_for_Addedit)}}var D=function(){function t(){this.eventsSubject=new A.xQ}return t.prototype.emitEventToChild=function(){this.eventsSubject.next()},t.prototype.Prod_Select_Changed_for_Addedit=function(i){this.curr_Prod_id_for_Addedit=i},t.prototype.Prod_Select_Changed_for_Detail=function(i){this.curr_Prod_id_for_detail=i},t.prototype.productformSave_Detected=function(i){this.curr_Prod_id_for_Addedit=null,this.emitEventToChild()},t.prototype.onScroll=function(i){},t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-commission-setting"]],hostBindings:function(o,n){1&o&&e.NdJ("scroll",function(c){return n.onScroll(c)},!1,e.Jf7)},decls:4,vars:2,consts:[[1,"row"],[1,"col-12"],[3,"events","product_id_for_Addedit","product_id_for_Detail",4,"ngIf"],["class","col-12",4,"ngIf"],[3,"events","product_id_for_Addedit","product_id_for_Detail"],[3,"param_Product_id","formSaved"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,J,1,1,"app-display-commision-percents",2),e.qZA(),e.YNc(3,N,2,1,"div",3),e.qZA()),2&o&&(e.xp6(2),e.Q6J("ngIf",null==n.curr_Prod_id_for_Addedit),e.xp6(1),e.Q6J("ngIf",null!=n.curr_Prod_id_for_Addedit))},dependencies:[l.O5,P,x]}),t}(),b=function(t){return{active:t}},M=function(){function t(){this.selectedOption="commission_setting"}return t.prototype.selectOption=function(i){this.selectedOption=i},t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-manage-commission"]],decls:12,vars:6,consts:[[1,"row"],[1,"col-12"],[1,"navbar","navbar-light","bg-light"],[1,"container-fluid"],[1,"nav","d-flex"],[1,"nav-item",3,"ngClass"],["routerLink","commission_setting","href","#",1,"nav-link",3,"click"],["routerLink","seller_commission","href","#",1,"nav-link",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),e.NdJ("click",function(){return n.selectOption("commission_setting")}),e._uU(7," Commission_Setting"),e.qZA()(),e.TgZ(8,"li",5)(9,"a",7),e.NdJ("click",function(){return n.selectOption("seller_commission")}),e._uU(10," Seller_Commission"),e.qZA()()()()(),e._UZ(11,"router-outlet"),e.qZA()()),2&o&&(e.xp6(5),e.Q6J("ngClass",e.VKq(2,b,"commission_setting"===n.selectedOption)),e.xp6(3),e.Q6J("ngClass",e.VKq(4,b,"seller_commission"===n.selectedOption)))},dependencies:[l.mk,a.lC,a.rH],styles:[".nav[_ngcontent-%COMP%]{background-color:#c6a06e;border-radius:7px;height:35px}.active[_ngcontent-%COMP%]{background-color:#000;border:1px solid white;color:#fff;border-radius:7px;height:35px}"]}),t}(),F=m(5474);function I(t,i){if(1&t&&(e.TgZ(0,"tr",7)(1,"td",7),e._uU(2),e.qZA(),e.TgZ(3,"td",7),e._uU(4),e.qZA(),e.TgZ(5,"td",7),e._uU(6),e.qZA()()),2&t){var o=i.$implicit,n=e.oxw();e.xp6(2),e.Oqu(n.servCommon.GetDisplayNameByKey(n.users,"id",o.seller_id,"display_name")),e.xp6(2),e.hij(" ",o.EffectiveAmountSum," "),e.xp6(2),e.hij(" ",o.commission_applicableSum," ")}}var Y=[{path:"",component:M,children:[{path:"",redirectTo:"commission_setting",pathMatch:"full"},{path:"commission_setting",component:D},{path:"seller_commission",component:function(){function t(i,o,n,s){var c=this;this.servOrder=i,this.servAuth=o,this.servUser=n,this.servCommon=s,this.servAuth.currentUser.subscribe(function(d){return c.currentUser=d})}return t.prototype.ngOnInit=function(){this.get_Users(),this.Get_Sellers_UNPAID_Commission_Summary()},t.prototype.Get_Sellers_UNPAID_Commission_Summary=function(){var i=this;this.servOrder.Get_Sellers_UNPAID_Commission_Summary("Complete").subscribe(function(o){i.Sellers_UNPAID_Commission_Summary=o})},t.prototype.get_Users=function(){var i=this;this.servUser.getUsers("").subscribe(function(o){i.users=o})},t.\u0275fac=function(o){return new(o||t)(e.Y36(F.E),e.Y36(p.$),e.Y36(u.K),e.Y36(g.v))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-seller-commission"]],decls:14,vars:1,consts:[[1,"row"],[1,"col-12"],[1,"card"],[1,"card-body"],[1,"table","table-striped"],[1,"text-primary"],["style","height: 5px;",4,"ngFor","ngForOf"],[2,"height","5px"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead",5)(6,"th"),e._uU(7,"Seller"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Amount"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Commission T.0o Receive"),e.qZA()(),e.TgZ(12,"tbody"),e.YNc(13,I,7,3,"tr",6),e.qZA()()()()()()),2&o&&(e.xp6(13),e.Q6J("ngForOf",n.Sellers_UNPAID_Commission_Summary))},dependencies:[l.sg]}),t}()}]}],w=function(){function t(){}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[a.Bz.forChild(Y),a.Bz]}),t}(),L=function(){function t(){}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.ez,r.u5,r.UX,S.A0,w]}),t}()}}]);