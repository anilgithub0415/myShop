"use strict";(self.webpackChunkEshop=self.webpackChunkEshop||[]).push([[10],{9010:(vt,k,c)=>{c.r(k),c.d(k,{ManagePromotionsModule:()=>yt});var m=c(6895),Z=c(7716),t=c(4650),N=function(r){return{active:r}},U=function(){function r(){this.selectedOption="Product-Promotions"}return r.prototype.selectOption=function(o){this.selectedOption=o},r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-manage-promotions"]],decls:10,vars:6,consts:[[1,"navbar","navbar-light","bg-light"],[1,"container-fluid"],[1,"nav","d-flex"],[1,"nav-item",3,"ngClass"],["routerLink","Product-Promotions","href","#",1,"nav-link",3,"click"],["routerLink","Order-Promotions","href","#",1,"nav-link",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"nav",0)(1,"div",1)(2,"ul",2)(3,"li",3)(4,"a",4),t.NdJ("click",function(){return i.selectOption("Product-Promotions")}),t._uU(5," Product Promotion"),t.qZA()(),t.TgZ(6,"li",3)(7,"a",5),t.NdJ("click",function(){return i.selectOption("Order-Promotions")}),t._uU(8," Order Promotion "),t.qZA()()()()(),t._UZ(9,"router-outlet")),2&e&&(t.xp6(3),t.Q6J("ngClass",t.VKq(2,N,"Product-Promotions"===i.selectedOption)),t.xp6(3),t.Q6J("ngClass",t.VKq(4,N,"Order-Promotions"===i.selectedOption)))},dependencies:[m.mk,Z.lC,Z.rH],styles:[".nav[_ngcontent-%COMP%]{background-color:#c6a06e;border-radius:7px;height:35px}.active[_ngcontent-%COMP%]{background-color:red;border:1px solid white;color:#fff;border-radius:7px;height:35px}"]}),r}(),T=c(8929),D=c(6493),f=c(2011),h=c(4350),g=c(6532),y=c(2114),q=c(7807);function I(r,o){if(1&r){var e=t.EpF();t.TgZ(0,"tr",8)(1,"td",9)(2,"button",0),t.NdJ("click",function(){var s=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.editProduct(s))}),t._UZ(3,"img",10),t.qZA()(),t.TgZ(4,"td",11),t._uU(5),t.qZA()()}if(2&r){var i=o.$implicit;t.xp6(5),t.Oqu(i.promotionName)}}var J=function(){function r(o,e,i,n,d,s){this.servCommon=o,this.servCategory=e,this.servProduct=i,this.servPromoProduct=n,this.authServ=d,this.servUser=s,this.promoproduct_id_for_Addedit=new t.vpe,this.product_id_for_Detail=new t.vpe,this.product_id_Selected=new t.vpe,this.categoryList=[],this.sellerList=[]}return r.prototype.ngOnInit=function(){var o=this;this.getProductList(),this.get_order_promotions(),this.getSellerList(),this.getCategories(),this.eventsSubscription=this.events.subscribe(function(){return o.get_order_promotions()})},r.prototype.getCategories=function(){var o=this;this.servCategory.getCategorys().subscribe(function(e){o.categoryList=e})},r.prototype.getSellerList=function(){var o=this;this.servUser.getUsers_Of_role("Seller").subscribe(function(e){o.sellerList=e})},r.prototype.ngOnDestroy=function(){this.eventsSubscription.unsubscribe()},r.prototype.addProduct=function(){this.promoproduct_id_for_Addedit.emit(0)},r.prototype.editProduct=function(o){this.product_id_for_Detail.emit(void 0),this.promoproduct_id_for_Addedit.emit(o.id)},r.prototype.selectProduct=function(o){this.promoproduct_id_for_Addedit.emit(void 0),this.product_id_for_Detail.emit(o.id)},r.prototype.getProductList=function(){var o=this;this.servProduct.getProducts_All().subscribe(function(e){o.products=e})},r.prototype.get_order_promotions=function(){var o=this;this.servPromoProduct.get_Promotion_Order_Seller(this.authServ.currentUserValue.id).subscribe(function(e){o.promotions_product=e})},r.\u0275fac=function(e){return new(e||r)(t.Y36(D.v),t.Y36(f.H),t.Y36(h.M),t.Y36(g.q),t.Y36(y.$),t.Y36(q.K))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-display-order-promotion"]],inputs:{events:"events"},outputs:{promoproduct_id_for_Addedit:"promoproduct_id_for_Addedit",product_id_for_Detail:"product_id_for_Detail",product_id_Selected:"product_id_Selected"},decls:11,vars:1,consts:[[1,"btn","btn-danger","btn-sm",2,"padding","0",3,"click"],["src","/assets/icon/add.png","alt","Edit",1,"btn-icon",2,"height","40px"],[1,"card"],[1,"card-body"],[1,"table","table-striped"],[1,"text-primary"],["scope","col"],["style","height: 5px;",4,"ngFor","ngForOf"],[2,"height","5px"],[2,"width","60px"],["width","30px","src","/assets/icon/Edit.png","alt","Edit",1,"btn-icon",2,"height","30px"],[2,"width","auto","height","5px"]],template:function(e,i){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return i.addProduct()}),t._UZ(1,"img",1),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead",5),t._UZ(6,"th",6),t.TgZ(7,"th"),t._uU(8,"Promotion"),t.qZA()(),t.TgZ(9,"tbody"),t.YNc(10,I,6,1,"tr",7),t.qZA()()()()),2&e&&(t.xp6(10),t.Q6J("ngForOf",i.promotions_product))},dependencies:[m.sg]}),r}(),l=c(655),a=c(4006),O=c(6776),F=c(4704),_=c(460);function M(r,o){if(1&r&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&r){var e=o.$implicit;t.Q6J("value",e.promotionType),t.xp6(1),t.Oqu(e.promotionType)}}function Y(r,o){1&r&&(t.TgZ(0,"span",21),t._uU(1," promoType not provided. "),t.qZA())}function Q(r,o){1&r&&(t.TgZ(0,"div",3)(1,"div",17)(2,"div",5)(3,"label",22),t._uU(4,"discountPercentage"),t.qZA(),t._UZ(5,"input",23),t.qZA()(),t.TgZ(6,"div",17)(7,"div",5)(8,"label",24),t._uU(9,"discountAmount"),t.qZA(),t._UZ(10,"input",25),t.qZA()(),t.TgZ(11,"div",17)(12,"div",5)(13,"label",26),t._uU(14,"minOrderAmount"),t.qZA(),t._UZ(15,"input",27),t.qZA()()())}var E=function(){function r(o,e,i,n,d,s,u,p){this.formBuilder=o,this.servProduct=e,this.servCategory=i,this.servPromotion=n,this.authServ=d,this.injector=s,this.datePipe=u,this.notify=p,this.timepickerConfig=function x(){return Object.assign(new O.Sm,{timeFormat:"hh:mm A",showMeridian:!0,containerClass:"theme-default",hourStep:1,minuteStep:15,readonlyInput:!1,mousewheel:!0,arrowkeys:!0})}(),this.formSaved=new t.vpe,this.addedit_OPmode="",this.defaultDate="1987-06-30",this.isSubmitted=!1,this.isSubmitted_uploadform=!1,this.PromotionTypeList=[],this.ProductList=[],this.submitClicked="",this.bsConfig={dateInputFormat:"DD/MM/YYYY HH:mm:ss",containerClass:"theme-default"}}return r.prototype.ngAfterViewInit=function(){this.getPromotionMaster(),this.getProductList()},r.prototype.getPromotionMaster=function(){var o=this;this.servPromotion.getPromotionMast().subscribe(function(e){o.PromotionTypeList=e})},r.prototype.getProductList=function(){var o=this,e="";null!=this.authServ.currentUserValue.id&&(e=this.authServ.currentUserValue.id),this.servProduct.getProducts_Ofseller(e).subscribe(function(i){o.ProductList=i})},r.prototype.ngOnInit=function(){this.myForm=this.formBuilder.group({id:[],seller_id:["",a.kI.required],promoType:["",a.kI.required],promotionName:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(50)]],discountAmount:["",[a.kI.min(10),a.kI.max(9999)]],discountPercentage:["",[a.kI.min(1),a.kI.max(90)]],minOrderAmount:["",[a.kI.required,a.kI.min(100)]],startDate:["",a.kI.required],endDate:["",a.kI.required]})},r.prototype.formatDate=function(o){var e=o.getDate(),i=o.getMonth()+1,n=o.getFullYear(),d=o.getHours(),s=o.getMinutes(),u=o.getSeconds(),p=e<10?"0".concat(e):"".concat(e),v=i<10?"0".concat(i):"".concat(i),P="".concat(n),b=d<10?"0".concat(d):"".concat(d),C=s<10?"0".concat(s):"".concat(s),S=u<10?"0".concat(u):"".concat(u);return"".concat(p,"/").concat(v,"/").concat(P," ").concat(b,":").concat(C,":").concat(S)},r.prototype.formatDate1=function(o){var e=o.getDate(),i=o.getMonth()+1,n=e<10?"0".concat(e):"".concat(e),d=i<10?"0".concat(i):"".concat(i);return"".concat(n,"-").concat(d,"-").concat(o.getFullYear())},r.prototype.format2Date=function(o){var e=o.getDate()+1,i=o.getMonth()+1,n=e<10?"0".concat(e):"".concat(e),d=i<10?"0".concat(i):"".concat(i);return"".concat(o.getFullYear(),"/").concat(d,"/").concat(n)},r.prototype.ngOnChanges=function(o){return(0,l.mG)(this,void 0,void 0,function(){var e,i,n;return(0,l.Jh)(this,function(d){switch(d.label){case 0:return o.param_PromoProd_id?(this.getPromotionMaster(),0==this.param_PromoProd_id?(this.addedit_OPmode="Add",this.myForm.reset()):this.addedit_OPmode="Edit",console.log("detecting change param_PromoProd_id:"+this.param_PromoProd_id),this.param_PromoProd_id?[4,this.get_Product()]:[3,2]):[3,2];case 1:d.sent(),e="",null!=this.authServ.currentUserValue.id&&(e=this.authServ.currentUserValue.id),console.log("product_Selected.startDate order:--\x3e"+this.product_Selected.startDate+"<--"),console.log("transformmatted startDate:"+this.datePipe.transform(this.product_Selected.startDate,"dd/MM/yyyy")),console.log("product_Selected.minOrderAmount order:--\x3e"+this.product_Selected.minOrderAmount+"<--"),i=this.datePipe.transform(this.product_Selected.startDate,"dd/MM/yyyy HH:mm:ss"),n=this.datePipe.transform(this.product_Selected.endDate,"dd/MM/yyyy HH:mm:ss"),console.log("patching id value:"+this.product_Selected.id),console.log("patching order sdate:"+i),this.myForm.patchValue({id:this.product_Selected.id,seller_id:e,promoType:this.product_Selected.promotionType,promotionName:this.product_Selected.promotionName,discountAmount:this.product_Selected.discountAmount,discountPercentage:this.product_Selected.discountPercentage,startDate:i,endDate:n,minOrderAmount:this.product_Selected.minOrderAmount}),d.label=2;case 2:return[2]}})})},r.prototype.get_Product=function(){var o=this;return new Promise(function(e,i){o.servPromotion.get_Promotion_OrderById(o.param_PromoProd_id).subscribe(function(n){o.product_Selected=n[0],console.log("mm in getpromotion of order res[0] is:"+JSON.stringify(n[0])),e(!0)})})},r.prototype.onImageSelected=function(o){this.imageFile=o.target.files[0]},Object.defineProperty(r.prototype,"errorControl",{get:function(){return this.myForm.controls},enumerable:!1,configurable:!0}),r.prototype.onSubmitClick=function(){this.submitClicked="Submit"},r.prototype.onDeleteClick=function(){this.submitClicked="Delete"},r.prototype.onCancelClick=function(){this.submitClicked="Cancel"},r.prototype.onSubmit=function(){var o=this;if("Delete"==this.submitClicked)return console.log(" hey i want to delete"),console.log("this.myForm.value:"+JSON.stringify(this.myForm.value)),void this.servPromotion.deletePromotion_Order(this.myForm.value).subscribe(function(i){o.formSaved.emit(!0),o.myForm.reset(),o.addedit_OPmode=""});if("Cancel"==this.submitClicked)return this.formSaved.emit(!0),this.myForm.reset(),void(this.addedit_OPmode="");var e="";null!=this.authServ.currentUserValue.id&&(e=this.authServ.currentUserValue.id),this.myForm.patchValue({seller_id:e}),console.log(this.myForm.value),console.log("this.authServ.currentUserValue!.id:"+e),"Add"==this.addedit_OPmode?(this.isSubmitted=!0,console.log("this.myForm.value:"+JSON.stringify(this.myForm.value)),console.log("PromotionTypeList:"+JSON.stringify(this.PromotionTypeList)),this.servPromotion.addPromotion_Order(this.myForm.value).subscribe(function(i){o.formSaved.emit(!0),o.myForm.reset(),o.addedit_OPmode="",o.notify.showInfo("Promotion Added Successfully","Promotion")})):"Edit"==this.addedit_OPmode&&(console.log("aaaaaabbbaaaaaaaa"),this.isSubmitted=!0,setTimeout(function(){console.log("startdate before submit is:"+o.errorControl.startDate.value),console.log("endDate before submit is:"+o.errorControl.endDate.value),o.servPromotion.editPromotion_Order(o.myForm.value).subscribe(function(i){o.formSaved.emit(!0),o.myForm.reset(),o.addedit_OPmode="",o.notify.showInfo("Changes Done Successfully","Promotion")})},3e3))},r.prototype.isValidDate=function(o){return!isNaN(Date.parse(o))},r.\u0275fac=function(e){return new(e||r)(t.Y36(a.qu),t.Y36(h.M),t.Y36(f.H),t.Y36(g.q),t.Y36(y.$),t.Y36(t.zs3),t.Y36(m.uU),t.Y36(F.g))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-order-promotion-add-edit"]],inputs:{param_PromoProd_id:"param_PromoProd_id"},outputs:{formSaved:"formSaved"},features:[t.TTD],decls:38,vars:7,consts:[[1,"card"],[1,"card-body"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-6"],[1,"form-group"],["for","promotionName"],["type","text","maxlength","50","formControlName","promotionName","id","promotionName",1,"form-control"],["for","promoType"],["formControlName","promoType","value","apromo.promotionType","required","",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],["class","row",4,"ngIf"],["for","startDate"],["id","startDate","placeholder","Enter Start Date","bsDatepicker","","formControlName","startDate",1,"form-control",3,"bsConfig"],["for","endDate"],["id","endDate","placeholder","Enter End Date","bsDatepicker","","formControlName","endDate",1,"form-control",3,"bsConfig"],[1,"col-4"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["type","submit",1,"btn","btn-primary",3,"click"],[3,"value"],[1,"error"],["for","discountPercentage"],["type","number","formControlName","discountPercentage","id","discountPercentage",1,"form-control"],["for","discountAmount"],["type","number","formControlName","discountAmount","id","discountAmount",1,"form-control"],["for","minOrderAmount"],["type","number","formControlName","minOrderAmount","id","minOrderAmount",1,"form-control"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"label",6),t._uU(7,"promotionName"),t.qZA(),t._UZ(8,"input",7),t.qZA()(),t.TgZ(9,"div",4)(10,"div",5)(11,"label",8),t._uU(12,"Promotion Type"),t.qZA(),t.TgZ(13,"select",9),t.YNc(14,M,2,2,"option",10),t.qZA(),t.YNc(15,Y,2,0,"span",11),t.qZA()()(),t.YNc(16,Q,16,0,"div",12),t.TgZ(17,"div",3)(18,"div",4)(19,"div",5)(20,"label",13),t._uU(21,"Start Date:"),t.qZA(),t._UZ(22,"input",14),t.qZA()(),t.TgZ(23,"div",4)(24,"div",5)(25,"label",15),t._uU(26,"End Datea:"),t.qZA(),t._UZ(27,"input",16),t.qZA()()(),t.TgZ(28,"div",3)(29,"div",17)(30,"button",18),t.NdJ("click",function(){return i.onSubmitClick()}),t._uU(31,"Submit"),t.qZA()(),t.TgZ(32,"div",17)(33,"button",19),t.NdJ("click",function(){return i.onDeleteClick()}),t._uU(34,"Delete"),t.qZA()(),t.TgZ(35,"div",17)(36,"button",19),t.NdJ("click",function(){return i.onCancelClick()}),t._uU(37,"Cancel"),t.qZA()()()()()()),2&e&&(t.xp6(2),t.Q6J("formGroup",i.myForm),t.xp6(12),t.Q6J("ngForOf",i.PromotionTypeList),t.xp6(1),t.Q6J("ngIf",i.isSubmitted&&(null==i.errorControl.promoType.errors?null:i.errorControl.promoType.errors.required)),t.xp6(1),t.Q6J("ngIf",-1==i.errorControl.promoType.value.indexOf("Buy")),t.xp6(6),t.Q6J("bsConfig",i.bsConfig),t.xp6(5),t.Q6J("bsConfig",i.bsConfig),t.xp6(3),t.Q6J("disabled",1==i.isSubmitted))},dependencies:[m.sg,m.O5,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,_.Np,_.Y5]}),r}();function w(r,o){if(1&r){var e=t.EpF();t.TgZ(0,"app-display-order-promotion",4),t.NdJ("promoproduct_id_for_Addedit",function(d){t.CHM(e);var s=t.oxw();return t.KtG(s.promoProd_Select_Changed_for_Addedit(d))})("product_id_for_Detail",function(d){t.CHM(e);var s=t.oxw();return t.KtG(s.Prod_Select_Changed_for_Detail(d))}),t.qZA()}if(2&r){var i=t.oxw();t.Q6J("events",i.eventsSubject.asObservable())}}function L(r,o){if(1&r){var e=t.EpF();t.TgZ(0,"app-order-promotion-add-edit",5),t.NdJ("formSaved",function(d){t.CHM(e);var s=t.oxw();return t.KtG(s.productformSave_Detected(d))}),t.qZA()}if(2&r){var i=t.oxw();t.Q6J("param_PromoProd_id",i.curr_PromoProd_id_for_Addedit)}}var H=function(){function r(){this.eventsSubject=new T.xQ}return r.prototype.emitEventToChild=function(){this.eventsSubject.next()},r.prototype.promoProd_Select_Changed_for_Addedit=function(o){this.curr_PromoProd_id_for_Addedit=o},r.prototype.Prod_Select_Changed_for_Detail=function(o){this.curr_Prod_id_for_detail=o},r.prototype.productformSave_Detected=function(o){this.curr_PromoProd_id_for_Addedit=null,this.emitEventToChild()},r.prototype.onScroll=function(o){console.log("scrolling...")},r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-order-promotions"]],hostBindings:function(e,i){1&e&&t.NdJ("scroll",function(d){return i.onScroll(d)},!1,t.Jf7)},decls:5,vars:2,consts:[[1,"row"],[1,"col-12"],[3,"events","promoproduct_id_for_Addedit","product_id_for_Detail",4,"ngIf"],[3,"param_PromoProd_id","formSaved",4,"ngIf"],[3,"events","promoproduct_id_for_Addedit","product_id_for_Detail"],[3,"param_PromoProd_id","formSaved"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,w,1,1,"app-display-order-promotion",2),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,L,1,1,"app-order-promotion-add-edit",3),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.curr_PromoProd_id_for_Addedit<0||null==i.curr_PromoProd_id_for_Addedit),t.xp6(2),t.Q6J("ngIf",i.curr_PromoProd_id_for_Addedit||0==i.curr_PromoProd_id_for_Addedit))},dependencies:[m.O5,J,E]}),r}();function V(r,o){if(1&r){var e=t.EpF();t.TgZ(0,"tr",8)(1,"td",9)(2,"button",0),t.NdJ("click",function(){var u=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.editProduct(u))}),t._UZ(3,"img",10),t.qZA()(),t.TgZ(4,"td",11),t._uU(5),t.qZA(),t.TgZ(6,"td",12),t._uU(7),t.qZA()()}if(2&r){var i=o.$implicit,n=t.oxw();t.xp6(5),t.Oqu(n.servCommon.GetDisplayNameByKey(n.products,"id",i.productId,"product_name")),t.xp6(2),t.Oqu(i.promotionName)}}var B=function(){function r(o,e,i,n,d,s){this.servCommon=o,this.servCategory=e,this.servProduct=i,this.servPromoProduct=n,this.authServ=d,this.servUser=s,this.promoproduct_id_for_Addedit=new t.vpe,this.product_id_for_Detail=new t.vpe,this.product_id_Selected=new t.vpe,this.categoryList=[],this.sellerList=[]}return r.prototype.ngOnInit=function(){var o=this;this.getProductList(),this.get_product_promotions(),this.getSellerList(),this.getCategories(),this.eventsSubscription=this.events.subscribe(function(){return o.get_product_promotions()})},r.prototype.getCategories=function(){var o=this;this.servCategory.getCategorys().subscribe(function(e){o.categoryList=e})},r.prototype.getSellerList=function(){var o=this;this.servUser.getUsers_Of_role("Seller").subscribe(function(e){o.sellerList=e})},r.prototype.ngOnDestroy=function(){this.eventsSubscription.unsubscribe()},r.prototype.addProduct=function(){this.promoproduct_id_for_Addedit.emit(0)},r.prototype.editProduct=function(o){this.product_id_for_Detail.emit(void 0),this.promoproduct_id_for_Addedit.emit(o.id)},r.prototype.selectProduct=function(o){this.promoproduct_id_for_Addedit.emit(void 0),this.product_id_for_Detail.emit(o.id)},r.prototype.getProductList=function(){var o=this;this.servProduct.getProducts_All().subscribe(function(e){o.products=e})},r.prototype.get_product_promotions=function(){var o=this;this.servPromoProduct.get_Promotion_Product_Seller(this.authServ.currentUserValue.id).subscribe(function(e){o.promotions_product=e})},r.\u0275fac=function(e){return new(e||r)(t.Y36(D.v),t.Y36(f.H),t.Y36(h.M),t.Y36(g.q),t.Y36(y.$),t.Y36(q.K))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-display-product-promotion"]],inputs:{events:"events"},outputs:{promoproduct_id_for_Addedit:"promoproduct_id_for_Addedit",product_id_for_Detail:"product_id_for_Detail",product_id_Selected:"product_id_Selected"},decls:13,vars:1,consts:[[1,"btn","btn-danger","btn-sm",2,"padding","0",3,"click"],["src","/assets/icon/add.png","alt","Edit",1,"btn-icon",2,"height","40px"],[1,"card"],[1,"card-body"],[1,"table","table-striped"],[1,"text-primary"],["scope","col"],["style","height: 5px;",4,"ngFor","ngForOf"],[2,"height","5px"],[2,"width","10%"],["width","30px","src","/assets/icon/Edit.png","alt","Edit",1,"btn-icon",2,"height","30px"],[2,"width","20%"],[2,"width","auto"]],template:function(e,i){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return i.addProduct()}),t._UZ(1,"img",1),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"table",4)(5,"thead",5),t._UZ(6,"th",6),t.TgZ(7,"th"),t._uU(8,"Product"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Promotion"),t.qZA()(),t.TgZ(11,"tbody"),t.YNc(12,V,8,2,"tr",7),t.qZA()()()()),2&e&&(t.xp6(12),t.Q6J("ngForOf",i.promotions_product))},dependencies:[m.sg]}),r}();function G(r,o){if(1&r&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&r){var e=o.$implicit;t.Q6J("value",e.promotionType),t.xp6(1),t.Oqu(e.promotionType)}}function K(r,o){1&r&&(t.TgZ(0,"span",24),t._uU(1," promoType not provided. "),t.qZA())}function R(r,o){if(1&r&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&r){var e=o.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.product_name)}}function X(r,o){1&r&&(t.TgZ(0,"span",24),t._uU(1," Product not provided. "),t.qZA())}function $(r,o){1&r&&(t.TgZ(0,"div",3)(1,"div",10)(2,"div",5)(3,"label",25),t._uU(4,"buyX"),t.qZA(),t._UZ(5,"input",26),t.qZA()(),t.TgZ(6,"div",10)(7,"div",5)(8,"label",27),t._uU(9,"getY"),t.qZA(),t._UZ(10,"input",28),t.qZA()()())}function z(r,o){1&r&&(t.TgZ(0,"div",3)(1,"div",10)(2,"div",5)(3,"label",29),t._uU(4,"discountPercentage"),t.qZA(),t._UZ(5,"input",30),t.qZA()(),t.TgZ(6,"div",10)(7,"div",5)(8,"label",31),t._uU(9,"discountAmount"),t.qZA(),t._UZ(10,"input",32),t.qZA()()())}var W=function(){function r(o,e,i,n,d,s,u,p){this.formBuilder=o,this.servProduct=e,this.servCategory=i,this.servPromotion=n,this.authServ=d,this.injector=s,this.datePipe=u,this.notify=p,this.timepickerConfig=function j(){return Object.assign(new O.Sm,{timeFormat:"hh:mm A",showMeridian:!0,containerClass:"theme-default",hourStep:1,minuteStep:15,readonlyInput:!1,mousewheel:!0,arrowkeys:!0})}(),this.formSaved=new t.vpe,this.addedit_OPmode="",this.defaultDate="1987-06-30",this.isSubmitted=!1,this.isSubmitted_uploadform=!1,this.PromotionTypeList=[],this.ProductList=[],this.submitClicked="",this.bsConfig={dateInputFormat:"DD/MM/YYYY HH:mm:ss",containerClass:"theme-default"}}return r.prototype.ngAfterViewInit=function(){this.getPromotionMaster(),this.getProductList()},r.prototype.getPromotionMaster=function(){var o=this;this.servPromotion.getPromotionMast().subscribe(function(e){o.PromotionTypeList=e})},r.prototype.getProductList=function(){var o=this,e="";null!=this.authServ.currentUserValue.id&&(e=this.authServ.currentUserValue.id),this.servProduct.getProducts_Ofseller(e).subscribe(function(i){o.ProductList=i})},r.prototype.ngOnInit=function(){this.myForm=this.formBuilder.group({id:[],seller_id:[""],productId:[""],promoType:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(50)]],promotionName:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(50)]],buyX:["0",[a.kI.min(1),a.kI.max(10)]],getY:["0",[a.kI.min(1),a.kI.max(10)]],discountAmount:["0",[a.kI.min(10),a.kI.max(9999)]],discountPercentage:["0",[a.kI.min(1),a.kI.max(90)]],startDate:["",a.kI.required],endDate:[""]})},r.prototype.formatDate=function(o){var e=o.getDate(),i=o.getMonth()+1,n=o.getFullYear(),d=o.getHours(),s=o.getMinutes(),u=o.getSeconds(),p=e<10?"0".concat(e):"".concat(e),v=i<10?"0".concat(i):"".concat(i),P="".concat(n),b=d<10?"0".concat(d):"".concat(d),C=s<10?"0".concat(s):"".concat(s),S=u<10?"0".concat(u):"".concat(u);return"".concat(p,"/").concat(v,"/").concat(P," ").concat(b,":").concat(C,":").concat(S)},r.prototype.formatDate1=function(o){var e=o.getDate(),i=o.getMonth()+1,n=e<10?"0".concat(e):"".concat(e),d=i<10?"0".concat(i):"".concat(i);return"".concat(n,"-").concat(d,"-").concat(o.getFullYear())},r.prototype.format2Date=function(o){var e=o.getDate(),i=o.getMonth()+1,n=e<10?"0".concat(e):"".concat(e),d=i<10?"0".concat(i):"".concat(i);return"".concat(o.getFullYear(),"-").concat(d,"-").concat(n)},r.prototype.ngOnChanges=function(o){return(0,l.mG)(this,void 0,void 0,function(){var e,i,n;return(0,l.Jh)(this,function(d){switch(d.label){case 0:return o.param_PromoProd_id?(this.getPromotionMaster(),0==this.param_PromoProd_id?(this.addedit_OPmode="Add",this.myForm.reset()):this.addedit_OPmode="Edit",console.log("detecting change param_PromoProd_id:"+this.param_PromoProd_id),this.param_PromoProd_id?[4,this.get_Product()]:[3,2]):[3,2];case 1:d.sent(),e="",null!=this.authServ.currentUserValue.id&&(e=this.authServ.currentUserValue.id),console.log("product_Selected.startDate product:--\x3e"+this.product_Selected.startDate+"<--"),i=this.datePipe.transform(this.product_Selected.startDate,"dd/MM/yyyy HH:mm:ss"),n=this.datePipe.transform(this.product_Selected.endDate,"dd/MM/yyyy HH:mm:ss"),console.log("patching id value:"+this.product_Selected.id),console.log("patching product sdate:"+i),this.myForm.patchValue({id:this.product_Selected.id,seller_id:e,productId:this.product_Selected.productId,promoType:this.product_Selected.promotionType,promotionName:this.product_Selected.promotionName,buyX:this.product_Selected.buyX,getY:this.product_Selected.getY,discountAmount:this.product_Selected.discountAmount,discountPercentage:this.product_Selected.discountPercentage,startDate:i,endDate:n}),d.label=2;case 2:return[2]}})})},r.prototype.get_Product=function(){var o=this;return new Promise(function(e,i){o.servPromotion.get_Promotion_ProductById(o.param_PromoProd_id).subscribe(function(n){o.product_Selected=n[0],console.log("mm in getpromotion of product res[0] is:"+JSON.stringify(n[0])),e(!0)})})},r.prototype.onImageSelected=function(o){this.imageFile=o.target.files[0]},Object.defineProperty(r.prototype,"errorControl",{get:function(){return this.myForm.controls},enumerable:!1,configurable:!0}),r.prototype.onSubmitClick=function(){this.submitClicked="Submit"},r.prototype.onDeleteClick=function(){this.submitClicked="Delete"},r.prototype.onCancelClick=function(){this.submitClicked="Cancel"},r.prototype.onSubmit=function(){var o=this;if("Delete"==this.submitClicked)return console.log(" hey i want to delete"),console.log("this.myForm.value in product:"+JSON.stringify(this.myForm.value)),void this.servPromotion.deletePromotion_Product(this.myForm.value).subscribe(function(i){o.formSaved.emit(!0),o.myForm.reset(),o.addedit_OPmode=""});if("Cancel"==this.submitClicked)return this.formSaved.emit(!0),this.myForm.reset(),void(this.addedit_OPmode="");console.log(this.myForm.value);var e="";null!=this.authServ.currentUserValue.id&&(e=this.authServ.currentUserValue.id),this.myForm.patchValue({seller_id:e}),console.log("this.authServ.currentUserValue!.id:"+e),"Add"==this.addedit_OPmode?(this.isSubmitted=!0,console.log("this.myForm.value:"+JSON.stringify(this.myForm.value)),console.log("PromotionTypeList:"+JSON.stringify(this.PromotionTypeList)),this.servPromotion.addPromotion_Product(this.myForm.value).subscribe(function(i){o.formSaved.emit(!0),o.myForm.reset(),o.notify.showInfo("Promotion Added Successfully","Promotion")})):"Edit"==this.addedit_OPmode&&(this.isSubmitted=!0,this.servPromotion.editPromotion_Product(this.myForm.value).subscribe(function(i){o.formSaved.emit(!0),o.myForm.reset(),o.notify.showInfo("Changes Done Successfully","Promotion")}))},r.\u0275fac=function(e){return new(e||r)(t.Y36(a.qu),t.Y36(h.M),t.Y36(f.H),t.Y36(g.q),t.Y36(y.$),t.Y36(t.zs3),t.Y36(m.uU),t.Y36(F.g))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-product-promotion-add-edit"]],inputs:{param_PromoProd_id:"param_PromoProd_id"},outputs:{formSaved:"formSaved"},features:[t.TTD],decls:47,vars:10,consts:[[1,"card"],[1,"card-body"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12"],[1,"form-group"],["for","promoType"],["formControlName","promoType","value","apromo.promotionType","required","",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],[1,"col-6"],["for","product"],["formControlName","productId","required","",1,"form-control"],["for","promotionName"],["type","text","maxlength","50","formControlName","promotionName","id","promotionName",1,"form-control"],["for","startDate"],["id","startDate","placeholder","Enter Start Date","bsDatepicker","","formControlName","startDate",1,"form-control",3,"bsConfig"],["for","endDate"],["id","startDate","placeholder","Enter End Date","bsDatepicker","","formControlName","endDate",1,"form-control",3,"bsConfig"],["class","row",4,"ngIf"],[1,"col-4"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["type","submit",1,"btn","btn-primary",3,"click"],[3,"value"],[1,"error"],["for","buyX"],["type","number","formControlName","buyX","id","buyX",1,"form-control"],["for","getY"],["type","number","formControlName","getY","id","getY",1,"form-control"],["for","discountPercentage"],["type","number","formControlName","discountPercentage","id","discountPercentage",1,"form-control"],["for","discountAmount"],["type","number","formControlName","discountAmount","id","discountAmount",1,"form-control"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"label",6),t._uU(7,"Promotion Type"),t.qZA(),t.TgZ(8,"select",7),t.YNc(9,G,2,2,"option",8),t.qZA(),t.YNc(10,K,2,0,"span",9),t.qZA()()(),t.TgZ(11,"div",3)(12,"div",10)(13,"div",5)(14,"label",11),t._uU(15,"Product"),t.qZA(),t.TgZ(16,"select",12),t.YNc(17,R,2,2,"option",8),t.qZA(),t.YNc(18,X,2,0,"span",9),t.qZA()(),t.TgZ(19,"div",10)(20,"div",5)(21,"label",13),t._uU(22,"promotionName"),t.qZA(),t._UZ(23,"input",14),t.qZA()()(),t.TgZ(24,"div",3)(25,"div",10)(26,"div",5)(27,"label",15),t._uU(28,"Start Date:"),t.qZA(),t._UZ(29,"input",16),t.qZA()(),t.TgZ(30,"div",10)(31,"div",5)(32,"label",17),t._uU(33,"End Date:"),t.qZA(),t._UZ(34,"input",18),t.qZA()()(),t.YNc(35,$,11,0,"div",19),t.YNc(36,z,11,0,"div",19),t.TgZ(37,"div",3)(38,"div",20)(39,"button",21),t.NdJ("click",function(){return i.onSubmitClick()}),t._uU(40,"Submit"),t.qZA()(),t.TgZ(41,"div",20)(42,"button",22),t.NdJ("click",function(){return i.onDeleteClick()}),t._uU(43,"Delete"),t.qZA()(),t.TgZ(44,"div",20)(45,"button",22),t.NdJ("click",function(){return i.onCancelClick()}),t._uU(46,"Cancel"),t.qZA()()()()()()),2&e&&(t.xp6(2),t.Q6J("formGroup",i.myForm),t.xp6(7),t.Q6J("ngForOf",i.PromotionTypeList),t.xp6(1),t.Q6J("ngIf",i.isSubmitted&&(null==i.errorControl.promoType.errors?null:i.errorControl.promoType.errors.required)),t.xp6(7),t.Q6J("ngForOf",i.ProductList),t.xp6(1),t.Q6J("ngIf",i.isSubmitted&&(null==i.errorControl.productId.errors?null:i.errorControl.productId.errors.required)),t.xp6(11),t.Q6J("bsConfig",i.bsConfig),t.xp6(5),t.Q6J("bsConfig",i.bsConfig),t.xp6(1),t.Q6J("ngIf",-1!=i.errorControl.promoType.value.indexOf("Buy")),t.xp6(1),t.Q6J("ngIf",-1==i.errorControl.promoType.value.indexOf("Buy")),t.xp6(3),t.Q6J("disabled",1==i.isSubmitted))},dependencies:[m.sg,m.O5,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,_.Np,_.Y5]}),r}();function tt(r,o){if(1&r){var e=t.EpF();t.TgZ(0,"app-display-product-promotion",4),t.NdJ("promoproduct_id_for_Addedit",function(d){t.CHM(e);var s=t.oxw();return t.KtG(s.promoProd_Select_Changed_for_Addedit(d))})("product_id_for_Detail",function(d){t.CHM(e);var s=t.oxw();return t.KtG(s.Prod_Select_Changed_for_Detail(d))}),t.qZA()}if(2&r){var i=t.oxw();t.Q6J("events",i.eventsSubject.asObservable())}}function ot(r,o){if(1&r){var e=t.EpF();t.TgZ(0,"app-product-promotion-add-edit",5),t.NdJ("formSaved",function(d){t.CHM(e);var s=t.oxw();return t.KtG(s.productformSave_Detected(d))}),t.qZA()}if(2&r){var i=t.oxw();t.Q6J("param_PromoProd_id",i.curr_PromoProd_id_for_Addedit)}}var et=function(){function r(){this.eventsSubject=new T.xQ}return r.prototype.emitEventToChild=function(){this.eventsSubject.next()},r.prototype.promoProd_Select_Changed_for_Addedit=function(o){this.curr_PromoProd_id_for_Addedit=o},r.prototype.Prod_Select_Changed_for_Detail=function(o){this.curr_Prod_id_for_detail=o},r.prototype.productformSave_Detected=function(o){this.curr_PromoProd_id_for_Addedit=null,this.emitEventToChild()},r.prototype.onScroll=function(o){console.log("scrolling...")},r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-product-promotions"]],hostBindings:function(e,i){1&e&&t.NdJ("scroll",function(d){return i.onScroll(d)},!1,t.Jf7)},decls:5,vars:2,consts:[[1,"row"],[1,"col-12"],[3,"events","promoproduct_id_for_Addedit","product_id_for_Detail",4,"ngIf"],[3,"param_PromoProd_id","formSaved",4,"ngIf"],[3,"events","promoproduct_id_for_Addedit","product_id_for_Detail"],[3,"param_PromoProd_id","formSaved"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,tt,1,1,"app-display-product-promotion",2),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,ot,1,1,"app-product-promotion-add-edit",3),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.curr_PromoProd_id_for_Addedit<0||null==i.curr_PromoProd_id_for_Addedit),t.xp6(2),t.Q6J("ngIf",i.curr_PromoProd_id_for_Addedit||0==i.curr_PromoProd_id_for_Addedit))},dependencies:[m.O5,B,W]}),r}(),rt=c(680);function it(r,o){if(1&r&&(t.TgZ(0,"tr",13)(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA()()),2&r){var e=o.$implicit;t.xp6(2),t.Oqu(e.quantityRangeStart),t.xp6(2),t.Oqu(e.quantityRangeEnd),t.xp6(2),t.Oqu(e.discountAmount),t.xp6(2),t.Oqu(e.discountPercentage)}}function nt(r,o){if(1&r){var e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"button",5),t.NdJ("click",function(){var u=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.editProduct(u))}),t._UZ(3,"img",6),t.qZA(),t.TgZ(4,"h6",7),t._uU(5),t.qZA(),t.TgZ(6,"h6",7),t._uU(7),t.qZA()(),t.TgZ(8,"div",8)(9,"div",9)(10,"table",10)(11,"thead",11)(12,"th"),t._uU(13,"Qnt Start"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Qnt To"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Discount Rs"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Discount %"),t.qZA()(),t.TgZ(20,"tbody"),t.YNc(21,it,9,4,"tr",12),t.qZA()()()()()}if(2&r){var i=o.$implicit,n=t.oxw();t.xp6(5),t.hij(" For : ",n.getProductName(i.key)," "),t.xp6(2),t.hij(" PromotionName : ",n.getPromotionName(i.key)," "),t.xp6(14),t.Q6J("ngForOf",i.items)}}var dt=function(){function r(o,e,i,n,d,s,u){this.servCommon=o,this.servCategory=e,this.servProduct=i,this.servPromoProduct=n,this.authServ=d,this.servUser=s,this.formBuilder=u,this.promoproduct_id_for_Addedit=new t.vpe,this.product_id_for_Detail=new t.vpe,this.product_id_Selected=new t.vpe,this.categoryList=[],this.sellerList=[],this.quantityStagesFormArrayChange=new t.vpe}return r.prototype.ngOnInit=function(){return(0,l.mG)(this,void 0,void 0,function(){var o=this;return(0,l.Jh)(this,function(e){switch(e.label){case 0:return[4,this.get_quantity_promotions_Of_seller()];case 1:return e.sent(),this.ExtractProductIdsForProductList(),this.getSellerList(),this.getCategories(),this.eventsSubscription=this.events.subscribe(function(){return o.get_quantity_promotions_Of_seller()}),[2]}})})},r.prototype.getProductName=function(o){var i=this.promotions_product.find(function(d){return d.QuantityPromotions_id===o})?.productId;return this.products.find(function(d){return d.id===i})?.product_name||""},r.prototype.getPromotionName=function(o){return this.promotions_product.find(function(i){return i.QuantityPromotions_id===o})?.promotionName},r.prototype.getCategories=function(){var o=this;this.servCategory.getCategorys().subscribe(function(e){o.categoryList=e})},r.prototype.getSellerList=function(){var o=this;this.servUser.getUsers_Of_role("Seller").subscribe(function(e){o.sellerList=e})},r.prototype.emitQuantityStagesFormArray=function(){this.quantityStagesFormArrayChange.emit(this.quantityStagesFormArray)},r.prototype.ngOnDestroy=function(){this.eventsSubscription.unsubscribe()},r.prototype.addProduct=function(){this.promoproduct_id_for_Addedit.emit(0)},r.prototype.editProduct=function(o){var e=this;this.product_id_for_Detail.emit(void 0),this.promoproduct_id_for_Addedit.emit(o.key),this.get_quantity_promotions_ById(o.key).subscribe(function(i){i.forEach(function(n){e.quantityStagesFormArray.push(e.createQuantityStage(n))})})},r.prototype.createQuantityStage=function(o){return this.formBuilder.group({quantityRangeStart:o.quantityRangeStart,quantityRangeEnd:o.quantityRangeEnd,discountPercentage:o.discountPercentage})},r.prototype.selectProduct=function(o){this.promoproduct_id_for_Addedit.emit(void 0),this.product_id_for_Detail.emit(o.id)},r.prototype.getProductList=function(){var o=this;this.servProduct.getProducts_All().subscribe(function(e){o.products=e})},r.prototype.get_product_promotions_notinuse=function(){var o=this;this.servPromoProduct.get_Promotion_Product_Seller(this.authServ.currentUserValue.id).subscribe(function(e){o.promotions_product=e})},r.prototype.get_quantity_promotions_ById=function(o){var e=this;return new Promise(function(i,n){e.servPromoProduct.get_Promotion_QuantityById(o).subscribe(function(d){console.log("see here get_quantity_promotions_ById aaaaaaaaaaaaaaa"),console.log(d),i(d)})})},r.prototype.get_quantity_promotions_Of_seller=function(){var o=this;return new Promise(function(e,i){o.servPromoProduct.get_Promotion_Quantity_Seller(o.authServ.currentUserValue.id).subscribe(function(n){o.promotions_product=n,console.log("see here quantity promotions"),console.log(n),e(!0)})})},r.prototype.ExtractProductIdsForProductList=function(){var e,o=this,i="";this.promotions_product.forEach(function(d){i+=d.productId+","}),console.log("productIdList_CommaDelimited:"+i),localStorage.setItem("productIdList_CommaDelimited",i);var n=null===(e=localStorage.getItem("productIdList_CommaDelimited"))||void 0===e?void 0:e.toString();this.servProduct.getProductByIds(n).subscribe(function(d){o.products=d,console.log("products by ids:"+JSON.stringify(o.products))})},r.\u0275fac=function(e){return new(e||r)(t.Y36(D.v),t.Y36(f.H),t.Y36(h.M),t.Y36(g.q),t.Y36(y.$),t.Y36(q.K),t.Y36(a.qu))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-display-quantity-promotion"]],inputs:{events:"events"},outputs:{promoproduct_id_for_Addedit:"promoproduct_id_for_Addedit",product_id_for_Detail:"product_id_for_Detail",product_id_Selected:"product_id_Selected",quantityStagesFormArrayChange:"quantityStagesFormArrayChange"},decls:4,vars:4,consts:[[1,"row"],[1,"col-12"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-header"],[1,"btn","btn-danger","btn-sm",2,"padding","0",3,"click"],["width","30px","src","/assets/icon/Edit.png","alt","Edit",1,"btn-icon",2,"height","30px"],[1,"card-title"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-striped"],[1,"text-primary"],["style","height: 5px;",4,"ngFor","ngForOf"],[2,"height","5px"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,nt,22,3,"div",2),t.ALo(3,"groupBy"),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngForOf",t.xi3(3,1,i.promotions_product,"QuantityPromotions_id")))},dependencies:[m.sg,rt.l]}),r}();function st(r,o){if(1&r&&(t.TgZ(0,"option",25),t._uU(1),t.qZA()),2&r){var e=o.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.product_name)}}function ut(r,o){1&r&&(t.TgZ(0,"span",26),t._uU(1," Product not provided. "),t.qZA())}function ct(r,o){1&r&&(t.TgZ(0,"div",27),t._UZ(1,"input",28)(2,"input",29)(3,"input",30)(4,"input",31),t.qZA()),2&r&&t.Q6J("formGroupName",o.index)}var mt=function(){function r(o,e,i,n,d,s,u,p){this.formBuilder=o,this.servProduct=e,this.servCategory=i,this.servPromotion=n,this.authServ=d,this.injector=s,this.datePipe=u,this.notify=p,this.timepickerConfig=function at(){return Object.assign(new O.Sm,{timeFormat:"hh:mm A",showMeridian:!0,containerClass:"theme-default",hourStep:1,minuteStep:15,readonlyInput:!1,mousewheel:!0,arrowkeys:!0})}(),this.formSaved=new t.vpe,this.addedit_OPmode="",this.defaultDate="1987-06-30",this.isSubmitted=!1,this.isSubmitted_uploadform=!1,this.PromotionTypeList=[],this.ProductList=[],this.submitClicked="",this.bsConfig={dateInputFormat:"DD/MM/YYYY HH:mm:ss",containerClass:"theme-default"},this.myForm=this.formBuilder.group({id:[],seller_id:[""],productId:[""],promoType:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(50)]],promotionName:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(50)]],quantityStagesFormArray:this.formBuilder.array([]),startDate:["",a.kI.required],endDate:[""]}),this.quantityStagesFormArray=this.myForm.get("quantityStagesFormArray")}return r.prototype.ngAfterViewInit=function(){this.getPromotionMaster(),this.getProductList()},r.prototype.getPromotionMaster=function(){var o=this;this.servPromotion.getPromotionMast().subscribe(function(e){o.PromotionTypeList=e})},r.prototype.getProductList=function(){var o=this,e="";null!=this.authServ.currentUserValue.id&&(e=this.authServ.currentUserValue.id),this.servProduct.getProducts_Ofseller(e).subscribe(function(i){o.ProductList=i})},r.prototype.ngOnInit=function(){},r.prototype.formatDate=function(o){var e=o.getDate(),i=o.getMonth()+1,n=o.getFullYear(),d=o.getHours(),s=o.getMinutes(),u=o.getSeconds(),p=e<10?"0".concat(e):"".concat(e),v=i<10?"0".concat(i):"".concat(i),P="".concat(n),b=d<10?"0".concat(d):"".concat(d),C=s<10?"0".concat(s):"".concat(s),S=u<10?"0".concat(u):"".concat(u);return"".concat(p,"/").concat(v,"/").concat(P," ").concat(b,":").concat(C,":").concat(S)},r.prototype.formatDate1=function(o){var e=o.getDate(),i=o.getMonth()+1,n=e<10?"0".concat(e):"".concat(e),d=i<10?"0".concat(i):"".concat(i);return"".concat(n,"-").concat(d,"-").concat(o.getFullYear())},r.prototype.format2Date=function(o){var e=o.getDate(),i=o.getMonth()+1,n=e<10?"0".concat(e):"".concat(e),d=i<10?"0".concat(i):"".concat(i);return"".concat(o.getFullYear(),"-").concat(d,"-").concat(n)},r.prototype.ngOnChanges=function(o){return(0,l.mG)(this,void 0,void 0,function(){var e,i,n;return(0,l.Jh)(this,function(d){switch(d.label){case 0:return o.param_PromoProd_id?(this.getPromotionMaster(),0==this.param_PromoProd_id?(this.addedit_OPmode="Add",this.myForm.reset()):this.addedit_OPmode="Edit",console.log("detecting change param_PromoProd_id:"+this.param_PromoProd_id),this.param_PromoProd_id?[4,this.get_Product()]:[3,2]):[3,2];case 1:d.sent(),e="",null!=this.authServ.currentUserValue.id&&(e=this.authServ.currentUserValue.id),console.log("product_Selected.startDate product:--\x3e"+this.product_Selected.startDate+"<--"),i=this.datePipe.transform(this.product_Selected.startDate,"dd/MM/yyyy HH:mm:ss"),n=this.datePipe.transform(this.product_Selected.endDate,"dd/MM/yyyy HH:mm:ss"),console.log("patching id value:"+this.product_Selected.id),console.log("patching product sdate:"+i),this.myForm.patchValue({id:this.product_Selected.id,seller_id:e,productId:this.product_Selected.productId,promoType:this.product_Selected.promotionType,promotionName:this.product_Selected.promotionName,discountAmount:this.product_Selected.discountAmount,discountPercentage:this.product_Selected.discountPercentage,startDate:i,endDate:n}),d.label=2;case 2:return[2]}})})},r.prototype.addStage=function(){this.submitClicked="AddingStage";var o=this.formBuilder.group({quantityRangeStart:["",a.kI.required],quantityRangeEnd:["",a.kI.required],discountAmount:["",a.kI.required],discountPercentage:["",a.kI.required]});this.quantityStagesFormArray.push(o),console.log("bbbbbbbbbbbbbbbb")},r.prototype.removeStage=function(o){this.quantityStagesFormArray.removeAt(o)},r.prototype.get_Product=function(){var o=this;return new Promise(function(e,i){o.servPromotion.get_Promotion_QuantityById(o.param_PromoProd_id).subscribe(function(n){o.product_Selected=n[0],console.log("res[0]:"+JSON.stringify(n[0])),console.log("param_PromoProd_id:"+o.param_PromoProd_id),n.forEach(function(d){o.quantityStagesFormArray.push(o.createQuantityStage(d))}),e(!0)})})},r.prototype.createQuantityStage=function(o){return this.formBuilder.group({quantityRangeStart:o.quantityRangeStart,quantityRangeEnd:o.quantityRangeEnd,discountAmount:o.discountAmount,discountPercentage:o.discountPercentage})},r.prototype.onImageSelected=function(o){this.imageFile=o.target.files[0]},Object.defineProperty(r.prototype,"errorControl",{get:function(){return this.myForm.controls},enumerable:!1,configurable:!0}),r.prototype.onSubmitClick=function(){this.submitClicked="Submit"},r.prototype.onDeleteClick=function(){this.submitClicked="Delete"},r.prototype.onCancelClick=function(){this.submitClicked="Cancel"},r.prototype.onSubmit=function(){var o=this;if("AddingStage"!=this.submitClicked){if("Delete"==this.submitClicked)return console.log(" hey i want to delete"),console.log("this.myForm.value in product:"+JSON.stringify(this.myForm.value)),void this.servPromotion.deletePromotion_Product(this.myForm.value).subscribe(function(i){o.formSaved.emit(!0),o.myForm.reset(),o.addedit_OPmode=""});if("Cancel"==this.submitClicked)return this.formSaved.emit(!0),this.myForm.reset(),void(this.addedit_OPmode="");console.log(this.myForm.value);var e="";null!=this.authServ.currentUserValue.id&&(e=this.authServ.currentUserValue.id),this.myForm.patchValue({seller_id:e}),console.log("this.authServ.currentUserValue!.id:"+e),"Add"==this.addedit_OPmode?(this.isSubmitted=!0,console.log("this.myForm.value:"+JSON.stringify(this.myForm.value)),console.log("PromotionTypeList:"+JSON.stringify(this.PromotionTypeList)),this.servPromotion.addPromotion_Product(this.myForm.value).subscribe(function(i){o.formSaved.emit(!0),o.myForm.reset(),o.notify.showInfo("Promotion Added Successfully","Promotion")})):"Edit"==this.addedit_OPmode&&(this.isSubmitted=!0,this.myForm.patchValue({id:this.param_PromoProd_id}),console.log("this.myForm.value here submitting:"+JSON.stringify(this.myForm.value)),console.log("param_PromoProd_id:"+this.param_PromoProd_id),this.servPromotion.editPromotion_Quantity(this.myForm.value).subscribe(function(i){o.formSaved.emit(!0),o.myForm.reset(),o.notify.showInfo("Changes Done Successfully","Promotion Quantity")}))}},r.\u0275fac=function(e){return new(e||r)(t.Y36(a.qu),t.Y36(h.M),t.Y36(f.H),t.Y36(g.q),t.Y36(y.$),t.Y36(t.zs3),t.Y36(m.uU),t.Y36(F.g))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-quantity-promotion-add-edit"]],inputs:{param_PromoProd_id:"param_PromoProd_id"},outputs:{formSaved:"formSaved"},features:[t.TTD],decls:55,vars:7,consts:[[1,"card"],[1,"card-body"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-12"],[1,"col-6"],[1,"form-group"],["for","product"],["formControlName","productId","required","",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["class","error",4,"ngIf"],["for","promotionName"],["type","text","maxlength","50","formControlName","promotionName","id","promotionName",1,"form-control"],["for","startDate"],["id","startDate","placeholder","Enter Start Date","bsDatepicker","","formControlName","startDate",1,"form-control",3,"bsConfig"],["for","endDate"],["id","startDate","placeholder","Enter End Date","bsDatepicker","","formControlName","endDate",1,"form-control",3,"bsConfig"],[1,"btn","btn-sm","btn-danger",3,"click"],["formArrayName","quantityStagesFormArray"],[1,"banner-container"],[1,"banner-label"],["class","banner-inputs",3,"formGroupName",4,"ngFor","ngForOf"],[1,"col-4"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],["type","submit",1,"btn","btn-primary",3,"click"],[3,"value"],[1,"error"],[1,"banner-inputs",3,"formGroupName"],["type","number","formControlName","quantityRangeStart",1,"banner-inputs"],["type","number","formControlName","quantityRangeEnd",1,"banner-inputs"],["type","number","formControlName","discountAmount",1,"banner-inputs"],["type","number","formControlName","discountPercentage",1,"banner-inputs"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(3,"div",3),t._UZ(4,"div",4),t.qZA(),t.TgZ(5,"div",3)(6,"div",5)(7,"div",6)(8,"label",7),t._uU(9,"Product"),t.qZA(),t.TgZ(10,"select",8),t.YNc(11,st,2,2,"option",9),t.qZA(),t.YNc(12,ut,2,0,"span",10),t.qZA()(),t.TgZ(13,"div",5)(14,"div",6)(15,"label",11),t._uU(16,"promotionName"),t.qZA(),t._UZ(17,"input",12),t.qZA()()(),t.TgZ(18,"div",3)(19,"div",5)(20,"div",6)(21,"label",13),t._uU(22,"Start Date:"),t.qZA(),t._UZ(23,"input",14),t.qZA()(),t.TgZ(24,"div",5)(25,"div",6)(26,"label",15),t._uU(27,"End Date:"),t.qZA(),t._UZ(28,"input",16),t.qZA()()(),t.TgZ(29,"div")(30,"button",17),t.NdJ("click",function(){return i.addStage()}),t._uU(31,"Add Stage"),t.qZA(),t._UZ(32,"br"),t.TgZ(33,"div",18)(34,"div",19)(35,"div",20),t._uU(36,"Range-Start"),t.qZA(),t.TgZ(37,"div",20),t._uU(38,"Range-End"),t.qZA(),t.TgZ(39,"div",20),t._uU(40,"Discount Rs"),t.qZA(),t.TgZ(41,"div",20),t._uU(42,"Discount %"),t.qZA()(),t.YNc(43,ct,5,1,"div",21),t.qZA(),t._UZ(44,"br"),t.qZA(),t.TgZ(45,"div",3)(46,"div",22)(47,"button",23),t.NdJ("click",function(){return i.onSubmitClick()}),t._uU(48,"Submit"),t.qZA()(),t.TgZ(49,"div",22)(50,"button",24),t.NdJ("click",function(){return i.onDeleteClick()}),t._uU(51,"Delete"),t.qZA()(),t.TgZ(52,"div",22)(53,"button",24),t.NdJ("click",function(){return i.onCancelClick()}),t._uU(54,"Cancel"),t.qZA()()()()()()),2&e&&(t.xp6(2),t.Q6J("formGroup",i.myForm),t.xp6(9),t.Q6J("ngForOf",i.ProductList),t.xp6(1),t.Q6J("ngIf",i.isSubmitted&&(null==i.errorControl.productId.errors?null:i.errorControl.productId.errors.required)),t.xp6(11),t.Q6J("bsConfig",i.bsConfig),t.xp6(5),t.Q6J("bsConfig",i.bsConfig),t.xp6(15),t.Q6J("ngForOf",i.quantityStagesFormArray.controls),t.xp6(4),t.Q6J("disabled",1==i.isSubmitted))},dependencies:[m.sg,m.O5,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,a.x0,a.CE,_.Np,_.Y5],styles:[".banner-container[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:9px}.banner-label[_ngcontent-%COMP%]{width:60px;text-align:center;margin-right:10px}.banner-inputs[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;margin-right:10px;width:60px}"]}),r}();function pt(r,o){if(1&r){var e=t.EpF();t.TgZ(0,"app-display-quantity-promotion",4),t.NdJ("quantityStagesFormArrayChange",function(d){t.CHM(e);var s=t.oxw();return t.KtG(s.onQuantityStagesFormArrayChange(d))})("promoproduct_id_for_Addedit",function(d){t.CHM(e);var s=t.oxw();return t.KtG(s.promoProd_Select_Changed_for_Addedit(d))})("product_id_for_Detail",function(d){t.CHM(e);var s=t.oxw();return t.KtG(s.Prod_Select_Changed_for_Detail(d))}),t.qZA()}if(2&r){var i=t.oxw();t.Q6J("events",i.eventsSubject.asObservable())}}function lt(r,o){if(1&r){var e=t.EpF();t.TgZ(0,"app-quantity-promotion-add-edit",5),t.NdJ("formSaved",function(d){t.CHM(e);var s=t.oxw();return t.KtG(s.productformSave_Detected(d))}),t.qZA()}if(2&r){var i=t.oxw();t.Q6J("quantityStagesFormArray",i.quantityStagesFormArray)("param_PromoProd_id",i.curr_PromoProd_id_for_Addedit)}}var ft=[{path:"",component:U,children:[{path:"",redirectTo:"Product-Promotions",pathMatch:"full"},{path:"Product-Promotions",component:et},{path:"Quantity-Promotions",component:function(){function r(){this.eventsSubject=new T.xQ}return r.prototype.emitEventToChild=function(){this.eventsSubject.next()},r.prototype.promoProd_Select_Changed_for_Addedit=function(o){this.curr_PromoProd_id_for_Addedit=o},r.prototype.Prod_Select_Changed_for_Detail=function(o){this.curr_Prod_id_for_detail=o},r.prototype.productformSave_Detected=function(o){this.curr_PromoProd_id_for_Addedit=null,this.emitEventToChild()},r.prototype.onQuantityStagesFormArrayChange=function(o){this.quantityStagesFormArray=o},r.prototype.onScroll=function(o){console.log("scrolling...")},r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-quantity-promotions"]],hostBindings:function(e,i){1&e&&t.NdJ("scroll",function(d){return i.onScroll(d)},!1,t.Jf7)},decls:5,vars:2,consts:[[1,"row"],[1,"col-12"],[3,"events","quantityStagesFormArrayChange","promoproduct_id_for_Addedit","product_id_for_Detail",4,"ngIf"],[3,"quantityStagesFormArray","param_PromoProd_id","formSaved",4,"ngIf"],[3,"events","quantityStagesFormArrayChange","promoproduct_id_for_Addedit","product_id_for_Detail"],[3,"quantityStagesFormArray","param_PromoProd_id","formSaved"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,pt,1,1,"app-display-quantity-promotion",2),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,lt,1,2,"app-quantity-promotion-add-edit",3),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.curr_PromoProd_id_for_Addedit<0||null==i.curr_PromoProd_id_for_Addedit),t.xp6(2),t.Q6J("ngIf",i.curr_PromoProd_id_for_Addedit||0==i.curr_PromoProd_id_for_Addedit))},dependencies:[m.O5,dt,mt]}),r}()},{path:"Order-Promotions",component:H}]}],ht=function(){function r(){}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[Z.Bz.forChild(ft),Z.Bz]}),r}(),gt=c(1633),yt=function(){function r(){}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[m.uU],imports:[m.ez,a.u5,a.UX,_.kn.forRoot(),ht,gt.m]}),r}()}}]);