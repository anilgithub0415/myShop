"use strict";(self.webpackChunkEshop=self.webpackChunkEshop||[]).push([[592],{5474:(f,p,s)=>{s.d(p,{E:()=>m});var c=s(4766),u=s(591),l=s(4850),a=s(4650),h=s(529),d=s(2114),m=function(){function o(r,t){var e=this;this.http=r,this.servAuth=t,this.apiUrl=c.N.apiUrl+"ordercommission",this.orderSubject=new u.X({}),this.orderitemSubject=new u.X([]),this.SellerpaycommissionSubject=new u.X({}),this.servAuth.currentUser.subscribe(function(i){return e.currentUser=i}),this.servAuth.isUserLoggedIn()&&this.loadOrders()}return o.prototype.Get_Completed_Orders_Of_Sellers_For_PayCommission=function(r,t){var e=this.apiUrl+"/"+r;return console.log("url:"+e),""!=t&&(e=e+"/"+t),this.http.get(e)},o.prototype.PayCommission_for_Order=function(r){return this.http.put(this.apiUrl+"/PayCommission?orderId="+r.orderId,{})},o.prototype.PayCommission_for_Orders=function(r){return this.http.put(this.apiUrl+"/PayCommission?orderId=0&orderIds_comma_seperated="+r,{})},o.prototype.Get_Sellers_UNPAID_Commission_Summary=function(r){return this.http.get(this.apiUrl+"/0/Complete")},o.prototype.Get_Orders_Of_Customer=function(r,t){var e=this.apiUrl+"/"+r+"/0";return console.log("url:"+e),""!=t&&(e=e+"/"+t),this.http.get(e)},o.prototype.PlaceOrder=function(r,t,e){return this.http.post(this.apiUrl,{userId:r,orderdate:Date(),orderItems:t}).subscribe(function(){})},o.prototype.CheckOutOrder=function(r,t,e,i,n,_){return this.http.post(this.apiUrl,{order_status:r,userId:t,seller_id:e,orderdate:Date(),orderItems:i,totalAmount:n,discount:_}).subscribe(function(){})},o.prototype.getOrder=function(){return this.orderSubject.asObservable()},o.prototype.getOrderItems=function(){return this.orderitemSubject.asObservable()},o.prototype.getSellerpaycommission=function(){return this.SellerpaycommissionSubject.asObservable()},o.prototype.loadOrders=function(){var r=this;console.log("loadorders");var e=0;this.http.get(this.apiUrl+"/"+this.currentUser.id+"/Complete").pipe((0,l.U)(function(i){return i.map(function(n){"UNPAID"==n.commission_status&&(e+=n.commission_applicable)}),e})).subscribe(function(i){r.SellerpaycommissionSubject.next(i)})},o.prototype.serOrderStatus=function(r,t){return this.http.put(this.apiUrl+"/orderstatuschange?orderid="+r+"&orderstatus="+t,{}).subscribe(function(){})},o.\u0275fac=function(t){return new(t||o)(a.LFG(h.eN),a.LFG(d.$))},o.\u0275prov=a.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o}()}}]);