"use strict";(self.webpackChunkmyEshop=self.webpackChunkmyEshop||[]).push([[816],{816:(rt,C,l)=>{l.r(C),l.d(C,{HomeModule:()=>et});var d=l(6895),m=l(7716),f=l(655),t=l(5062),g=l(1716),O=l(5760),I=l(2340),_=l(591),x=l(4850),v=function(){function e(){}return e.prototype.deserialize=function(o){return this.id=o.cartItemId,this.productId=o.productId,this.quantity=this.quantity,this},e}(),Z=function e(){},A=function(){function e(){}return e.prototype.deserialize=function(o){return Object.assign(this,o),this},e}(),b=l(529),T=function(){function e(o,r){var n=this;this.http=o,this.servAuth=r,this.apiUrl=I.N.apiUrl+"cart",this.cartItems=new _.X([]),this.cartSubject=new _.X([]),this.mapCartResponseToModel=function(i){console.log("response[0].cartId:"+i[0].cartId+" ,response[0].userId:"+i[0].userId);var s=new Z;return s.id=i[0].cartId,s.userId=i[0].userId,s.cartItems=i.map(function(c){console.log("aitem.quantity:"+c.quantity);var u=new A;u.id=c.id,u.product_name=c.product_name,u.price=c.price;var p=new v;return p.id=c.cartItemId,p.productId=c.productId,p.product_name=c.product_name,p.quantity=c.quantity,console.log("returning cartItem by mapping:"+JSON.stringify(p)),p}),console.log("full cart:"+JSON.stringify(s)),s},this.servAuth.currentUser.subscribe(function(i){return n.currentUser=i}),this.servAuth.isUserLoggedIn()&&this.loadCart()}return e.prototype.getCartItems=function(){return this.cartSubject.asObservable()},e.prototype.addToCart=function(o,r,n){var i=this,s=new v;s.productId=r.id,s.product_name=r.product_name,s.quantity=1,s.price=r.price,s.seller_id=r.seller_id,s.seller_name=r.seller_name,s.seller_name=r.firm_name,this.http.post(this.apiUrl,{userId:o,item:s}).subscribe(function(){var c=i.cartItems.getValue();i.isItemInCart(c,r.id)||(c.push(s),i.cartItems.next(c))})},e.prototype.removeFromCart=function(o){var r=this;console.log("cartItem.id:"+JSON.stringify(o));var n=this.cartSubject.value,i=n.findIndex(function(s){return s.id===o.id});return i>-1&&this.http.delete("".concat(this.apiUrl,"/").concat(o.id)).subscribe(function(s){n.splice(i,1),console.log("res imp:"+s),r.cartSubject.next(s),r.loadCart(),r.getCartItems()}),this.getCartItems()},e.prototype.saveCart=function(){this.http.post("/api/cart",this.cartItems).subscribe()},e.prototype.getCartItemCount=function(){var o=this.cartItems.getValue();return console.log("items in getCartItemCount:"+o),o.reduce(function(r,n){return r+1},0)},e.prototype.loadCart=function(){var o=this;console.log("loadingcart");var r=this.apiUrl+"/"+this.currentUser.id;console.log("url in loadcart is :"+r),this.http.get(r).pipe((0,x.U)(function(n){console.log("response[0].cartId:"+JSON.stringify(n[0]));var i=new Z;return i.id=n[0].cartId,i.userId=n[0].userId,i.cartItems=n.map(function(s){var c=new v;return c.id=s.cartItemId,c.cartItemId=s.cartItemId,c.productId=s.productId,c.product_name=s.product_name,c.seller_id=s.seller_id,c.seller_name=s.seller_name,c.price=s.price,c.quantity=s.quantity,c}),i})).subscribe(function(n){o.cartSubject.next(n.cartItems),console.log("Cart:",n)})},e.prototype.isItemInCart=function(o,r){return-1!==o.findIndex(function(n){return n.id===r})},e.\u0275fac=function(r){return new(r||e)(t.LFG(b.eN),t.LFG(g.$))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function U(e,o){if(1&e){var r=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"p",9),t._uU(4),t.qZA()(),t._UZ(5,"img",10),t.TgZ(6,"div",11)(7,"h5",12),t._uU(8),t.qZA(),t.TgZ(9,"p",13),t._uU(10),t.qZA(),t.TgZ(11,"p",13),t._uU(12),t.qZA()(),t.TgZ(13,"div",14)(14,"button",15),t.NdJ("click",function(){var u=t.CHM(r).$implicit,p=t.oxw();return t.KtG(p.addToCart(u))}),t._uU(15,"Add to Cart"),t.qZA()()()()}if(2&e){var n=o.$implicit,i=t.oxw();t.xp6(4),t.AsE("",n.firm_name,"",n.firm_addr,""),t.xp6(1),t.MGl("src","../../../../../assets/product_images/",n.imageUrl,"",t.LSH),t.xp6(3),t.Oqu(n.product_name),t.xp6(2),t.Oqu(n.description),t.xp6(2),t.AsE("Price:",n.price," \xa0\xa0 \xa0 ",n.discount_text,""),t.xp6(2),t.Q6J("disabled",null==i.currentUser)}}function q(e,o){1&e&&(t.TgZ(0,"div",16),t._uU(1,"Loading..."),t.qZA())}function S(e,o){1&e&&(t.TgZ(0,"div",16),t._uU(1,"End of results"),t.qZA())}var J=function(){function e(o,r,n,i){this.servAuth=o,this.router=r,this.servProduct=n,this.cartService=i,this.products=[],this.page=1,this.limit=5,this.loading=!1,this.endOfResults=!1,this.cartItemCount=0}return e.prototype.ngViewInit=function(){this.loadProducts()},e.prototype.ngOnInit=function(){var o=this;console.log(" m here ..."),this.servAuth.currentUser.subscribe(function(r){return o.currentUser=r}),this.cartItemCount=this.cartService.getCartItemCount(),this.loadProducts()},e.prototype.addToCart=function(o){this.cartService.addToCart(this.currentUser.id,o,1)},e.prototype.viewCart=function(){this.router.navigateByUrl("/cartDB")},e.prototype.onScroll=function(o){console.log("scrolling...");var r=(document.documentElement.scrollTop||document.body.scrollTop)+document.documentElement.offsetHeight,n=document.documentElement.scrollHeight;console.log("pos:"+r),r>=n-100&&!this.loading&&!this.endOfResults&&this.loadProducts()},e.prototype.loadProducts=function(){var o=this;console.log("loadProducts "),this.loading=!0,this.servProduct.getProducts_chunk(this.page,this.limit).subscribe(function(r){var n;console.log("data:"+r),0===r.length?o.endOfResults=!0:((n=o.products).push.apply(n,(0,f.ev)([],(0,f.CR)(r),!1)),o.page++),o.loading=!1})},e.\u0275fac=function(r){return new(r||e)(t.Y36(g.$),t.Y36(m.F0),t.Y36(O.M),t.Y36(T))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-home"]],hostBindings:function(r,n){1&r&&t.NdJ("scroll",function(s){return n.onScroll(s)},!1,t.Jf7)},decls:9,vars:5,consts:[[2,"border","5px solid pink","border-radius","5px"],["type","button",1,"btn","btn-danger",3,"disabled","click"],[1,"badge","badge-light"],[1,"row"],["class","col-6 col-sm-4 col-md-4 col-lg-3",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[1,"col-6","col-sm-4","col-md-4","col-lg-3"],[1,"card","mt-2","mb-3",2,"background-color","light-yellow","border","3px solid pink","padding","10px"],[1,"card-body",2,"padding","0"],[1,"card-text","firm_name"],["alt","Product image",1,"card-img-top",2,"padding","0","height","150px","width","auto","object-fit","contain",3,"src"],[1,"card-body"],[1,"card-title",2,"color","maroon"],[1,"card-text"],[1,"card-footer"],["type","button",1,"btn","btn-success","btn-xs",2,"background-color","maroon",3,"disabled","click"],[1,"text-center"]],template:function(r,n){1&r&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return n.viewCart()}),t._uU(2,"Cart "),t.TgZ(3,"span",2),t._uU(4),t.qZA()(),t.TgZ(5,"div",3),t.YNc(6,U,16,8,"div",4),t.qZA()(),t.YNc(7,q,2,0,"div",5),t.YNc(8,S,2,0,"div",5)),2&r&&(t.xp6(1),t.Q6J("disabled",null==n.currentUser),t.xp6(3),t.Oqu(n.cartItemCount),t.xp6(2),t.Q6J("ngForOf",n.products),t.xp6(1),t.Q6J("ngIf",n.loading),t.xp6(1),t.Q6J("ngIf",n.endOfResults))},dependencies:[d.sg,d.O5],styles:["[_nghost-%COMP%]{display:block;background-color:#e2725b;border:15px solid rgb(245,241,242);border-radius:5px}.card[_ngcontent-%COMP%]:hover{transform:scale(1.09);box-shadow:0 10px 20px #0000001f,0 4px 8px #0000000f}.firm_name[_ngcontent-%COMP%]{font-size:11px;color:gray}.firm_addr[_ngcontent-%COMP%]{font-size:9px;color:gray}.btn-xs[_ngcontent-%COMP%]{font-size:10px;padding:2px 10px}"]}),e}(),F=function(){function e(o){this.http=o,this.apiUrl=I.N.apiUrl_mockdata+"items"}return e.prototype.getProducts=function(){return this.http.get(this.apiUrl)},e.\u0275fac=function(r){return new(r||e)(t.LFG(b.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function N(e,o){if(1&e&&(t.TgZ(0,"div",2)(1,"div",3),t._UZ(2,"img",4),t.TgZ(3,"div",5)(4,"h5",6),t._uU(5),t.qZA(),t.TgZ(6,"p",7),t._uU(7),t.qZA()()()()),2&e){var r=o.$implicit;t.xp6(2),t.Q6J("src",r.productImg||"placeholder.png",t.LSH),t.xp6(3),t.Oqu(r.product_name),t.xp6(2),t.Oqu(r.description)}}var k=function(){function e(o){this.servProduct=o,this.images_all=[]}return e.prototype.ngOnInit=function(){var o=this;this.servProduct.getProducts().subscribe(function(r){o.images_all=r,console.log(r)})},e.prototype.loadmoreimages=function(){this.images_all.push({id:1,name:"Shirt",descriptions:"desc1",category:1,ratings:3,productImg:"assets/food.jpg"})},e.\u0275fac=function(r){return new(r||e)(t.Y36(F))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-test-home"]],decls:2,vars:1,consts:[[1,"row"],["class","col-6 col-sm-4 col-md-4 col-lg-3",4,"ngFor","ngForOf"],[1,"col-6","col-sm-4","col-md-4","col-lg-3"],[1,"card","mb-3",2,"padding","10px"],["alt","Product image",1,"card-img-top",2,"height","250px","width","auto","object-fit","contain",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(r,n){1&r&&(t.TgZ(0,"div",0),t.YNc(1,N,8,3,"div",1),t.qZA()),2&r&&(t.xp6(1),t.Q6J("ngForOf",n.images_all))},dependencies:[d.sg]}),e}(),P=function(){function e(){this.cartKey="guest_cart",this.cartItemsSubject=new _.X([]),this.cartItems$=this.cartItemsSubject.asObservable();var o=localStorage.getItem(this.cartKey),r=o?JSON.parse(o):[];this.cartItemsSubject.next(r)}return e.prototype.getCartItems=function(){var o=localStorage.getItem(this.cartKey);return o?JSON.parse(o):[]},e.prototype.addToCart=function(o){var r=this.cartItemsSubject.getValue(),n=r.find(function(s){return s.id===o.id});if(n&&n.quantity)n.quantity++;else{var i=new v;i.productId=o.id,i.product_name=o.product_name,i.quantity=1,i.price=o.price,r.push(i)}this.cartItemsSubject.next(r),this.saveCart(r)},e.prototype.removeFromCart=function(o){var r=this.cartItemsSubject.getValue(),n=r.findIndex(function(i){return i.id===o.id});n>-1&&(r.splice(n,1),this.cartItemsSubject.next(r),this.saveCart(r))},e.prototype.getCartItemCount=function(){var o=localStorage.getItem(this.cartKey);return(o?JSON.parse(o):[]).length},e.prototype.clearCart=function(){var o=[];this.cartItemsSubject.next(o),this.saveCart(o)},e.prototype.saveCart=function(o){localStorage.setItem(this.cartKey,JSON.stringify(o))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac=function(r){return new(r||e)},providedIn:"root"}),e}();function Y(e,o){if(1&e){var r=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"button",9),t.NdJ("click",function(){var c=t.CHM(r).$implicit,u=t.oxw(2);return t.KtG(u.removeFromCart(c))}),t._uU(11,"Remove"),t.qZA()()()}if(2&e){var n=o.$implicit;t.xp6(2),t.Oqu(n.product_name),t.xp6(2),t.Oqu(n.quantity),t.xp6(2),t.Oqu(n.price),t.xp6(2),t.Oqu(n.quantity*n.price)}}function B(e,o){if(1&e&&(t.TgZ(0,"div")(1,"div",5)(2,"table",6)(3,"thead")(4,"tr")(5,"th"),t._uU(6,"Product Name"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Quantity"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Price"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Total"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Actions"),t.qZA()()(),t.TgZ(15,"tbody"),t.YNc(16,Y,12,4,"tr",7),t.qZA()()(),t._UZ(17,"div",8),t.qZA()),2&e){var r=t.oxw();t.xp6(16),t.Q6J("ngForOf",r.cartItems)}}function w(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1,"Your cart is empty."),t.qZA())}var H=function(){function e(o){this.cartService=o,this.cartItems=[]}return e.prototype.ngOnInit=function(){this.cartItems=this.cartService.getCartItems()},e.prototype.removeFromCart=function(o){this.cartService.removeFromCart(o),this.cartItems=this.cartService.getCartItems()},e.\u0275fac=function(r){return new(r||e)(t.Y36(P))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-cart"]],decls:9,vars:2,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-md-12"],[4,"ngIf","ngIfElse"],["emptyCart",""],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"text-right"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(r,n){if(1&r&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4,"Shopping Cart"),t.qZA(),t._UZ(5,"hr"),t.YNc(6,B,18,1,"div",3),t.YNc(7,w,2,0,"ng-template",null,4,t.W1O),t.qZA()()()),2&r){var i=t.MAs(8);t.xp6(6),t.Q6J("ngIf",n.cartItems.length>0)("ngIfElse",i)}},dependencies:[d.sg,d.O5]}),e}(),y=l(2984),a=l(4719);function M(e,o){if(1&e){var r=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"input",11),t.NdJ("ngModelChange",function(s){var c=t.CHM(r);return t.KtG(c.$implicit.selected=s)}),t.qZA()(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t._UZ(11,"td"),t.TgZ(12,"td")(13,"button",12),t.NdJ("click",function(){var c=t.CHM(r).$implicit,u=t.oxw(3);return t.KtG(u.removeFromCart(c))}),t._uU(14,"Remove"),t.qZA()()()}if(2&e){var n=o.$implicit;t.xp6(2),t.Q6J("ngModel",n.selected),t.xp6(2),t.Oqu(n.product_name),t.xp6(2),t.Oqu(n.seller_name),t.xp6(2),t.Oqu(n.quantity),t.xp6(2),t.Oqu(n.price)}}function D(e,o){if(1&e&&(t.TgZ(0,"div")(1,"div",7)(2,"table",8)(3,"thead")(4,"tr")(5,"th"),t._uU(6,"Select"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Product Name"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"Supplier Name"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"Quantity"),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Price"),t.qZA(),t.TgZ(15,"th"),t._uU(16,"Total"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Actions"),t.qZA()()(),t.TgZ(19,"tbody"),t.YNc(20,M,15,5,"tr",9),t.qZA()()(),t._UZ(21,"div",10),t.qZA()),2&e){var r=t.oxw().$implicit;t.xp6(20),t.Q6J("ngForOf",r.value)}}function E(e,o){1&e&&(t.TgZ(0,"p"),t._uU(1,"Your cart is empty."),t.qZA())}function j(e,o){if(1&e){var r=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"h4"),t._uU(4),t.qZA(),t.TgZ(5,"button",4),t.NdJ("click",function(){var p=t.CHM(r).$implicit,h=t.oxw();return t.KtG(h.PlaceOrder(p))}),t._uU(6,"Place Order"),t.qZA(),t._UZ(7,"hr"),t.YNc(8,D,22,1,"div",5),t.YNc(9,E,2,0,"ng-template",null,6,t.W1O),t.qZA()()()}if(2&e){var n=o.$implicit,i=t.MAs(10),s=t.oxw();t.xp6(4),t.hij("Supplier ",n.value[0].seller_name,""),t.xp6(4),t.Q6J("ngIf",s.cartItems&&s.cartItems.length>0)("ngIfElse",i)}}var Q=function(){function e(o,r,n,i){var s=this;this.cartService=o,this.servOrder=r,this.router=n,this.servAuth=i,this.cartItems=[],this.cartTotal=0,this.itemsBySupplier={},this.subtotal=0,this.servAuth.currentUser.subscribe(function(c){return s.currentUser=c})}return e.prototype.ngOnInit=function(){this.getCartItems()},e.prototype.PlaceOrder=function(o){var r=o.value.filter(function(s){return s.selected});if(console.log("selectedCartItems:"+JSON.stringify(r.length)),console.log("trying to store selectedCartItems[0] to localstoarge:"+JSON.stringify(r)),localStorage.setItem("cartitemsToPlaceOrder",JSON.stringify(r)),r.length>0){console.log("navigating to checkout...");var i={queryParams:{key:r}};console.log("sendingJSON.stringify(selectedCartItems):"+JSON.stringify(r)),console.log("sending selectedCartItems:"+r),console.log("navigationExtras:"+JSON.stringify(i)),this.router.navigate(["checkout"],{queryParams:{cartitemsToPlaceOrder:JSON.stringify(r)}})}},e.prototype.createOrder_Preserved=function(){var o,r;try{for(var i=(0,f.XA)(Object.values(this.itemsBySupplier)),s=i.next();!s.done;s=i.next()){var u=s.value.filter(function(h){return h.selected});u.length>0&&(this.servOrder.PlaceOrder(this.currentUser.id,u),this.router.navigateByUrl("order"))}}catch(h){o={error:h}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}},e.prototype.getCartItems=function(){var o=this;this.cartService.getCartItems().subscribe(function(r){o.cartItems=r,o.subtotal=0,o.cartItems.forEach(function(n){var i=n.seller_id;o.itemsBySupplier[i||0]||(o.itemsBySupplier[i||0]=[]),n.total=(null==n.price?0:n.price)*(null==n.quantity?0:n.quantity),o.subtotal=o.subtotal+(null==n.price?0:n.price)*(null==n.quantity?0:n.quantity),o.itemsBySupplier[i||0].push(n)}),console.log("subtotal:"+o.subtotal),console.log("itemsBySupplier:"+JSON.stringify(o.itemsBySupplier)),console.log("itemsBySupplier[2]:"+JSON.stringify(o.itemsBySupplier[5]))})},e.prototype.removeFromCart=function(o){var r=this;this.cartService.removeFromCart(o).subscribe(function(n){r.getCartItems()})},e.prototype.checkout=function(){this.router.navigate(["/checkout"])},e.\u0275fac=function(r){return new(r||e)(t.Y36(T),t.Y36(y.p),t.Y36(m.F0),t.Y36(g.$))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-cart-db"]],decls:3,vars:5,consts:[["class","container mt-5",4,"ngFor","ngForOf"],[1,"container","mt-5"],[1,"row"],[1,"col-md-12"],[3,"click"],[4,"ngIf","ngIfElse"],["emptyCart",""],[1,"table-responsive"],[1,"table"],[4,"ngFor","ngForOf"],[1,"text-right"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(r,n){1&r&&(t._uU(0),t.YNc(1,j,11,3,"div",0),t.ALo(2,"keyvalue")),2&r&&(t.AsE("\nCartItems :",n.cartItems.length," cartTotal:",n.cartTotal," "),t.xp6(1),t.Q6J("ngForOf",t.lcZ(2,3,n.itemsBySupplier)))},dependencies:[d.sg,d.O5,a.Wl,a.JJ,a.On,d.Nd]}),e}();function $(e,o){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var r=t.oxw();t.xp6(1),t.AsE("Yes orderId:",r.order.id," Date:",r.order.orderdate,"")}}function G(e,o){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var r=t.oxw();t.xp6(1),t.hij("Yes then count it:",r.orderItems.length,"")}}var R=function(){function e(o,r,n){var i=this;this.servOrder=o,this.router=r,this.servAuth=n,this.orderItems=[],this.servAuth.currentUser.subscribe(function(s){return i.currentUser=s})}return e.prototype.ngOnInit=function(){this.getOrders(),this.getOrderItems()},e.prototype.getOrders=function(){var o=this;this.servOrder.getOrder().subscribe(function(r){o.order=r})},e.prototype.getOrderItems=function(){var o=this;this.servOrder.getOrderItems().subscribe(function(r){o.orderItems=r})},e.\u0275fac=function(r){return new(r||e)(t.Y36(y.p),t.Y36(m.F0),t.Y36(g.$))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-order"]],decls:6,vars:2,consts:[[4,"ngIf"]],template:function(r,n){1&r&&(t.TgZ(0,"p"),t._uU(1,"order works!"),t.qZA(),t._uU(2,"\norder exists:"),t.YNc(3,$,2,2,"div",0),t._uU(4,"\norderItems Exists:"),t.YNc(5,G,2,1,"div",0)),2&r&&(t.xp6(3),t.Q6J("ngIf",n.order),t.xp6(2),t.Q6J("ngIf",n.orderItems))},dependencies:[d.O5]}),e}();function z(e,o){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){var r=o.$implicit;t.xp6(1),t.HOy(" ",r.id," ",r.product_name," ",r.price," ",r.quantity," ")}}var K=function(){function e(o,r,n,i,s){var c=this;this.router=o,this.route=r,this.servAuth=n,this.formBuilder=i,this.servOrder=s,this.totalPrice=0,console.log("constructor runing in checkout...."),this.servAuth.currentUser.subscribe(function(u){return c.currentUser=u}),console.log("cvalue:"+JSON.stringify(this.servAuth.currentUserValue.userid))}return e.prototype.ngOnInit=function(){return(0,f.mG)(this,void 0,void 0,function(){return(0,f.Jh)(this,function(o){switch(o.label){case 0:return this.myForm=this.formBuilder.group({userid:["",[a.kI.required,a.kI.min(3),a.kI.max(20)]],seller_id:[]}),[4,this.receive_order()];case 1:return o.sent(),this.calculateTotalPrice(),this.patchFormvalues(),[2]}})})},e.prototype.patchFormvalues=function(){this.myForm.patchValue({userid:this.servAuth.currentUserValue.userid,seller_id:this.seller_id})},e.prototype.receive_order=function(){var o=this;return new Promise(function(r,n){o.route.queryParams.subscribe(function(i){console.log("params:"+i.cartitemsToPlaceOrder),o.cartitemsToPlaceOrder=JSON.parse(i.cartitemsToPlaceOrder),o.seller_id=o.cartitemsToPlaceOrder[0].seller_id,o.totalPrice=o.cartitemsToPlaceOrder.reduce(function(c,u){return c+u.price*u.quantity},0)}),r(!0)})},e.prototype.calculateTotalPrice=function(){console.log("calc for :"+this.cartitemsToPlaceOrder),this.myarr=[{id:1,price:10,quantity:7}],console.log("myarr:"+JSON.stringify(this.myarr)),this.totalPrice=this.cartitemsToPlaceOrder.reduce(function(o,r){return o+r.price*r.quantity},0)},e.prototype.onSubmit=function(){this.servOrder.CheckOutOrder("PAID",this.currentUser.id,this.seller_id,this.cartitemsToPlaceOrder)},e.\u0275fac=function(r){return new(r||e)(t.Y36(m.F0),t.Y36(m.gz),t.Y36(g.$),t.Y36(a.qu),t.Y36(y.p))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-checkout"]],decls:16,vars:6,consts:[[4,"ngFor","ngForOf"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","userid"],["type","text","formControlName","userid","id","userid",1,"form-control"],["type","text","formControlName","seller_id","id","userid",1,"form-control"],["type","submit",1,"btn","btn-primary"]],template:function(r,n){1&r&&(t.TgZ(0,"p"),t._uU(1,"checkout works!"),t.qZA(),t._uU(2),t.YNc(3,z,2,4,"div",0),t._uU(4),t.TgZ(5,"form",1),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(6,"div",2)(7,"label",3),t._uU(8,"userid"),t.qZA(),t._UZ(9,"input",4),t.qZA(),t.TgZ(10,"div",2)(11,"label",3),t._uU(12,"seller_id"),t.qZA(),t._UZ(13,"input",5),t.qZA(),t.TgZ(14,"button",6),t._uU(15),t.qZA()()),2&r&&(t.xp6(2),t.AsE("\nseller_id:",n.seller_id,"\ncartitemsToPlaceOrder:",n.cartitemsToPlaceOrder," "),t.xp6(1),t.Q6J("ngForOf",n.cartitemsToPlaceOrder),t.xp6(1),t.hij(" totalPrice:",n.totalPrice," "),t.xp6(1),t.Q6J("formGroup",n.myForm),t.xp6(10),t.hij("Pay Rs. ",n.totalPrice," and Checkout order"))},dependencies:[d.sg,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u]}),e}(),X=l(693);function L(e,o){1&e&&(t.TgZ(0,"span",15),t._uU(1," IsActive is required. "),t.qZA())}var W=[{path:"",component:J},{path:"testHome",component:k},{path:"cart",component:H},{path:"cartDB",component:Q},{path:"order",component:R},{path:"checkout",component:K},{path:"signup",component:function(){function e(o,r){this.formBuilder=o,this.servUser=r,this.formSaved=new t.vpe,this.isSubmitted=!1,this.isSubmitted_uploadform=!1,this.roleList=["Admin","Seller","Customer"]}return e.prototype.ngOnInit=function(){this.myForm=this.formBuilder.group({id:[],userid:["",[a.kI.required,a.kI.min(3),a.kI.max(20)]],display_name:["",[a.kI.required,a.kI.min(3),a.kI.max(50)]],password:["",[a.kI.required,a.kI.min(3),a.kI.max(50)]],userrole:["",[a.kI.required,a.kI.min(3),a.kI.max(20)]],access_saturated:[""],IsActive:["",[a.kI.required]],CREATEDBY_username:["",[a.kI.required,a.kI.min(3),a.kI.max(25)]]}),this.myForm.patchValue({id:0,userrole:"Customer",CREATEDBY_username:"self"})},Object.defineProperty(e.prototype,"errorControl",{get:function(){return this.myForm.controls},enumerable:!1,configurable:!0}),e.prototype.onSubmit=function(){var o=this;console.log("form:"+JSON.stringify(this.myForm.value)),this.servUser.addUser(this.myForm.value).subscribe(function(r){o.formSaved.emit(!0),o.myForm.reset()})},e.\u0275fac=function(r){return new(r||e)(t.Y36(a.qu),t.Y36(X.K))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-signup"]],decls:30,vars:4,consts:[[3,"formGroup","ngSubmit"],[1,"form-group"],["for","userid"],["type","text","formControlName","userid","id","userid",1,"form-control"],["for","display_name"],["type","text","formControlName","display_name","id","display_name",1,"form-control"],["for","password"],["type","text","formControlName","password","id","password",1,"form-control"],["stacked",""],["formControlName","IsActive"],[3,"value"],["class","error",4,"ngIf"],["for","access_saturated"],["type","text","formControlName","access_saturated","id","access_saturated",1,"form-control"],["type","submit",1,"btn","btn-primary"],[1,"error"]],template:function(r,n){1&r&&(t.TgZ(0,"p"),t._uU(1,"signup works!"),t.qZA(),t.TgZ(2,"form",0),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(3,"div",1)(4,"label",2),t._uU(5,"userid"),t.qZA(),t._UZ(6,"input",3),t.qZA(),t.TgZ(7,"div",1)(8,"label",4),t._uU(9,"Display Name"),t.qZA(),t._UZ(10,"input",5),t.qZA(),t.TgZ(11,"div",1)(12,"label",6),t._uU(13,"Password"),t.qZA(),t._UZ(14,"input",7),t.qZA(),t.TgZ(15,"div",1)(16,"label",8),t._uU(17,"IsActive"),t.qZA(),t.TgZ(18,"select",9)(19,"option",10),t._uU(20,"Active "),t.qZA(),t.TgZ(21,"option",10),t._uU(22,"InActive"),t.qZA()(),t.YNc(23,L,2,0,"span",11),t.qZA(),t.TgZ(24,"div",1)(25,"label",12),t._uU(26,"access_saturated"),t.qZA(),t._UZ(27,"input",13),t.qZA(),t.TgZ(28,"button",14),t._uU(29,"Submit"),t.qZA()()),2&r&&(t.xp6(2),t.Q6J("formGroup",n.myForm),t.xp6(17),t.Q6J("value",!0),t.xp6(2),t.Q6J("value",!1),t.xp6(2),t.Q6J("ngIf",n.isSubmitted&&(null==n.errorControl.IsActive.errors?null:n.errorControl.IsActive.errors.required)))},dependencies:[d.O5,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.sg,a.u]}),e}()}],tt=function(){function e(){}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.Bz.forChild(W),m.Bz]}),e}(),et=function(){function e(){}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.ez,a.u5,a.UX,tt]}),e}()}}]);